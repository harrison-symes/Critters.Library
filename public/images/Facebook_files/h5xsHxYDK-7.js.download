;/*FB_PKG_DELIM*/

__d("CometEmojiPickerContainer.react",["CometEmojiPicker.react","react","react-compiler-runtime","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={wrap:{paddingTop:"x1iorvi4",width:"x5c4s84",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(8),e=a.height,f=a.includeRecentlyUsedEmojis,g=a.onSelect,h=a.selectedEmoji;a=a.topSection;f=f===void 0?!1:f;e=e!=null?e:260;var k;b[0]!==h?(k=h!=null?[h]:void 0,b[0]=h,b[1]=k):k=b[1];b[2]!==f||b[3]!==g||b[4]!==e||b[5]!==k||b[6]!==a?(h=i.jsx(d("react-strict-dom").html.div,{style:j.wrap,children:i.jsx(c("CometEmojiPicker.react"),{height:e,includeRecentlyUsedEmojis:f,onSelect:g,selectedEmojis:k,topSection:a})}),b[2]=f,b[3]=g,b[4]=e,b[5]=k,b[6]=a,b[7]=h):h=b[7];return h}g["default"]=a}),98);
__d("cometAddEmojiToComposerForLexical",["CometLexicalEmojiNode","FBEmojiResource","Lexical"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a.map(function(a){return String.fromCodePoint(a)}).join("")}function a(a,b,e,f){f===void 0&&(f=!0);function g(){b.update(function(){if(typeof a==="string"){var b=d("Lexical").$createTextNode(a);d("Lexical").$insertNodes([b]);return}b=h(a);var f=a.map(function(a){return String.fromCodePoint(a)});f=c("FBEmojiResource").fromCodepoints(f);if(f==null)return;f=f.getImageURL(e);if(f==null)return;var g=b;b=d("CometLexicalEmojiNode").$createEmojiNode(b,g,f,e);d("Lexical").$insertNodes([b])})}f?b.focus(function(){g()}):g()}g["default"]=a}),98);
__d("CometUFIEmojiPickerPopoverForLexical.react",["CometEmojiPickerContainer.react","CometLexicalEmojiNode","CometUFIComposerPluginsContext","FDSPopover.react","cometAddEmojiToComposerForLexical","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.useContext;function a(a){var b=d("react-compiler-runtime").c(6),e=a.onClose;a=a.pluginProps;var f=j(c("CometUFIComposerPluginsContext")),g=f.isComposerFocused,h=a.editor;b[0]!==h||b[1]!==g||b[2]!==e?(f=function(a){g||e(),h!=null&&c("cometAddEmojiToComposerForLexical")(a,h,d("CometLexicalEmojiNode").UFI_EMOJI_SIZE)},b[0]=h,b[1]=g,b[2]=e,b[3]=f):f=b[3];a=f;b[4]!==a?(f=i.jsx(c("FDSPopover.react"),{"aria-label":"Emoji picker popover",withArrow:!0,children:i.jsx(c("CometEmojiPickerContainer.react"),{height:320,includeRecentlyUsedEmojis:!0,onSelect:a})}),b[4]=a,b[5]=f):f=b[5];return f}g["default"]=a}),98);
__d("StoriesFeedbackEditorForLexical.react",["CometLexicalContentEditable.react","FeedComposerCometTextStyleContext","LexicalComposerContext","LexicalErrorBoundary","LexicalHistoryPlugin","LexicalPlainTextPlugin","MLCInstrumentationPluginDeferred__INTERNAL.react","cometComposerLexicalCreateEditor","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.useEffect;b.useMemo;var k=b.useRef,l={inputText:{caretColor:"xvm58g7",color:"x17z8epw",whiteSpace:"x1sdyfia",wordWrap:"xp5j34i",$$css:!0},root:{height:"x5yr21d",position:"x1n2onr6",width:"xh8yej3",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(35);a=a.props;var e=a.ariaLabel,f=a.contentEditableRef,g=a.editor,h=a.onEditorReady,m=a.onTextChange,n=a.placeholder,o=a.textStyleOverride;a=a.xstyle;var p=k(null),q;b[0]!==g?(q=g!=null?g:c("cometComposerLexicalCreateEditor")(),b[0]=g,b[1]=q):q=b[1];g=q;h==null||h(g);q=g;var r=q;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(h=d("LexicalComposerContext").createLexicalComposerContext(),b[2]=h):h=b[2];b[3]!==r?(g=[r,h],b[3]=r,b[4]=g):g=b[4];q=g;h=q;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(g=d("LexicalHistoryPlugin").createEmptyHistoryState(),b[5]=g):g=b[5];q=g;g=q;var s;b[6]!==r||b[7]!==m?(q=function(){if(m)return r.registerTextContentListener(function(a){m(a.trim())})},s=[r,m],b[6]=r,b[7]=m,b[8]=q,b[9]=s):(q=b[8],s=b[9]);j(q,s);b[10]!==f?(q=function(a){p.current=a,f&&f(a)},b[10]=f,b[11]=q):q=b[11];s=q;q=(q=o==null?void 0:o.color)!=null?q:"white";o=(o=o==null?void 0:o.fontSize)!=null?o:16;var t;b[12]!==q||b[13]!==o?(t={color:q,fontSize:o},b[12]=q,b[13]=o,b[14]=t):t=b[14];q=t;o=q;t=n!=null?n:"";q=n!=null?n:e;b[15]!==n?(e=n!=null?i.jsxs("div",{className:"x17z8epw x6ikm8r x10wlt62 x47corl x10l6tqk xlyipyv x13vifvy x87ps6o",children:[" ",n," "]}):null,b[15]=n,b[16]=e):e=b[16];b[17]!==a?(n=[l.root,l.inputText,a],b[17]=a,b[18]=n):n=b[18];b[19]!==s||b[20]!==t||b[21]!==q||b[22]!==e||b[23]!==n?(a=i.jsx(c("CometLexicalContentEditable.react"),{"aria-placeholder":t,ariaLabel:q,contentEditableRef:s,placeholder:e,spellCheck:!0,tabIndex:0,webDriverTestID:"stories-feedback-lexical-editor",xstyle:n}),b[19]=s,b[20]=t,b[21]=q,b[22]=e,b[23]=n,b[24]=a):a=b[24];s=a;b[25]===Symbol["for"]("react.memo_cache_sentinel")?(t=i.jsx(c("MLCInstrumentationPluginDeferred__INTERNAL.react"),{format__DEPRECATED:"PlainText",policyProduct:"facebook",surface:"stories"}),q=i.jsx(d("LexicalHistoryPlugin").HistoryPlugin,{externalHistoryState:g}),b[25]=t,b[26]=q):(t=b[25],q=b[26]);b[27]!==s?(e=i.jsx(d("LexicalPlainTextPlugin").PlainTextPlugin,{ErrorBoundary:d("LexicalErrorBoundary").LexicalErrorBoundary,contentEditable:s}),b[27]=s,b[28]=e):e=b[28];b[29]!==e||b[30]!==o?(n=i.jsxs(c("FeedComposerCometTextStyleContext").Provider,{value:o,children:[t,q,e]}),b[29]=e,b[30]=o,b[31]=n):n=b[31];b[32]!==h||b[33]!==n?(a=i.jsx(d("LexicalComposerContext").LexicalComposerContext.Provider,{value:h,children:n}),b[32]=h,b[33]=n,b[34]=a):a=b[34];return a}g["default"]=a}),98);
__d("StoriesFeedbackEmojiPopoverTrigger.react",["fbt","ix","CometPressable.react","FDSIcon.react","FDSLazyPopoverTrigger.react","FDSPopoverLoadingState.react","FDSTooltip.react","ImageIconSource","JSResourceForInteraction","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l=c("JSResourceForInteraction")("StoriesFeedbackEmojiPopover.react").__setRef("StoriesFeedbackEmojiPopoverTrigger.react");function a(a){var b=d("react-compiler-runtime").c(13);a=a.props;var e=a.onEmojiSelect,f=a.onVisibilityChange;a=a.testid;a=a===void 0?"stories-feedback-emoji-picker-button":a;var g;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g=k.jsx(c("FDSPopoverLoadingState.react"),{withArrow:!0}),b[0]=g):g=b[0];var j,m;b[1]!==f?(j=function(a){f==null||f(a)},m=function(){f==null||f(!1)},b[1]=f,b[2]=j,b[3]=m):(j=b[2],m=b[3]);var n;b[4]!==e||b[5]!==m?(n={onClose:m,onEmojiSelect:e},b[4]=e,b[5]=m,b[6]=n):n=b[6];b[7]!==a?(e=function(a,b,d,e,f,g){return k.jsx(c("CometPressable.react"),{"aria-label":h._(/*BTDS*/"Insert an emoji"),onHoverIn:e,onHoverOut:f,onPress:b,onPressIn:g,testid:void 0,children:k.jsx(c("FDSTooltip.react"),{position:"above",tooltip:h._(/*BTDS*/"Emoji"),children:k.jsx(c("FDSIcon.react"),{color:"white",icon:new(c("ImageIconSource"))(i("792304"),24,24),id:"stories-emoji-button",ref:a,size:20})})})},b[7]=a,b[8]=e):e=b[8];b[9]!==j||b[10]!==n||b[11]!==e?(m=k.jsx(c("FDSLazyPopoverTrigger.react"),{align:"middle",fallback:g,onVisibilityChange:j,popoverProps:n,popoverResource:l,position:"above",preloadTrigger:"button",children:e}),b[9]=j,b[10]=n,b[11]=e,b[12]=m):m=b[12];return m}g["default"]=a}),226);
__d("StoriesFeedbackLexicalEditor.react",["fbt","CometComponentWithKeyCommands.react","CometPressable.react","FDSIcon.react","Lexical","StoriesFeedbackEditorForLexical.react","StoriesFeedbackEditorStateContext","StoriesFeedbackEmojiPopoverTrigger.react","StoriesLoggerContext","StoriesLoggingConstants","StoriesSendFilled20IconSVG.react","clearTimeout","cometAddEmojiToComposerForLexical","cometComposerLexicalCreateEditor","react","react-compiler-runtime","setTimeout","useGlobalEventListener","usePrevious","useStoriesFeedbackKeyboardCommandsConfig"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;b.useCallback;var k=b.useContext,l=b.useEffect,m=b.useRef,n=b.useState,o=20,p={input:{overflowX:"x6ikm8r",overflowY:"x10wlt62",width:"xh8yej3",$$css:!0},inputWOComments:{height:"x17rw0jw",$$css:!0},sendButton:{marginInlineStart:"xdwrcjd",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(87),e=a.cardID,f=a.feedbackParentRef,g=a.isCoversationStarter,i=a.onBlur,t=a.onFocus,u=a.onSend,v=a.placeholder;a=n(!1);var w=a[0],x=a[1];a=n(!1);var y=a[0],z=a[1];a=n(!0);var A=a[0],ba=a[1];a=k(c("StoriesFeedbackEditorStateContext"));var B=a.contextualReplyRef,C=a.contextualReplyShown,D=a.contextualReplyTapped,E=a.inputFocused,F=a.mostRecentTappedID,G=a.setContextualReplyTapped,H=a.setMostRecentTappedID;a=k(c("StoriesLoggerContext"));var I=a.logger,J=m(null),K=m(!1),L=m(null);b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a={},b[0]=a):a=b[0];var M=m(a),N=c("usePrevious")(e),O=m(!1);a=n(aa);var P=a[0];b[1]!==P?(a=function(a){c("cometAddEmojiToComposerForLexical")(a,P,o)},b[1]=P,b[2]=a):a=b[2];a=a;var Q;b[3]!==P?(Q=function(){return P.getEditorState().read(s)},b[3]=P,b[4]=Q):Q=b[4];var R=Q,S;b[5]!==e||b[6]!==P||b[7]!==R||b[8]!==N?(Q=function(){if(e!==N){O.current=!0;if(N!=null){var a=R();M.current[N]=a}var b=M.current[e];P.update(function(){var a=d("Lexical").$getRoot();a.clear();if(b){var c=d("Lexical").$createParagraphNode();c.append(d("Lexical").$createTextNode(b));a.append(c)}});c("setTimeout")(function(){O.current=!1,P.blur()},0)}},S=[e,N,R,P],b[5]=e,b[6]=P,b[7]=R,b[8]=N,b[9]=Q,b[10]=S):(Q=b[9],S=b[10]);l(Q,S);b[11]!==G||b[12]!==H?(Q=function(){G(!1),z(!1),H(null)},b[11]=G,b[12]=H,b[13]=Q):Q=b[13];b[14]!==e||b[15]!==G||b[16]!==H?(S=[e,G,z,H],b[14]=e,b[15]=G,b[16]=H,b[17]=S):S=b[17];l(Q,S);b[18]!==P||b[19]!==R?(Q=function(){return P.registerUpdateListener(function(){ba(R()==="")})},S=[P,R],b[18]=P,b[19]=R,b[20]=Q,b[21]=S):(Q=b[20],S=b[21]);l(Q,S);b[22]!==D||b[23]!==P?(Q=function(a){var b=L.current;if(b&&a.target instanceof Node&&!b.contains(a.target))return;b=String.fromCharCode(a.keyCode);b.match(/\w/)&&(P.focus(),D&&z(!0))},b[22]=D,b[23]=P,b[24]=Q):Q=b[24];c("useGlobalEventListener")("keydown",Q);b[25]!==P||b[26]!==i?(S=function(a){var b=a===void 0?!0:a;if(K.current)return;c("clearTimeout")(J.current);J.current=c("setTimeout")(function(){x(!1),i(),b&&P.blur()})},b[25]=P,b[26]=i,b[27]=S):S=b[27];var T=S;b[28]!==P||b[29]!==R||b[30]!==g||b[31]!==t||b[32]!==v?(Q=function(a){a=a===void 0?!0:a;if(O.current)return;c("clearTimeout")(J.current);a&&(g===!0&&R().length===0&&P.update(function(){var a=d("Lexical").$getRoot();a.clear();var b=d("Lexical").$createParagraphNode();b.append(d("Lexical").$createTextNode(v));a.append(b);a.selectEnd()}),P.focus(),x(!0),t())},b[28]=P,b[29]=R,b[30]=g,b[31]=t,b[32]=v,b[33]=Q):Q=b[33];var U=Q;b[34]!==f||b[35]!==w||b[36]!==T?(S=function(a){var b;a=a.target;if(!w)return;if(a===f||a instanceof Node&&f!=null&&(b=f.current)!=null&&b.contains(a))return;T()},b[34]=f,b[35]=w,b[36]=T,b[37]=S):S=b[37];c("useGlobalEventListener")("click",S);b[38]!==e||b[39]!==C||b[40]!==D||b[41]!==y||b[42]!==P||b[43]!==T||b[44]!==I||b[45]!==F||b[46]!==u?(Q=function(){var a=P.getEditorState().read(r);if(a==="")return;u(a);C&&I.replySentWhenSmartReplyShownLog(y,F,D,c("StoriesLoggingConstants").STORY_REPLY_TYPE.TEXT_SUGGESTION);P.update(q);M.current[e]="";c("setTimeout")(function(){T()},0)},b[38]=e,b[39]=C,b[40]=D,b[41]=y,b[42]=P,b[43]=T,b[44]=I,b[45]=F,b[46]=u,b[47]=Q):Q=b[47];S=Q;b[48]!==T||b[49]!==S?(Q={onEnter:S,onEscape:T},b[48]=T,b[49]=S,b[50]=Q):Q=b[50];Q=c("useStoriesFeedbackKeyboardCommandsConfig")(Q);var V;b[51]===Symbol["for"]("react.memo_cache_sentinel")?(V=function(a){L.current=a},b[51]=V):V=b[51];V=V;var W;b[52]===Symbol["for"]("react.memo_cache_sentinel")?(W={className:"x6s0dn4 x78zum5 x1q0g3np xh8yej3"},b[52]=W):W=b[52];var X;b[53]!==B.current||b[54]!==T?(X=function(a){if(B.current!=null&&B.current.contains(a.relatedTarget))return;T(a.target===L.current)},b[53]=B.current,b[54]=T,b[55]=X):X=b[55];var Y;b[56]!==U?(Y=function(a){if(O.current)return;U(a.target===L.current)},b[56]=U,b[57]=Y):Y=b[57];var Z;b[58]===Symbol["for"]("react.memo_cache_sentinel")?(Z=[p.input,p.inputWOComments],b[58]=Z):Z=b[58];b[59]!==P||b[60]!==v?(V=j.jsx(c("StoriesFeedbackEditorForLexical.react"),{props:{contentEditableRef:V,editor:P,placeholder:v}}),b[59]=P,b[60]=v,b[61]=V):V=b[61];b[62]!==Q||b[63]!==V?(Z=j.jsx(c("CometComponentWithKeyCommands.react"),{commandConfigs:Q,xstyle:Z,children:V}),b[62]=Q,b[63]=V,b[64]=Z):Z=b[64];b[65]!==w||b[66]!==E?(Q={0:{className:"x6s0dn4 x78zum5 x1my54xf"},1:{className:"x6s0dn4 x78zum5 x1my54xf x1qvwoe0 xjm9jq1 x6ikm8r x10wlt62 x10l6tqk xuxw1ft x1i1rx1s"}}[!!(!w&&!E)<<0],b[65]=w,b[66]=E,b[67]=Q):Q=b[67];b[68]===Symbol["for"]("react.memo_cache_sentinel")?(V=function(a){K.current=a},b[68]=V):V=b[68];b[69]!==a?(E=j.jsx(c("StoriesFeedbackEmojiPopoverTrigger.react"),{props:{onEmojiSelect:a,onVisibilityChange:V}}),b[69]=a,b[70]=E):E=b[70];b[71]===Symbol["for"]("react.memo_cache_sentinel")?(V=h._(/*BTDS*/"Send button for story text reply"),b[71]=V):V=b[71];a=A?"disabled":"white";var $;b[72]!==a?($=j.jsx(c("FDSIcon.react"),{color:a,icon:c("StoriesSendFilled20IconSVG.react"),size:20}),b[72]=a,b[73]=$):$=b[73];b[74]!==S||b[75]!==A||b[76]!==$?(a=j.jsx(c("CometPressable.react"),{"aria-label":V,disabled:A,hideHoverOverlay:!0,onPress:S,testid:void 0,xstyle:p.sendButton,children:$}),b[74]=S,b[75]=A,b[76]=$,b[77]=a):a=b[77];b[78]!==Q||b[79]!==E||b[80]!==a?(V=j.jsxs("div",babelHelpers["extends"]({},Q,{children:[E,a]})),b[78]=Q,b[79]=E,b[80]=a,b[81]=V):V=b[81];b[82]!==X||b[83]!==Y||b[84]!==Z||b[85]!==V?(S=j.jsxs("div",babelHelpers["extends"]({},W,{onBlurCapture:X,onFocusCapture:Y,children:[Z,V]})),b[82]=X,b[83]=Y,b[84]=Z,b[85]=V,b[86]=S):S=b[86];return S}function q(){d("Lexical").$getRoot().clear()}function r(){var a=d("Lexical").$getRoot();return a.getTextContent().trim()}function s(){var a=d("Lexical").$getRoot();return a.getTextContent().trim()}function aa(){return c("cometComposerLexicalCreateEditor")()}g["default"]=a}),226);