;/*FB_PKG_DELIM*/

__d("getEmojiSize",["CometComposerStylingConstants","CometLexicalEmojiNode","getResolvedShouldShrink"],(function(a,b,c,d,e,f,g){"use strict";var h=["emojiSizeOverride","formattedTextStyling","textLength"];function a(a){var b=a.emojiSizeOverride,e=a.formattedTextStyling,f=a.textLength;a=babelHelpers.objectWithoutPropertiesLoose(a,h);if(b!=null)return b;b=f>=d("CometComposerStylingConstants").MAX_DYNAMIC_TEXT_LENGTH;f=c("getResolvedShouldShrink")(babelHelpers["extends"]({formattedTextStyling:e,textExceedsLength:b},a));return(b=e==null?void 0:e.fontSize)!=null?b:f?d("CometLexicalEmojiNode").COMPOSER_EMOJI_SIZE_SMALL:d("CometLexicalEmojiNode").COMPOSER_EMOJI_SIZE_LARGE}g["default"]=a}),98);
__d("CometComposerEmojiPluginForLexical.react",["CometLexicalEmojiNode","Lexical","LexicalText","getEmojiSize","getUpgradedCometEmojiComposerHandler","react","react-compiler-runtime","useCometStatusAreaTextData","withComposerViewStatePart"],(function(a,b,c,d,e,f,g){"use strict";var h=["editor","emojiSizeOverride"],i;b=i||d("react");var j=b.useLayoutEffect,k=b.useRef;function a(a){var b=d("react-compiler-runtime").c(35),e=a.activeAttachmentType,f=a.alwaysShrinkText,g=a.editor,h=a.emojiSizeOverride,i=a.formattedTextPreset,m=a.formattingType,n=(a=c("useCometStatusAreaTextData")(i))==null?void 0:a.formattedTextStyling;b[0]!==e||b[1]!==f||b[2]!==h||b[3]!==n||b[4]!==m?(i=h!=null?h:c("getEmojiSize")({activeAttachmentType:e,alwaysShrinkText:f,formattedTextStyling:n,formattingType:m,textLength:0}),b[0]=e,b[1]=f,b[2]=h,b[3]=n,b[4]=m,b[5]=i):i=b[5];var o=k(i);b[6]===Symbol["for"]("react.memo_cache_sentinel")?(a=new Set(),b[6]=a):a=b[6];var p=k(a);b[7]===Symbol["for"]("react.memo_cache_sentinel")?(i=function(a,b){p.current.forEach(function(c){b.update(function(){var b=d("Lexical").$getNodeByKey(c);b!==null&&b.setSize(a)})}),o.current=a},b[7]=i):i=b[7];var q=i;b[8]!==g?(a=function(){if(g!=null){var a=p.current;g.getEditorState().read(function(){d("Lexical").$nodesOfType(d("CometLexicalEmojiNode").EmojiNode).forEach(function(b){a.add(b.getKey())})});return g.registerMutationListener(d("CometLexicalEmojiNode").EmojiNode,function(b){b.forEach(function(b,c){b==="created"?a.add(c):b==="destroyed"&&a["delete"](c)})},{skipInitialization:!0})}},i=[g],b[8]=g,b[9]=a,b[10]=i):(a=b[9],i=b[10]);j(a,i);b[11]!==e||b[12]!==f||b[13]!==g||b[14]!==h||b[15]!==n||b[16]!==m?(a=function(){if(g!=null)return l({activeAttachmentType:e,alwaysShrinkText:f,editor:g,emojiSizeOverride:h,formattedTextStyling:n,formattingType:m})},i=[g,e,f,n,m,h],b[11]=e,b[12]=f,b[13]=g,b[14]=h,b[15]=n,b[16]=m,b[17]=a,b[18]=i):(a=b[17],i=b[18]);j(a,i);b[19]!==e||b[20]!==f||b[21]!==g||b[22]!==h||b[23]!==n||b[24]!==m?(a=function(){g!=null&&g.update(function(){var a=g.getEditorState().read(d("LexicalText").$rootTextContent).length;a=c("getEmojiSize")({activeAttachmentType:e,alwaysShrinkText:f,emojiSizeOverride:h,formattedTextStyling:n,formattingType:m,textLength:a});o.current!==a&&q(a,g)})},i=[g,e,f,n,m,h],b[19]=e,b[20]=f,b[21]=g,b[22]=h,b[23]=n,b[24]=m,b[25]=a,b[26]=i):(a=b[25],i=b[26]);j(a,i);b[27]!==e||b[28]!==f||b[29]!==g||b[30]!==h||b[31]!==n||b[32]!==m?(a=function(){if(g!=null)return g.registerTextContentListener(function(a){a=c("getEmojiSize")({activeAttachmentType:e,alwaysShrinkText:f,emojiSizeOverride:h,formattedTextStyling:n,formattingType:m,textLength:a.length});o.current!==a&&q(a,g)})},i=[g,e,f,n,m,h],b[27]=e,b[28]=f,b[29]=g,b[30]=h,b[31]=n,b[32]=m,b[33]=a,b[34]=i):(a=b[33],i=b[34]);j(a,i)}function l(a){var b=a.editor,d=a.emojiSizeOverride,e=babelHelpers.objectWithoutPropertiesLoose(a,h),f=function(){},g=b.registerTextContentListener(function(a){a=c("getEmojiSize")(babelHelpers["extends"]({emojiSizeOverride:d,textLength:a.length},e));f();f=c("getUpgradedCometEmojiComposerHandler")(b,a)});return function(){f(),g()}}e=c("withComposerViewStatePart")(a,function(a){var b;return{activeAttachmentType:(b=a.attachmentArea)==null?void 0:b.activeAttachmentType,editor:a.lexicalEditor,emojiSizeOverride:a.emojiSizeOverride,formattedTextPreset:(b=a.formattedText)==null?void 0:b.currentFormattedTextPreset,formattingType:a.formattingType}});g["default"]=e}),98);
__d("CometComposerHashtagPluginForLexical.react",["react","react-compiler-runtime","requireDeferred","useDeferredModuleOnReady","withComposerViewStatePart"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect,j=c("requireDeferred")("getUpgradedCometHashtagComposerHandler").__setRef("CometComposerHashtagPluginForLexical.react");function a(a){var b=d("react-compiler-runtime").c(4),e=a.editor,f=c("useDeferredModuleOnReady")(j),g;b[0]!==e||b[1]!==f?(a=function(){if(e!=null&&f!=null)return f(e)},g=[e,f],b[0]=e,b[1]=f,b[2]=a,b[3]=g):(a=b[2],g=b[3]);i(a,g)}b=c("withComposerViewStatePart")(a,function(a){return{editor:a.lexicalEditor}});g["default"]=b}),98);
__d("FeedComposerCometHashtagTypeheadListItem.react",["CometSearchMentionsBaseViewItem.react","FDSTextPairing.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["entry"],i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(11),e,f;b[0]!==a?(e=a.entry,f=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f):(e=b[1],f=b[2]);a=e.label;var g=e.rawData.subtext,i;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(i={className:"x1y1aw1k xf159sx xwib8y2 xmzvs34 x168biu4"},b[3]=i):i=b[3];b[4]!==a||b[5]!==g?(i=j.jsx("div",babelHelpers["extends"]({},i,{children:j.jsx(c("FDSTextPairing.react"),{headline:a,level:4,meta:g})})),b[4]=a,b[5]=g,b[6]=i):i=b[6];b[7]!==e||b[8]!==f||b[9]!==i?(a=j.jsx(c("CometSearchMentionsBaseViewItem.react"),babelHelpers["extends"]({},f,{entry:e,children:i})),b[7]=e,b[8]=f,b[9]=i,b[10]=a):a=b[10];return a}g["default"]=a}),98);
__d("cometHashtagsLexicalCreateNodeStrategy",["CometLexicalGenericEntityNode","cometBaseMentionsLexicalCreateNodeStrategy","cometMentionsDataEntryText"],(function(a,b,c,d,e,f,g){"use strict";a=c("cometBaseMentionsLexicalCreateNodeStrategy")(function(a){return d("CometLexicalGenericEntityNode").$createCometLexicalGenericEntityNode({id:a.key,text:c("cometMentionsDataEntryText")(a),type:"Hashtag"})});b=a;g["default"]=b}),98);
__d("getHashtagRegexForTypeahead",["getHashtagRegexString"],(function(a,b,c,d,e,f,g){function a(){return new RegExp(c("getHashtagRegexString")()+"$","i")}g["default"]=a}),98);
__d("createCometHashtagMatchStrategy",["getHashtagRegexForTypeahead"],(function(a,b,c,d,e,f,g){"use strict";var h=["#","\\uFF03"];function a(a){var b=a.minMatchLength;return{findMentionableString:function(a){if(h.includes(a))return{leadOffset:0,matchingString:a,replaceableString:a};var d=new RegExp(c("getHashtagRegexForTypeahead")());d=d.exec(a);if(d!==null){a=d[1].length;d=d[0].substring(a);if(d!=null&&d.length>=b)return{leadOffset:a,matchingString:d,replaceableString:d}}return null},name:"HashtagMatchStrategy("+b.toString()+")"}}g["default"]=a}),98);
__d("createFeedComposerCometHashtagDataEntry_data.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"context"},{kind:"RootArgument",name:"scopeID"}],kind:"Fragment",metadata:{mask:!1},name:"createFeedComposerCometHashtagDataEntry_data",selections:[{alias:null,args:null,concreteType:"Hashtag",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:[{kind:"Variable",name:"callsite",variableName:"context"},{kind:"Variable",name:"scope_id",variableName:"scopeID"}],kind:"ScalarField",name:"typeahead_snippets",storageKey:null}],storageKey:null}],type:"TypeaheadHashtagResultV2",abstractKey:null};e.exports=a}),null);
__d("createFeedComposerCometHashtagDataEntry",["createFeedComposerCometHashtagDataEntry_data.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;h!==void 0?h:h=b("createFeedComposerCometHashtagDataEntry_data.graphql");function a(a){a=a==null?void 0:a.node;if(a==null)return null;var b=a.id,c=a.name;a=a.typeahead_snippets;a=a!=null&&a.length>=1?a[0]:null;return b==null||c==null?null:{key:b,label:c,rawData:{id:b,name:c,subtext:a},type:"entry"}}g["default"]=a}),98);
__d("useFeedComposerCometHashtagTypeaheadDataSourceQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="23922566980694168"}),null);
__d("useFeedComposerCometHashtagTypeaheadDataSourceQuery.graphql",["useFeedComposerCometHashtagTypeaheadDataSourceQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"context"},c={defaultValue:!1,kind:"LocalArgument",name:"includeImageUrls"},d={defaultValue:!1,kind:"LocalArgument",name:"includeMetatext"},e={defaultValue:null,kind:"LocalArgument",name:"limit"},f={defaultValue:null,kind:"LocalArgument",name:"query"},g={defaultValue:null,kind:"LocalArgument",name:"scopeID"},h={defaultValue:null,kind:"LocalArgument",name:"sessionID"},i={kind:"Variable",name:"scope_id",variableName:"scopeID"};i=[{alias:null,args:[{fields:[{kind:"Variable",name:"context",variableName:"context"},{kind:"Variable",name:"include_image_urls",variableName:"includeImageUrls"},{kind:"Variable",name:"include_metatext",variableName:"includeMetatext"},{kind:"Variable",name:"limit",variableName:"limit"},{kind:"Variable",name:"query",variableName:"query"},i,{kind:"Variable",name:"session_id",variableName:"sessionID"}],kind:"ObjectValue",name:"argument"}],concreteType:"TypeaheadHashtagResultV2",kind:"LinkedField",name:"hashtag_typeahead_v2",plural:!0,selections:[{alias:null,args:null,concreteType:"Hashtag",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:[{kind:"Variable",name:"callsite",variableName:"context"},i],kind:"ScalarField",name:"typeahead_snippets",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[a,c,d,e,f,g,h],kind:"Fragment",metadata:null,name:"useFeedComposerCometHashtagTypeaheadDataSourceQuery",selections:i,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[f,h,e,a,c,d,g],kind:"Operation",name:"useFeedComposerCometHashtagTypeaheadDataSourceQuery",selections:i},params:{id:b("useFeedComposerCometHashtagTypeaheadDataSourceQuery_facebookRelayOperation"),metadata:{},name:"useFeedComposerCometHashtagTypeaheadDataSourceQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("useFeedComposerCometHashtagTypeaheadDataSource",["createFeedComposerCometHashtagDataEntry","react-compiler-runtime","useCometTypeaheadGraphQLDataSource","useFeedComposerCometHashtagTypeaheadDataSourceQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("useFeedComposerCometHashtagTypeaheadDataSourceQuery.graphql");function a(a){var b=d("react-compiler-runtime").c(8),e=a.context,f=a.includeMetatext,g=a.limit,h=a.scopeID;b[0]!==e||b[1]!==f||b[2]!==g||b[3]!==h?(a=function(a){a=a.query;return{context:e,includeMetatext:f,limit:g,query:a,scopeID:h,sessionID:""}},b[0]=e,b[1]=f,b[2]=g,b[3]=h,b[4]=a):a=b[4];var k;b[5]!==g||b[6]!==a?(k={gqlQuery:i,limit:g,normalize:j,queryVariablesBuilderFunction:a},b[5]=g,b[6]=a,b[7]=k):k=b[7];return c("useCometTypeaheadGraphQLDataSource")(k)}function j(a){a=a==null?void 0:a.hashtag_typeahead_v2;return a==null?[]:a.map(function(a){if(a==null)return;return c("createFeedComposerCometHashtagDataEntry")(a)}).filter(Boolean)}g["default"]=a}),98);
__d("useFeedComposerCometHashtagsDataSourceResolverConfig",["createCometHashtagMatchStrategy","react","react-compiler-runtime","useCometMentionsDataSourceResolverConfig","useCometTypeaheadCompositeDataSource","useFeedComposerCometHashtagTypeaheadDataSource"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useMemo;function a(a){var b=d("react-compiler-runtime").c(14),e=a.context,f=a.includeMetatext,g=a.limit,h=a.payloadDecorators;a=a.scopeID;var i;b[0]!==e||b[1]!==f||b[2]!==g||b[3]!==a?(i={context:e,includeMetatext:f,limit:g,scopeID:a},b[0]=e,b[1]=f,b[2]=g,b[3]=a,b[4]=i):i=b[4];e=c("useFeedComposerCometHashtagTypeaheadDataSource")(i);b[5]!==h?(f=h!=null?h:[],b[5]=h,b[6]=f):f=b[6];b[7]!==g||b[8]!==e||b[9]!==f?(a={limit:g,networkDataSource:e,payloadDecorators:f},b[7]=g,b[8]=e,b[9]=f,b[10]=a):a=b[10];i=c("useCometTypeaheadCompositeDataSource")(a);b[11]===Symbol["for"]("react.memo_cache_sentinel")?(h=c("createCometHashtagMatchStrategy")({minMatchLength:0}),b[11]=h):h=b[11];b[12]!==i?(g=[{dataSource:i,matchStrategy:h}],b[12]=i,b[13]=g):g=b[13];e=g;f=e;return c("useCometMentionsDataSourceResolverConfig")(f,!0)}g["default"]=a}),98);
__d("CometComposerHashtagTypeaheadPluginForLexical.react",["CometMentionsForLexical.react","CometMentionsLayoutStrategy.react","FeedComposerCometHashtagTypeheadListItem.react","cometHashtagsLexicalCreateNodeStrategy","cr:2971","react","react-compiler-runtime","useCometTypeaheadViewListStrategy","useFeedComposerCometHashtagsDataSourceResolverConfig","withComposerViewStatePart"],(function(a,b,c,d,e,f,g){"use strict";var h=["editor"],i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(6),c,e;b[0]!==a?(c=a.editor,e=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=c,b[2]=e):(c=b[1],e=b[2]);if(c==null)return null;b[3]!==c||b[4]!==e?(a=j.jsx(k,babelHelpers["extends"]({},e,{editor:c})),b[3]=c,b[4]=e,b[5]=a):a=b[5];return a}function k(a){var e=d("react-compiler-runtime").c(9),f=a.editor;a=a.groupID;var g=a==null?"MAIN_COMPOSER":"GROUP_COMPOSER";a=a;var h;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(h=b("cr:2971")!=null?[b("cr:2971")({limit:1})]:void 0,e[0]=h):h=e[0];e[1]!==g||e[2]!==a?(h={context:g,includeMetatext:!0,limit:6,payloadDecorators:h,scopeID:a},e[1]=g,e[2]=a,e[3]=h):h=e[3];g=c("useFeedComposerCometHashtagsDataSourceResolverConfig")(h);e[4]===Symbol["for"]("react.memo_cache_sentinel")?(a={viewItemStrategyRenderer:c("FeedComposerCometHashtagTypeheadListItem.react")},e[4]=a):a=e[4];h=c("useCometTypeaheadViewListStrategy")(a);e[5]!==g||e[6]!==f||e[7]!==h?(a=j.jsx(c("CometMentionsForLexical.react"),{createNodeStrategy:c("cometHashtagsLexicalCreateNodeStrategy"),dataSourceResolverConfig:g,editor:f,layoutStrategyRenderer:c("CometMentionsLayoutStrategy.react"),viewStrategyRenderer:h}),e[5]=g,e[6]=f,e[7]=h,e[8]=a):a=e[8];return a}e=c("withComposerViewStatePart")(a,function(a){return{editor:a.lexicalEditor}});g["default"]=e}),98);
__d("CometComposerIsDirtyPluginForLexical.react",["LexicalText","composerLexicalEditorViewStateReducer","react","react-compiler-runtime","useComposerViewStateDispatcher","useComposerViewStateReducer","withComposerViewStatePart"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect;function a(a){var b=d("react-compiler-runtime").c(5),e=a.editor,f=a.lexicalIsDirty;c("useComposerViewStateReducer")(c("composerLexicalEditorViewStateReducer"));var g=c("useComposerViewStateDispatcher")(),h;b[0]!==g||b[1]!==e||b[2]!==f?(a=function(){if(e!=null){var a=e.getEditorState().read(d("LexicalText").$rootTextContent).length>0;a===!0&&a!==f&&g({isDirty:!0,type:"SET_LEXICAL_DIRTY_STATE"});return e.registerTextContentListener(function(b){b=b.length>0;b!==a&&g({isDirty:b,type:"SET_LEXICAL_DIRTY_STATE"})})}},h=[g,e,f],b[0]=g,b[1]=e,b[2]=f,b[3]=a,b[4]=h):(a=b[3],h=b[4]);i(a,h)}b=c("withComposerViewStatePart")(a,function(a){return{editor:a.lexicalEditor,lexicalIsDirty:a.lexicalEditorIsDirty}});g["default"]=b}),98);
__d("URLMatchUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=/^(([\w-]+\.)+(xn--[\w-]+|\w+)|\[([\da-f]{0,4}:)*(?:[\da-f]{1,4}|(?:(?:\d{1,3}\.){3}\d{1,3}))\])(:[0-9]+)?([/\?].*)?$/;return a.match(b)!==null}function b(a){return a.trim().replace(/(^\w+:|^)\/\//,"").replace(/^www\./,"").replace(/\/*$/,"").toLowerCase()}f.isURL=a;f.canonicalizeURL=b}),66);
__d("composerLinkAttachmentChecker",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c,d,e=a==null||(c=a.attachmentArea)==null?void 0:c.activeAttachmentType,f=b==null||(d=b.attachmentArea)==null?void 0:d.activeAttachmentType;a=a==null?void 0:a.linkAttachment;b=b==null?void 0:b.linkAttachment;if(e!=null&&f==null||a!=null&&b==null)return"DELETED";else if((f==="LINK"||f==="SHARE")&&(a==null?void 0:a.url)!==(b==null?void 0:b.url))return"UPDATED";return"UNCHANGED"}f["default"]=a}),66);
__d("composerLinkAttachmentReducer",["composerAttachmentAreaReducer","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var c;if(((c=a.attachmentArea)==null?void 0:c.activeAttachmentType)==="FORMATTED_TEXT"||((c=a.attachmentArea)==null?void 0:c.activeAttachmentType)==="SHARE")return a;var d=b.url;c=[].concat(((b=(c=a.linkAttachment)==null?void 0:c.urlStack)!=null?b:[]).filter(function(a){return!a.startsWith(d)&&!d.startsWith(a)}),[d]);var e=(b=a.linkAttachment)==null?void 0:b.selectedLinkPreview;e!=null&&(c=c.filter(function(a){return a!==e}).concat(e));return babelHelpers["extends"]({},a,{linkAttachment:babelHelpers["extends"]({},a.linkAttachment,{url:c[c.length-1],urlStack:c})})}function i(a,b){var c,d;c=(c=(c=a.linkAttachment)==null?void 0:c.urlStack)!=null?c:[];var e=c[c.length-1];d=((d=(d=a.linkAttachment)==null?void 0:d.removedAttachmentPreviewUrls)!=null?d:new Set()).add(e);if(c.length<=1){b.onRemovedLast(!0);return babelHelpers["extends"]({},a,{attachmentArea:{activeAttachmentType:void 0,previousAttachmentType:"LINK"},linkAttachment:{isLinkAttachmentEnabled:(e=a.linkAttachment)==null?void 0:e.isLinkAttachmentEnabled,removedAttachmentPreviewUrls:d}})}e=c.slice(0,-1);c=e[e.length-1];b.onRemovedLast(!1);return babelHelpers["extends"]({},a,{linkAttachment:babelHelpers["extends"]({},a.linkAttachment,{removedAttachmentPreviewUrls:d,selectedLinkPreview:void 0,url:c,urlStack:e})})}function j(a){return babelHelpers["extends"]({},a,{attachmentArea:{activeAttachmentType:void 0,previousAttachmentType:"LINK"},linkAttachment:{isLinkAttachmentEnabled:(a=a.linkAttachment)==null?void 0:a.isLinkAttachmentEnabled}})}function k(a,b){var c;if(a.useOriginalContentLinkAttachment===!0)return babelHelpers["extends"]({},a,{originalContentLinkAttachment:babelHelpers["extends"]({},a.originalContentLinkAttachment,{linkPreview:{share_scrape_data:b.shareScrapeData},url:b.url})});else if(((c=a.linkAttachment)==null?void 0:c.url)!==b.url)return a;return babelHelpers["extends"]({},a,{linkAttachment:babelHelpers["extends"]({},a.linkAttachment,{linkPreview:{share_scrape_data:b.shareScrapeData},url:b.url})})}function l(a,b){return babelHelpers["extends"]({},a,{useOriginalContentLinkAttachment:b.useOriginalContentLinkAttachment})}function m(a,b){var c;c=((c=(c=a.linkAttachment)==null?void 0:c.urlStack)!=null?c:[]).filter(function(a){return a!==b.selectedLinkPreview}).concat(b.selectedLinkPreview);return babelHelpers["extends"]({},a,{linkAttachment:babelHelpers["extends"]({},a.linkAttachment,{selectedLinkPreview:b.selectedLinkPreview,url:b.selectedLinkPreview,urlStack:c})})}function n(a,b){var c,d=a.linkAttachment;c=(c=d==null?void 0:d.customAttachments)!=null?c:[];c=c[0].throwback_card;return d==null||c==null?a:babelHelpers["extends"]({},a,{linkAttachment:babelHelpers["extends"]({},d,{customAttachments:[{throwback_card:babelHelpers["extends"]({},c,{media_ids:b.mediaIds})}]})})}function a(a,b){switch(b.type){case"ADD_LINK_URL":return h(a,b);case"REMOVE_LINK_URL":return i(a,b);case"REMOVE_ATTACHMENT_TYPE":var e=d("composerAttachmentAreaReducer").getCanAlterAttachmentData(b,"LINK",a);if(e)return i(a,{onRemovedLast:c("emptyFunction"),type:"REMOVE_LINK_URL"});else return a;case"REMOVE_ALL_LINKS":return j(a);case"SET_LINK_PREVIEW":return k(a,b);case"SET_USE_ORIGINAL_CONTENT":return l(a,b);case"SET_SELECTED_LINK_PREVIEW":return m(a,b);case"SET_THROWBACK_MEDIA":return n(a,b)}return a}g["default"]=a}),98);
__d("CometComposerLinksPluginForLexical.react",["CometDebounce","ConstUriUtils","Lexical","LexicalLink","LexicalUtils","Promise","URLMatchUtils","URLMatcher","composerLinkAttachmentChecker","composerLinkAttachmentReducer","gkx","react","useComposerViewStateDispatcher","useComposerViewStateReducer","withComposerViewStatePart"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=i||d("react");var j=e.useCallback,k=e.useEffect,l=/[,;\s]/;function m(a){return l.test(a)}function n(a){return a[a.length-1]}function o(a){return c("URLMatcher").match(a)}function p(a){if(c("gkx")("8926"))return d("ConstUriUtils").isValidUri(a);else return d("URLMatchUtils").isURL(d("URLMatchUtils").canonicalizeURL(a))&&d("ConstUriUtils").isValidUri(a)}function q(a,b){var c=b,d="";while(c>0&&!m(a[c-1]))d=a[c-1]+d,c--;b=b;while(b<a.length&&!m(a[b]))d+=a[b],b++;return{text:d,textOffset:c}}function r(a,b){b=a.getKey();var c=a.getTextContent(),e=d("Lexical").$getSelection(),f=d("Lexical").$getEditor().getEditorState();f=f.read(function(){var b=d("Lexical").$getNodeByKey(a.getKey()),c=null;d("Lexical").$isTextNode(b)&&b.isSimpleText()&&(c=b.getTextContent());return[c,d("Lexical").$getSelection()]});var g=f[0];f=f[1];if(g===null||!d("Lexical").$isRangeSelection(f)||!f.isCollapsed()||f.anchor.key!==b||!d("Lexical").$isRangeSelection(e)||!e.isCollapsed()||e.anchor.key!==b)return null;b=c.length;var h=g.length;e=e.anchor.offset;f=f.anchor.offset;var i=e===f+1&&b===h+1&&c.substring(0,e-1)+c.substring(e)===g,j=e+1===f&&b+1===h&&c===g.substring(0,e)+g.substring(e+1);f=e===f&&b+1===h&&c===g.substring(0,e)+g.substring(0,e+1);if(i||j||f)return q(c,e);else return null}function s(a){return d("Lexical").$getEditor().getEditorState().read(function(){var b=d("Lexical").$getNodeByKey(a);return d("Lexical").$isTextNode(b)&&b.isSimpleText()?b.getTextContent():null})}function t(a,b){var c=a.getTextContent();b=(b=b==null?void 0:b.text)!=null?b:s(a.getKey());if(b===null)return null;a=c.length;var d=b.length,e=0;while(e<a&&e<d&&c[e]===b[e])e++;a=a;d=d;while(a>e&&d>e&&c[a-1]===b[a-1])a--,d--;a++;d=c.substring(e,a);while(e-1>=0&&!m(c[e-1]))e--,d=c[e]+d;while(a+1<c.length&&!m(c[a+1]))a++,d+=c[a+1];return{text:d,textOffset:e}}function u(a,b){return a.getTextContent()===((b=b==null?void 0:b.text)!=null?b:s(a.getKey()))?{text:"",textOffset:0}:null}function v(a,b,d,e,f){var g=a.getTextContent();g=g;var h=0;if(c("gkx")("8927")&&!e){e=(e=(e=u(a,b))!=null?e:r(a,b))!=null?e:t(a,b);if(e!==null){g=e.text;h=e.textOffset;if(g.split(l).some(function(a){return a.length>100})){b=h+g.length;e={textOffsetEnd:b,textOffsetStart:h};b=d.get(a.getKey());b!=null&&(e.textOffsetStart=Math.min(e.textOffsetStart,b.textOffsetStart),e.textOffsetEnd=Math.max(e.textOffsetEnd,b.textOffsetEnd));d.set(a.getKey(),e);return}}}w(a,g,h,f)}function w(a,b,c,e){var f=a.getTextContent(),g=f.length;b=b;var h=0;c=c;var i=a,j=0,k;while((k=o(b))!=null&&k!=null){c+=b.indexOf(k);var l=h+c,q=k.length,r=void 0;if(l>0)r=m(f[l-1]);else{var s=a.getPreviousSibling();d("Lexical").$isElementNode(s)&&(s=s.getLastDescendant());s===null?r=!0:r=d("Lexical").$isLineBreakNode(s)||d("Lexical").$isTextNode(s)&&m(n(s.getTextContent()))}if(l+q<g)s=m(f[l+q]);else{l=a.getNextSibling();d("Lexical").$isElementNode(l)&&(l=l.getFirstDescendant());if(l===null)s=!0;else{s=d("Lexical").$isLineBreakNode(l)||d("Lexical").$isTextNode(l)&&m((l=l.getTextContent()[0])!=null?l:"")}}if(r&&s&&p(k)){l=void 0;if(c===0){r=i.splitText(q);l=r[0];i=r[1]}else{s=i.splitText(c+j,c+q+j);l=s[1];i=s[2]}r=d("LexicalLink").$createAutoLinkNode(k);r.append(d("Lexical").$createTextNode(k));l.replace(r);e(r);j=0}else j=c+q;s=c+q;b=b.substring(s);h+=s;c=0}}function x(a){var b=a.getChildren(),e=b.length;for(var f=0;f<e;f++){var g=b[f];if(!d("Lexical").$isTextNode(g)||!g.isSimpleText()){z(a);return}}g=a.getTextContent();b=c("URLMatcher").match;if(b(g)!==g||!p(g)){z(a);return}e=a.getPreviousSibling();d("Lexical").$isElementNode(e)&&(e=e.getLastDescendant());if(e!==null&&!(d("Lexical").$isLineBreakNode(e)||d("Lexical").$isTextNode(e)&&m(n(e.getTextContent())))){z(a);return}f=a.getNextSibling();d("Lexical").$isElementNode(f)&&(f=f.getFirstDescendant());if(f!==null&&!(d("Lexical").$isLineBreakNode(f)||d("Lexical").$isTextNode(f)&&m(f.getTextContent()[0]))){z(a);return}b=a.getURL();b!==g&&a.setURL(g)}function y(a){var b=a.getPreviousSibling(),c=a.getNextSibling();a=a.getTextContent();d("LexicalLink").$isAutoLinkNode(b)&&!d("Lexical").$isLineBreakNode(b)&&!m(a[0])&&z(b);d("LexicalLink").$isAutoLinkNode(c)&&!d("Lexical").$isLineBreakNode(c)&&!m(n(a))&&z(c)}function z(a){var b=a.getChildren(),c=b.length;for(c=c-1;c>=0;c--)a.insertAfter(b[c]);a.remove();return b.map(function(a){return a.getLatest()})}function a(a){var e=a.editor,f=a.isLinkAttachmentEnabled,g=a.removedAttachmentPreviewUrls;c("useComposerViewStateReducer")(c("composerLinkAttachmentReducer"),c("composerLinkAttachmentChecker"));var i=c("useComposerViewStateDispatcher")(),l=j(function(a,c){if(g!=null&&g.has(a)&&c!==!0)return;i({type:"ADD_LINK_URL",url:a});(f||c===!0)&&i({attachmentType:"LINK",onRemove:function(a){return new(h||(h=b("Promise")))(function(b){a({onRemovedLast:b,type:"REMOVE_LINK_URL"})})},type:"ACTIVATE_ATTACHMENT_TYPE"})},[i,f,g]);k(function(){if(e!=null){var a=function(a){var c=a.getParentOrThrow();if(d("LexicalLink").$isAutoLinkNode(c)){x(c);c=c.getLatest();j(c)}else a.isSimpleText()&&v(a,f,b,h(),j),y(a)},b=new Map(),f=null,g=e.getEditorState(),h=function(){return e.getEditorState()===g},i=c("CometDebounce")(function(a,b){l(a.__url,b)},{wait:1e3}),j=function(a){return c("gkx")("8927")?i(a,!1):l(a.__url,!1)},k=function(a){return c("gkx")("8927")?i(a,!0):l(a.__url,!0)},m=c("CometDebounce")(function(){var a=function(){var a=f[0];c=f[1];var b=c.textOffsetEnd,g=c.textOffsetStart;e.update(function(){var c=d("Lexical").$getNodeByKey(a);if(d("Lexical").$isTextNode(c)&&c.isSimpleText()){var e=c.getTextContent().substring(g,b);w(c,e,g,j)}})},c;for(var f of b.entries())a()},{wait:200});return d("LexicalUtils").mergeRegister(e.registerUpdateListener(function(){m()}),e.registerMutationListener(d("LexicalLink").AutoLinkNode,function(a){var b=new WeakSet();e.getEditorState().read(function(){var c=function(){var a=f[0],c=f[1],g=e.getElementByKey(a);(c==="created"||c==="updated")&&g!==null&&!b.has(g)&&(b.add(g),g.addEventListener("click",function(b){e.getEditorState().read(function(){var b=d("Lexical").$getNodeByKey(a);b!=null&&k(b)})}))};for(var f of a)c()})},{skipInitialization:!0}),e.registerNodeTransform(d("Lexical").RootNode,function(){if(c("gkx")("8927")){var b=e._compositionKey;if(b!==null){if(f===null)f={key:b,text:s(b)};else if(f.key!==b){var g=d("Lexical").$getNodeByKey(f.key);d("Lexical").$isTextNode(g)&&g.isAttached()&&a(g);f={key:b,text:s(b)}}}else if(f!==null){g=d("Lexical").$getNodeByKey(f.key);d("Lexical").$isTextNode(g)&&g.isAttached()&&a(g);f=null}}}),e.registerNodeTransform(d("Lexical").TextNode,function(b){a(b)}),e.registerNodeTransform(d("LexicalLink").AutoLinkNode,function(a){x(a);a=a.getLatest();j(a)}),function(){i.reset(),m.reset()})}},[l,e,f])}f=c("withComposerViewStatePart")(a,function(a){var b;return{editor:a.lexicalEditor,isLinkAttachmentEnabled:(b=(b=a.linkAttachment)==null?void 0:b.isLinkAttachmentEnabled)!=null?b:!0,removedAttachmentPreviewUrls:(b=a.linkAttachment)==null?void 0:b.removedAttachmentPreviewUrls}});g.segment=q;g.$handleLinkCreationOnKeyboardInput=r;g.$getPreviousNodeTextForSimpleTextNode=s;g.$handleLinkCreationOnSingleDiff=t;g.$handleLinkCreationOnNoDiff=u;g.CometComposerLinksPlugin=f}),98);
__d("CometComposerLinksPluginForLexicalWithDefaultExport.react",["CometComposerLinksPluginForLexical.react"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=d("CometComposerLinksPluginForLexical.react").CometComposerLinksPlugin}),98);
__d("getInitialComposerLinkData",["Lexical","LexicalLink"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a!=null){var b=new Map();a.getEditorState().read(function(){return d("Lexical").$nodesOfType(d("LexicalLink").AutoLinkNode).forEach(function(a){return b.set(a.getKey(),a.getTextContent())})});return b}return new Map()}g["default"]=a}),98);
__d("handlePendingMisinformationOnComposerSubmit",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){for(var d=0;d<a.length;d++){var e=b[a[d]];if(e==null)continue;e=e.status;switch(e){case"ACCEPTED":case"CLEAN":case"FAILED":break;case"DECISION_DEFERRED":var f=[].concat(c.current);c.current.length=0;f.forEach(function(a){a=a.onHalt;a()});return;case"DIRTY_AWAITING_DECISION":case"FETCHING":return;default:return e}}f=[].concat(c.current);c.current.length=0;f.forEach(function(a){a=a.onContinue;a()})}f["default"]=a}),66);
__d("hasNoLinksToAnalyze",["Lexical","LexicalLink"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){var f;a=Array.from(a);if(c!=null){var g=new Set([]);c==null||c.getEditorState().read(function(){return d("Lexical").$nodesOfType(d("LexicalLink").AutoLinkNode).forEach(function(a){return g.add(a.getURL())})});e!=null&&g.add(e);f=a.filter(function(a){return g.has(a)})}return(f!=null?f:a).every(function(a){a=b[a];if(a==null)return!0;a=a.status;switch(a){case"ACCEPTED":case"CLEAN":case"FAILED":return!0;case"DECISION_DEFERRED":case"DIRTY_AWAITING_DECISION":case"FETCHING":return!1;default:return a}})}g["default"]=a}),98);
__d("onCloseConfirmationDialog",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){switch(c){case"ACCEPTED":a({__type:"ACCEPT_URL",url:b});break;case"NO_DECISION":a({__type:"ENTER_COOLDOWN_PERIOD"});break;default:return c}}f["default"]=a}),66);
__d("maybeTriggerMisinformationDialog",["onCloseConfirmationDialog"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var d=a.composedURLs,e=a.composerPhase,f=a.composerType,g=a.dialogIsOpen,h=a.dispatch,i=a.misinformationRecords,j=b.onCloseDialog;a=b.onTriggerDialog;b=b.openConfirmationDialog;if(g.current===!0)return;var k=Array.from(d).find(function(a){return((a=i[a])==null?void 0:a.status)==="DIRTY_AWAITING_DECISION"});if(k!=null){g=i[k];if(g==null)return;d=g.confirmationRenderer;if(d==null)return;a();b({composerPhase:e,composerType:f,confirmationRenderer:d},function(a){j(),c("onCloseConfirmationDialog")(h,k,a)})}}g["default"]=a}),98);
__d("cometMisinformationLinkDetectorPluginInternalStateReducerQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="29607129502264490"}),null);
__d("cometMisinformationLinkDetectorPluginInternalStateReducerQuery.graphql",["cometMisinformationLinkDetectorPluginInternalStateReducerQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"},{defaultValue:null,kind:"LocalArgument",name:"scale"}],c=[{kind:"Variable",name:"params",variableName:"input"}],d={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},e=[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],f={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},g=[f];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"cometMisinformationLinkDetectorPluginInternalStateReducerQuery",selections:[{alias:null,args:c,concreteType:"LinkPreviewRoot",kind:"LinkedField",name:"link_preview",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"composer_post_confirmation_renderer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometMisinformationLinkComposerConfirmationDialog_confirmationRenderer"}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"cometMisinformationLinkDetectorPluginInternalStateReducerQuery",selections:[{alias:null,args:c,concreteType:"LinkPreviewRoot",kind:"LinkedField",name:"link_preview",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"composer_post_confirmation_renderer",plural:!1,selections:[d,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"cid",storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title_for_comet",plural:!1,selections:e,storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"description_for_comet",plural:!1,selections:e,storageKey:null},{alias:null,args:null,concreteType:"ManualFactCheck",kind:"LinkedField",name:"fact_checks",plural:!0,selections:[f,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title",plural:!1,selections:e,storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"subtitle",plural:!1,selections:e,storageKey:null},{alias:null,args:null,concreteType:"FactCheckProvider",kind:"LinkedField",name:"provider",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},f],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"external_uri",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"attachment_thumbnail",plural:!1,selections:[d,{alias:null,args:[{kind:"Literal",name:"height",value:60},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:60}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null},{kind:"InlineFragment",selections:g,type:"Node",abstractKey:"__isNode"},{kind:"InlineFragment",selections:g,type:"DynamicFeedAdAttachmentMedia",abstractKey:null},{kind:"InlineFragment",selections:g,type:"GenericAttachmentMedia",abstractKey:null},{kind:"InlineFragment",selections:g,type:"MontageImage",abstractKey:null},{kind:"InlineFragment",selections:g,type:"MontageVideo",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_show_page_admin_warning",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_show_rating_badge",storageKey:null}],type:"MisinformationComposerPostConfirmationRenderer",abstractKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("cometMisinformationLinkDetectorPluginInternalStateReducerQuery_facebookRelayOperation"),metadata:{},name:"cometMisinformationLinkDetectorPluginInternalStateReducerQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("cometMisinformationLinkDetectorPluginInternalStateReducer",["CometRelay","FBLogger","WebPixelRatio","cometMisinformationLinkDetectorPluginInternalStateReducerQuery.graphql","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("cometMisinformationLinkDetectorPluginInternalStateReducerQuery.graphql");function j(a,b){return l(a,b,"ADD")}function k(a,b){return l(a,b,"REMOVE")}function l(a,b,c){if(a.composedURLs.has(b)===(c==="ADD"))return a;var d=new Set(a.composedURLs);c==="ADD"?d.add(b):d["delete"](b);return babelHelpers["extends"]({},a,{composedURLs:d})}function m(a,b,d){var e=a.misinformationRecords[b];if(e==null){c("FBLogger")("misinformation").mustfix("Tried to update a misinformation record for a URL that was not being tracked.");return a}var f=Object.entries(d).find(function(a){var b=a[0];a=a[1];return e[b]!==a});return f===!1?a:babelHelpers["extends"]({},a,{misinformationRecords:babelHelpers["extends"]({},a.misinformationRecords,(f={},f[b]=babelHelpers["extends"]({},e,d),f))})}function a(a,b){switch(b.__type){case"ACCEPT_URL":return m(a,b.url,{status:"ACCEPTED"});case"ENTER_COOLDOWN_PERIOD":return Object.keys(a.misinformationRecords).reduce(function(b,c){var d;d=(d=b.misinformationRecords[c])==null?void 0:d.status;if(d==null)return b;switch(d){case"ACCEPTED":case"CLEAN":case"DECISION_DEFERRED":case"FAILED":case"FETCHING":return a;case"DIRTY_AWAITING_DECISION":return m(b,c,{status:"DECISION_DEFERRED"});default:return d}},a);case"EXIT_COOLDOWN_PERIOD":return Object.keys(a.misinformationRecords).reduce(function(b,c){var d;d=(d=b.misinformationRecords[c])==null?void 0:d.status;if(d==null)return b;switch(d){case"ACCEPTED":case"CLEAN":case"DIRTY_AWAITING_DECISION":case"FAILED":case"FETCHING":return a;case"DECISION_DEFERRED":return m(b,c,{status:"DIRTY_AWAITING_DECISION"});default:return d}},a);case"MARK_URL_FAILED_DETECTION":return m(a,b.url,{status:"FAILED"});case"SET_DETECTION_RESULT":return m(a,b.url,{confirmationRenderer:b.confirmationRenderer,status:b.confirmationRenderer!=null?"DIRTY_AWAITING_DECISION":"CLEAN"});case"TRACK_COMPOSED_URL":if(a.misinformationRecords[b.url]!=null)return j(a,b.url);var c,e,f={confirmationRenderer:void 0,dispose:function(){c&&(c.unsubscribe(),c=null),e&&(e.dispose(),e=null)},status:"FETCHING"},g={input:{url:b.url},scale:d("WebPixelRatio").get()},h=d("relay-runtime").getRequest(i);h=d("relay-runtime").createOperationDescriptor(h,g);e=a.environment.retain(h);var l=!0;c=d("CometRelay").fetchQuery(a.environment,i,g).subscribe({error:function(){b.dispatch({__type:"MARK_URL_FAILED_DETECTION",url:b.url})},next:function(a){a=(a=a.link_preview)==null?void 0:a.composer_post_confirmation_renderer;l?f.confirmationRenderer=a:b.dispatch({__type:"SET_DETECTION_RESULT",confirmationRenderer:a,url:b.url})}});l=!1;return babelHelpers["extends"]({},j(a,b.url),{misinformationRecords:babelHelpers["extends"]({},a.misinformationRecords,(h={},h[b.url]=f,h))});case"UNTRACK_COMPOSED_URL":return k(a,b.url);default:return b.__type}}g["default"]=a}),98);
__d("useMisinformationState",["CometRelay","cometMisinformationLinkDetectorPluginInternalStateReducer","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useMemo;var i=b.useReducer,j=b.useState;function a(a){var b=d("react-compiler-runtime").c(10),e=d("CometRelay").useRelayEnvironment(),f;b[0]!==a?(f=new Set(a==null?void 0:a.values()),b[0]=a,b[1]=f):f=b[1];b[2]===Symbol["for"]("react.memo_cache_sentinel")?(a={},b[2]=a):a=b[2];b[3]!==e||b[4]!==f?(a={composedURLs:f,environment:e,misinformationRecords:a},b[3]=e,b[4]=f,b[5]=a):a=b[5];e=a;f=e;a=i(c("cometMisinformationLinkDetectorPluginInternalStateReducer"),f);e=a[0];f=a[1];a=e.composedURLs;e=e.misinformationRecords;var g=j("COMPOSING"),h=g[0];g=g[1];b[6]!==a||b[7]!==h||b[8]!==e?(f={composedURLs:a,composerPhase:h,dispatch:f,misinformationRecords:e,setComposerPhase:g},b[6]=a,b[7]=h,b[8]=e,b[9]=f):f=b[9];return f}g["default"]=a}),98);
__d("CometComposerMisinformationLinkDetectorPluginForLexical.react",["JSResourceForInteraction","Lexical","LexicalLink","getInitialComposerLinkData","handlePendingMisinformationOnComposerSubmit","hasNoLinksToAnalyze","maybeTriggerMisinformationDialog","react","react-compiler-runtime","useCometLazyDialog","useComposerPreSubmitHook","useMisinformationState","withComposerViewStatePart"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.useEffect;b.useMemo;var j=b.useRef,k=c("JSResourceForInteraction")("CometMisinformationLinkComposerConfirmationDialog.react").__setRef("CometComposerMisinformationLinkDetectorPluginForLexical.react");function a(a){var b=d("react-compiler-runtime").c(43),e=a.composerType,f=a.editor,g=a.linkAttachment;b[0]!==f?(a=c("getInitialComposerLinkData")(f),b[0]=f,b[1]=a):a=b[1];a=a;a=a;var h=c("useMisinformationState")(a),m=h.composedURLs,n=h.composerPhase,o=h.dispatch,p=h.misinformationRecords,q=h.setComposerPhase,r=j(a),s=j(null);h=c("useCometLazyDialog")(k);var t=h[0],u=j(!1);b[2]!==m||b[3]!==o?(a=function(a,b){b=b.getEditorState().read(function(){return a.getTextContent()});var c=r.current;c.has(a.getKey())||c.set(a.getKey(),b);m.has(b)||o({__type:"TRACK_COMPOSED_URL",dispatch:o,url:b})},b[2]=m,b[3]=o,b[4]=a):a=b[4];var v=a;b[5]!==o||b[6]!==(g==null?void 0:g.url)?(h=function(a){var b=r.current,c=b.get(a);c!=null&&(g==null?void 0:g.url)!==c&&o({__type:"UNTRACK_COMPOSED_URL",url:c});b["delete"](a)},b[5]=o,b[6]=g==null?void 0:g.url,b[7]=h):h=b[7];g==null||g.url;var w=h;b[8]!==m||b[9]!==o||b[10]!==(g==null?void 0:g.url)?(a=function(){var a=g==null?void 0:g.url;a!=null&&(m.has(a)||o({__type:"TRACK_COMPOSED_URL",dispatch:o,url:a}))},b[8]=m,b[9]=o,b[10]=g==null?void 0:g.url,b[11]=a):a=b[11];b[12]!==m||b[13]!==o||b[14]!==g?(h=[m,o,g],b[12]=m,b[13]=o,b[14]=g,b[15]=h):h=b[15];i(a,h);b[16]!==m||b[17]!==n||b[18]!==e||b[19]!==o||b[20]!==p||b[21]!==t?(a=function(){if(e==="share")return;s.current=p;var a=function(){u.current=!0},b=function(){u.current=!1};c("maybeTriggerMisinformationDialog")({composedURLs:m,composerPhase:n,composerType:e,dialogIsOpen:u,dispatch:o,misinformationRecords:p},{onCloseDialog:b,onTriggerDialog:a,openConfirmationDialog:t})},h=[m,n,e,o,p,t],b[16]=m,b[17]=n,b[18]=e,b[19]=o,b[20]=p,b[21]=t,b[22]=a,b[23]=h):(a=b[22],h=b[23]);i(a,h);b[24]===Symbol["for"]("react.memo_cache_sentinel")?(a=[],b[24]=a):a=b[24];var x=j(a);b[25]!==m||b[26]!==p?(h=function(){var a=Array.from(m);c("handlePendingMisinformationOnComposerSubmit")(a,p,x)},a=[m,p],b[25]=m,b[26]=p,b[27]=h,b[28]=a):(h=b[27],a=b[28]);i(h,a);b[29]!==m||b[30]!==o||b[31]!==f||b[32]!==(g==null?void 0:g.url)||b[33]!==p||b[34]!==q?(h=function(a){var b=a.onContinue,d=a.onHalt;q("COMMITTING");x.current.push({onContinue:function(){q("COMPOSING"),b()},onHalt:function(){q("COMPOSING"),d()}});a=c("hasNoLinksToAnalyze")(m,p,f,g==null?void 0:g.url);if(a){a=[].concat(x.current);x.current.length=0;a.forEach(l)}else o({__type:"EXIT_COOLDOWN_PERIOD"})},b[29]=m,b[30]=o,b[31]=f,b[32]=g==null?void 0:g.url,b[33]=p,b[34]=q,b[35]=h):h=b[35];a=h;c("useComposerPreSubmitHook")(a);b[36]===Symbol["for"]("react.memo_cache_sentinel")?(h=function(){return function(){var a=s.current;a!==null&&Object.keys(a).forEach(function(b){b=a[b];b!=null&&b.dispose()})}},a=[],b[36]=h,b[37]=a):(h=b[36],a=b[37]);i(h,a);b[38]!==w||b[39]!==f||b[40]!==v?(h=function(){if(f!=null)return f.registerMutationListener(d("LexicalLink").AutoLinkNode,function(a){var b=f.getEditorState();a.forEach(function(a,c){var e=b.read(function(){return d("Lexical").$getNodeByKey(c)});a==="created"&&e!=null?v(e,f):a==="destroyed"&&w(c)})},{skipInitialization:!0})},a=[w,f,v],b[38]=w,b[39]=f,b[40]=v,b[41]=h,b[42]=a):(h=b[41],a=b[42]);i(h,a)}function l(a){a=a.onContinue;a()}e=c("withComposerViewStatePart")(a,function(a){return{editor:a.lexicalEditor,linkAttachment:a.linkAttachment}});g["default"]=e}),98);
__d("CometComposerWarnStatusTextLengthForLexical.react",["fbt","CometComposerInlineErrorRenderer.react","CometComposerStylingConstants","MLCCharacterLimitCountPlugin.react","gkx","lengthInUTF8Bytes","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useMemo,m=b.useState;function a(a){var b=a.characterLimit,e=a.customWarningLimit,f=a.lexicalEditor;a=a.xstyle;var g=m(null),i=g[0],n=g[1],o=e!=null?e:d("CometComposerStylingConstants").COMPOSER_WARNING_LIMIT;g=k(function(a){a<=o?n(a):a>o&&n(null)},[o]);e=l(function(){return!c("gkx")("16050")||b==null||i==null?i:h._(/*BTDS*/"_j{\"*\":{\"*\":\"A status can't be longer than {limit} characters, but this one is {numCharacters} characters long. please make it a little shorter and try again.\",\"_1\":\"A status can't be longer than {limit} characters, but this one is {numCharacters} character long. please make it a little shorter and try again.\"},\"_1\":{\"*\":\"A status can't be longer than {limit} character, but this one is {numCharacters} characters long. please make it a little shorter and try again.\",\"_1\":\"A status can't be longer than {limit} character, but this one is {numCharacters} character long. please make it a little shorter and try again.\"}}",[h._plural(b),h._plural(b-i),h._param("limit",b),h._param("numCharacters",b-i)])},[b,i]);return j.jsxs(j.Fragment,{children:[j.jsx(c("MLCCharacterLimitCountPlugin.react"),{editor__DEPRECATED:f,limit:b,onChange:g,strlen:c("lengthInUTF8Bytes")}),i!=null&&i<=o&&j.jsx(c("CometComposerInlineErrorRenderer.react"),{error:e,xstyle:a})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("ComposerTelemetryFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("101");b=d("FalcoLoggerInternal").create("composer_telemetry",a);e=b;g["default"]=e}),98);
__d("FeedComposerCometMentionsPluginForLexical.react",["CometMentionsForLexical.react","CometMentionsLayoutStrategy.react","FeedComposerCometMentionsViewItemResolver.react","cometMentionsLexicalCreateNodeStrategy","getImplicitMentionsGating","react","react-compiler-runtime","useCometMentionsViewListStrategy","useFeedComposerCometMentionsDataSourceResolverConfig","withComposerViewStatePart"],(function(a,b,c,d,e,f,g){"use strict";var h=["editor"],i,j=i||(i=d("react"));b=i;b.useCallback;var k=b.useState;function a(a){var b=d("react-compiler-runtime").c(6),c,e;b[0]!==a?(c=a.editor,e=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=c,b[2]=e):(c=b[1],e=b[2]);if(c==null)return null;b[3]!==c||b[4]!==e?(a=j.jsx(l,babelHelpers["extends"]({},e,{editor:c})),b[3]=c,b[4]=e,b[5]=a):a=b[5];return a}function l(a){var b=d("react-compiler-runtime").c(16),e=a.composerType,f=a.contextID,g=a.createNodeStrategy,h=a.editor;a=a.postID;g=g===void 0?c("cometMentionsLexicalCreateNodeStrategy"):g;var i=k(void 0),l=i[0],m=i[1];i=e==="feed";var n;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=d("getImplicitMentionsGating").getIsImplicitMentionsEnabledComposer(),n=d("getImplicitMentionsGating").getIsImplicitMentionsMatchLengthComposerOverride(),b[0]=e,b[1]=n):(e=b[0],n=b[1]);b[2]===Symbol["for"]("react.memo_cache_sentinel")?(e={isImplicitMentionsEnabled:e,matchLimitOverride:n,typeaheadContext:d("getImplicitMentionsGating").getIsFriendsOnlyImplicitDatasource()?"comet_mention_friends_only":void 0},b[2]=e):e=b[2];b[3]!==f||b[4]!==i||b[5]!==l||b[6]!==a?(n={contextID:f,enableTypeSelection:i,implicitMentionsConfig:e,mentionTypesForNetwork:l,postID:a,shouldBootstrapOnLayoutEffect:!0},b[3]=f,b[4]=i,b[5]=l,b[6]=a,b[7]=n):n=b[7];e=c("useFeedComposerCometMentionsDataSourceResolverConfig")(n);b[8]===Symbol["for"]("react.memo_cache_sentinel")?(f=function(a){switch(a.rawData.type){case"MENTION_TYPE_SELECTION":m(a.rawData.typesToShow);return{shouldMentionSelectedEntry:!1};case"MENTION_TYPE_RESET":m(void 0);return{shouldMentionSelectedEntry:!1};default:return{shouldMentionSelectedEntry:!0}}},b[8]=f):f=b[8];i=f;b[9]===Symbol["for"]("react.memo_cache_sentinel")?(l={viewItemStrategyRenderer:c("FeedComposerCometMentionsViewItemResolver.react")},b[9]=l):l=b[9];a=c("useCometMentionsViewListStrategy")(l);b[10]===Symbol["for"]("react.memo_cache_sentinel")?(n={context_id:null,context_type:"undirected",surface:"FEED_COMPOSER",typeahead_type:"ENTITY"},b[10]=n):n=b[10];f=n;b[11]!==g||b[12]!==e||b[13]!==h||b[14]!==a?(l=j.jsx(c("CometMentionsForLexical.react"),{createNodeStrategy:g,dataSourceResolverConfig:e,editor:h,layoutStrategyRenderer:c("CometMentionsLayoutStrategy.react"),mentionsHandlerForSelectedEntry:i,mentionsLoggerContext:f,viewStrategyRenderer:a}),b[11]=g,b[12]=e,b[13]=h,b[14]=a,b[15]=l):l=b[15];return l}e=c("withComposerViewStatePart")(a,function(a){return{editor:a.lexicalEditor}});g["default"]=e}),98);
__d("composerAudienceFeedTransform",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("ComposerTelemetryFalcoEvent").__setRef("composerAudienceFeedTransform");function a(a,b,c){var d,e=a==null||(d=a.albumData)==null?void 0:d.albumID,f=a!=null&&a.viewerEditPostFeatureCapabilities?a.viewerEditPostFeatureCapabilities.includes("POST_CONTAINER"):!1;h.onReady(function(b){return b.log(function(){var b;return{call_site:"composerAudienceFeedTransform",creation_session_id:(b=a.creationSessionID)!=null?b:"",debug_info:"viewState privacy info:"+((b=(b=a.audience)==null||(b=b.privacy)==null?void 0:b.base_state)!=null?b:"null")+" |albumID:"+(e!=null?e:"null")+" |canMovePostToAlbum:"+f.toString(),event:"transform"}})});e!=null?f?c(babelHelpers["extends"]({},b,{audience:{album_id:e}})):c(b):a.localPrivacyOverride!=null?c(babelHelpers["extends"]({},b,{audience:a.localPrivacyOverride})):c(babelHelpers["extends"]({},b,{audience:a.audience}))}g["default"]=a}),98);
__d("extractMessageFromPlainText",["CometLexicalEmojiNode","CometLexicalEntityTextNode","Lexical","LexicalUtils","UnicodeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=[],b="",c=!1,e=d("LexicalUtils").$dfs(),f=e.length;for(var g=0;g<f;g++){var i=e[g].node;if(d("Lexical").$isElementNode(i))continue;var j=i.getTextContent(),k=j.length,l=0;while(!c&&l<=k&&j[l]===" ")l+=1;if(l===k)continue;c=!0;k=j.substring(l);d("CometLexicalEntityTextNode").isCometLexicalEntityTextNode(i)?(a.push({entity:{id:i.getEntity().id},length:(h||(h=d("UnicodeUtils"))).strlen(k),offset:h.strlen(b)}),b+=k):d("CometLexicalEmojiNode").$isEmojiNode(i)?b+=i.getRawText():b+=k}j=b.trim();l=b.length-1;i=a.length;for(k=i-1;k>=0;k-=1){e=a[k];f=e.offset;if(f<=l)break;a.pop()}return{ranges:a,text:j}}g["default"]=a}),98);
__d("composerLexicalMessageFeedTransform",["LexicalText","cr:3325","extractMessageFromPlainText"],(function(a,b,c,d,e,f,g){"use strict";function a(a,e,f){var g=a.lexicalEditor;if(g==null){f(babelHelpers["extends"]({},e));return}g=g.getEditorState().read(function(){if(a.formattingType==="MARKDOWN"&&b("cr:3325")!=null)return b("cr:3325")(d("LexicalText").$rootTextContent().trim());else return c("extractMessageFromPlainText")()});f(babelHelpers["extends"]({},e,{formatting:a.formattingType==="MARKDOWN"?"MARKDOWN":void 0,message:g}))}g["default"]=a}),98);
__d("composerTrackingTransform",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){a.tracking!=null?c(babelHelpers["extends"]({},b,{is_tracking_encrypted:!0,tracking:a.tracking.encrypted_tracking})):c(b)}f["default"]=a}),66);