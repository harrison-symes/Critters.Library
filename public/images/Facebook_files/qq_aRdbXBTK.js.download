;/*FB_PKG_DELIM*/

__d("CometMessengerReshareUtil",["MWChatSearchResultType","qex","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a){case c("MWChatSearchResultType").GROUP:return"GROUP";case c("MWChatSearchResultType").USER:return"USER";case c("MWChatSearchResultType").PAGE:return"PAGE";default:c("recoverableViolation")("Got an unexpected resultType:"+a,"fb_social_experience_web_sharing");return"USER"}}function b(){if(c("qex")._("564")===!0)return!0;else return c("qex")._("121")===!0}g.getTargetTypeFromTypenameForLightSpeed=a;g.isXMAFeedPostShareEnabled=b}),98);
__d("LexicalLinkPlugin",["cr:2067"],(function(a,b,c,d,e,f){e.exports=b("cr:2067")}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<de794ae1e182089481b0110fe3626195>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalLinkPlugin.prod",["Lexical","LexicalComposerContext","LexicalLink","LexicalUtils","react"],(function $module_LexicalLinkPlugin_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";var _require_closure_react;var n=_require_closure_react||(_require_closure_react=require("react"));exports.LinkPlugin=function(_ref){var o=_ref.validateUrl,l=_ref.attributes;var _t$useLexicalComposer=require("LexicalComposerContext").useLexicalComposerContext(),a=_t$useLexicalComposer[0];return n.useEffect(function(){if(!a.hasNodes([require("LexicalLink").LinkNode]))throw new Error("LinkPlugin: LinkNode not registered on editor");return require("LexicalUtils").mergeRegister(a.registerCommand(require("LexicalLink").TOGGLE_LINK_COMMAND,function(t){if(null===t)return require("LexicalLink").$toggleLink(t),!0;if("string"==typeof t)return!(void 0!==o&&!o(t))&&(require("LexicalLink").$toggleLink(t,l),!0);{var _r=t.url,_i=t.target,_n=t.rel,_o=t.title;return require("LexicalLink").$toggleLink(_r,babelHelpers["extends"]({},l,{rel:_n,target:_i,title:_o})),!0;}},require("Lexical").COMMAND_PRIORITY_LOW),void 0!==o?a.registerCommand(require("Lexical").PASTE_COMMAND,function(t){var n=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(n)||n.isCollapsed()||!require("LexicalUtils").objectKlassEquals(t,ClipboardEvent))return!1;if(null===t.clipboardData)return!1;var s=t.clipboardData.getData("text");return!!o(s)&&!n.getNodes().some(function(e){return require("Lexical").$isElementNode(e);})&&(a.dispatchCommand(require("LexicalLink").TOGGLE_LINK_COMMAND,babelHelpers["extends"]({},l,{url:s})),t.preventDefault(),!0);},require("Lexical").COMMAND_PRIORITY_LOW):function(){});},[a,o,l]),null;};}),null);
__d("LexicalTable",["cr:1950"],(function(a,b,c,d,e,f){e.exports=b("cr:1950")}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<c6995448c69521d4eaaad7289282bd61>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalTable.prod",["Lexical","LexicalClipboard","LexicalUtils"],(function $module_LexicalTable_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";var o=/^(\d+(?:\.\d+)?)px$/,r={BOTH:3,COLUMN:2,NO_STATUS:0,ROW:1};var _l24=function(_t$ElementNode){function l(e,t,n,o){var _this;if(e===void 0){e=r.NO_STATUS;}if(t===void 0){t=1;}_this=_t$ElementNode.call(this,o)||this,_this.__colSpan=t,_this.__rowSpan=1,_this.__headerState=e,_this.__width=n,_this.__backgroundColor=null,_this.__verticalAlign=void 0;return _this;}babelHelpers.inheritsLoose(l,_t$ElementNode);l.getType=function getType(){return"tablecell";};l.clone=function clone(e){return new l(e.__headerState,e.__colSpan,e.__width,e.__key);};var _proto=l.prototype;_proto.afterCloneFrom=function afterCloneFrom(e){_t$ElementNode.prototype.afterCloneFrom.call(this,e),this.__rowSpan=e.__rowSpan,this.__backgroundColor=e.__backgroundColor,this.__verticalAlign=e.__verticalAlign;};l.importDOM=function importDOM(){return{td:function td(e){return{conversion:i,priority:0};},th:function th(e){return{conversion:i,priority:0};}};};l.importJSON=function importJSON(e){return a().updateFromJSON(e);};_proto.updateFromJSON=function updateFromJSON(e){return _t$ElementNode.prototype.updateFromJSON.call(this,e).setHeaderStyles(e.headerState).setColSpan(e.colSpan||1).setRowSpan(e.rowSpan||1).setWidth(e.width||void 0).setBackgroundColor(e.backgroundColor||null).setVerticalAlign(e.verticalAlign||void 0);};_proto.createDOM=function createDOM(t){var n=document.createElement(this.getTag());return this.__width&&(n.style.width=this.__width+"px"),this.__colSpan>1&&(n.colSpan=this.__colSpan),this.__rowSpan>1&&(n.rowSpan=this.__rowSpan),null!==this.__backgroundColor&&(n.style.backgroundColor=this.__backgroundColor),s(this.__verticalAlign)&&(n.style.verticalAlign=this.__verticalAlign),require("LexicalUtils").addClassNamesToElement(n,t.theme.tableCell,this.hasHeader()&&t.theme.tableCellHeader),n;};_proto.exportDOM=function exportDOM(e){var n=_t$ElementNode.prototype.exportDOM.call(this,e);if(require("Lexical").isHTMLElement(n.element)){var _e2=n.element;_e2.setAttribute("data-temporary-table-cell-lexical-key",this.getKey()),_e2.style.border="1px solid black",this.__colSpan>1&&(_e2.colSpan=this.__colSpan),this.__rowSpan>1&&(_e2.rowSpan=this.__rowSpan),_e2.style.width=(this.getWidth()||75)+"px",_e2.style.verticalAlign=this.getVerticalAlign()||"top",_e2.style.textAlign="start",null===this.__backgroundColor&&this.hasHeader()&&(_e2.style.backgroundColor="#f2f3f5");}return n;};_proto.exportJSON=function exportJSON(){return babelHelpers["extends"]({},_t$ElementNode.prototype.exportJSON.call(this),s(this.__verticalAlign)&&{verticalAlign:this.__verticalAlign},{backgroundColor:this.getBackgroundColor(),colSpan:this.__colSpan,headerState:this.__headerState,rowSpan:this.__rowSpan,width:this.getWidth()});};_proto.getColSpan=function getColSpan(){return this.getLatest().__colSpan;};_proto.setColSpan=function setColSpan(e){var t=this.getWritable();return t.__colSpan=e,t;};_proto.getRowSpan=function getRowSpan(){return this.getLatest().__rowSpan;};_proto.setRowSpan=function setRowSpan(e){var t=this.getWritable();return t.__rowSpan=e,t;};_proto.getTag=function getTag(){return this.hasHeader()?"th":"td";};_proto.setHeaderStyles=function setHeaderStyles(e,t){if(t===void 0){t=r.BOTH;}var n=this.getWritable();return n.__headerState=e&t|n.__headerState&~t,n;};_proto.getHeaderStyles=function getHeaderStyles(){return this.getLatest().__headerState;};_proto.setWidth=function setWidth(e){var t=this.getWritable();return t.__width=e,t;};_proto.getWidth=function getWidth(){return this.getLatest().__width;};_proto.getBackgroundColor=function getBackgroundColor(){return this.getLatest().__backgroundColor;};_proto.setBackgroundColor=function setBackgroundColor(e){var t=this.getWritable();return t.__backgroundColor=e,t;};_proto.getVerticalAlign=function getVerticalAlign(){return this.getLatest().__verticalAlign;};_proto.setVerticalAlign=function setVerticalAlign(e){var t=this.getWritable();return t.__verticalAlign=e||void 0,t;};_proto.toggleHeaderStyle=function toggleHeaderStyle(e){var t=this.getWritable();return(t.__headerState&e)===e?t.__headerState-=e:t.__headerState+=e,t;};_proto.hasHeaderState=function hasHeaderState(e){return(this.getHeaderStyles()&e)===e;};_proto.hasHeader=function hasHeader(){return this.getLatest().__headerState!==r.NO_STATUS;};_proto.updateDOM=function updateDOM(e){return e.__headerState!==this.__headerState||e.__width!==this.__width||e.__colSpan!==this.__colSpan||e.__rowSpan!==this.__rowSpan||e.__backgroundColor!==this.__backgroundColor||e.__verticalAlign!==this.__verticalAlign;};_proto.isShadowRoot=function isShadowRoot(){return!0;};_proto.collapseAtStart=function collapseAtStart(){return!0;};_proto.canBeEmpty=function canBeEmpty(){return!1;};_proto.canIndent=function canIndent(){return!1;};return l;}(require("Lexical").ElementNode);function s(e){return"middle"===e||"bottom"===e;}function i(e){var n=e,l=e.nodeName.toLowerCase();var i;o.test(n.style.width)&&(i=parseFloat(n.style.width));var c=a("th"===l?r.ROW:r.NO_STATUS,n.colSpan,i);c.__rowSpan=n.rowSpan;var u=n.style.backgroundColor;""!==u&&(c.__backgroundColor=u);var d=n.style.verticalAlign;s(d)&&(c.__verticalAlign=d);var h=n.style,g=(h&&h.textDecoration||"").split(" "),f="700"===h.fontWeight||"bold"===h.fontWeight,m=g.includes("line-through"),C="italic"===h.fontStyle,p=g.includes("underline");return{after:function after(e){var n=[];var o=null;var r=function r(){if(o){var _e3=o.getFirstChild();require("Lexical").$isLineBreakNode(_e3)&&1===o.getChildrenSize()&&_e3.remove();}};for(var _l of e)require("Lexical").$isInlineElementOrDecoratorNode(_l)||require("Lexical").$isTextNode(_l)||require("Lexical").$isLineBreakNode(_l)?(require("Lexical").$isTextNode(_l)&&(f&&_l.toggleFormat("bold"),m&&_l.toggleFormat("strikethrough"),C&&_l.toggleFormat("italic"),p&&_l.toggleFormat("underline")),o?o.append(_l):(o=require("Lexical").$createParagraphNode().append(_l),n.push(o))):(n.push(_l),r(),o=null);return r(),0===n.length&&n.push(require("Lexical").$createParagraphNode()),n;},node:c};}function a(e,n,o){if(e===void 0){e=r.NO_STATUS;}if(n===void 0){n=1;}return require("Lexical").$applyNodeReplacement(new _l24(e,n,o));}function c(e){return e instanceof _l24;}var u=require("Lexical").createCommand("INSERT_TABLE_COMMAND");function d(e){var n=new URL("https://lexical.dev/docs/error"),o=new URLSearchParams();o.append("code",e);for(var _len=arguments.length,t=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){t[_key-1]=arguments[_key];}for(var _e4 of t)o.append("v",_e4);throw n.search=o.toString(),Error("Minified Lexical error #"+e+"; visit "+n.toString()+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.");}var _h10=function(_t$ElementNode2){function h(e,t){var _this2;_this2=_t$ElementNode2.call(this,t)||this,_this2.__height=e;return _this2;}babelHelpers.inheritsLoose(h,_t$ElementNode2);h.getType=function getType(){return"tablerow";};h.clone=function clone(e){return new h(e.__height,e.__key);};h.importDOM=function importDOM(){return{tr:function tr(e){return{conversion:g,priority:0};}};};h.importJSON=function importJSON(e){return f().updateFromJSON(e);};var _proto2=h.prototype;_proto2.updateFromJSON=function updateFromJSON(e){return _t$ElementNode2.prototype.updateFromJSON.call(this,e).setHeight(e.height);};_proto2.exportJSON=function exportJSON(){var e=this.getHeight();return babelHelpers["extends"]({},_t$ElementNode2.prototype.exportJSON.call(this),void 0===e?void 0:{height:e});};_proto2.createDOM=function createDOM(t){var n=document.createElement("tr");return this.__height&&(n.style.height=this.__height+"px"),require("LexicalUtils").addClassNamesToElement(n,t.theme.tableRow),n;};_proto2.extractWithChild=function extractWithChild(e,t,n){return"html"===n;};_proto2.isShadowRoot=function isShadowRoot(){return!0;};_proto2.setHeight=function setHeight(e){var t=this.getWritable();return t.__height=e,t;};_proto2.getHeight=function getHeight(){return this.getLatest().__height;};_proto2.updateDOM=function updateDOM(e){return e.__height!==this.__height;};_proto2.canBeEmpty=function canBeEmpty(){return!1;};_proto2.canIndent=function canIndent(){return!1;};return h;}(require("Lexical").ElementNode);function g(t){var n=t;var r;return o.test(n.style.height)&&(r=parseFloat(n.style.height)),{after:function after(t){return require("LexicalUtils").$descendantsMatching(t,c);},node:f(r)};}function f(e){return require("Lexical").$applyNodeReplacement(new _h10(e));}function m(e){return e instanceof _h10;}var C="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,p=C&&"documentMode"in document?document.documentMode:null,_=C&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);function S(e,n,o){if(o===void 0){o=!0;}var l=Le();for(var _s=0;_s<e;_s++){var _e5=f();for(var _l2=0;_l2<n;_l2++){var _n=r.NO_STATUS;"object"==typeof o?(0===_s&&o.rows&&(_n|=r.ROW),0===_l2&&o.columns&&(_n|=r.COLUMN)):o&&(0===_s&&(_n|=r.ROW),0===_l2&&(_n|=r.COLUMN));var _i=a(_n),_c=require("Lexical").$createParagraphNode();_c.append(require("Lexical").$createTextNode()),_i.append(_c),_e5.append(_i);}l.append(_e5);}return l;}function N(t){var n=require("LexicalUtils").$findMatchingParent(t,function(e){return m(e);});if(m(n))return n;throw new Error("Expected table cell to be inside of table row.");}function w(t){var n=require("LexicalUtils").$findMatchingParent(t,function(e){return ke(e);});if(ke(n))return n;throw new Error("Expected table cell to be inside of table.");}function b(e,t){var n=w(e),_n$getCordsFromCellNo=n.getCordsFromCellNode(e,t),o=_n$getCordsFromCellNo.x,r=_n$getCordsFromCellNo.y;return{above:n.getCellNodeFromCords(o,r-1,t),below:n.getCellNodeFromCords(o,r+1,t),left:n.getCellNodeFromCords(o-1,r,t),right:n.getCellNodeFromCords(o+1,r,t)};}C&&"InputEvent"in window&&!p&&new window.InputEvent("input");var T=function T(e,t){return e===r.BOTH||e===t?t:r.NO_STATUS;};function $(e){if(e===void 0){e=!0;}var n=require("Lexical").$getSelection();require("Lexical").$isRangeSelection(n)||X(n)||d(188);var o=n.anchor.getNode(),r=n.focus.getNode(),_W=W(o),l=_W[0],_W2=W(r),s=_W2[0],i=_W2[2],_k=k(i,s,l),a=_k[1],c=_k[2],u=c.startRow,h=a.startRow;return e?R(u+l.__rowSpan>h+s.__rowSpan?l:s,!0):R(h<u?s:l,!1);}var y=$;function R(e,n){if(n===void 0){n=!0;}var _W3=W(e),o=_W3[2],_k2=k(o,e,e),l=_k2[0],s=_k2[1],i=l[0].length,c=s.startRow;var u=null;if(n){var _n2=c+e.__rowSpan-1,_s2=l[_n2],_h=f();for(var _e6=0;_e6<i;_e6++){var _s2$_e=_s2[_e6],_o=_s2$_e.cell,_l3=_s2$_e.startRow;if(_l3+_o.__rowSpan-1<=_n2){var _n3=_s2[_e6].cell.__headerState,_o2=T(_n3,r.COLUMN);_h.append(a(_o2).append(require("Lexical").$createParagraphNode()));}else _o.setRowSpan(_o.__rowSpan+1);}var _g=o.getChildAtIndex(_n2);m(_g)||d(256),_g.insertAfter(_h),u=_h;}else{var _e7=c,_n4=l[_e7],_s3=f();for(var _o3=0;_o3<i;_o3++){var _n4$_o=_n4[_o3],_l4=_n4$_o.cell,_i2=_n4$_o.startRow;if(_i2===_e7){var _e8=_n4[_o3].cell.__headerState,_l5=T(_e8,r.COLUMN);_s3.append(a(_l5).append(require("Lexical").$createParagraphNode()));}else _l4.setRowSpan(_l4.__rowSpan+1);}var _h2=o.getChildAtIndex(_e7);m(_h2)||d(257),_h2.insertBefore(_s3),u=_s3;}return u;}function M(e){if(e===void 0){e=!0;}var n=require("Lexical").$getSelection();require("Lexical").$isRangeSelection(n)||X(n)||d(188);var o=n.anchor.getNode(),r=n.focus.getNode(),_W4=W(o),l=_W4[0],_W5=W(r),s=_W5[0],i=_W5[2],_k3=k(i,s,l),a=_k3[1],c=_k3[2],u=c.startColumn,h=a.startColumn;return e?E(u+l.__colSpan>h+s.__colSpan?l:s,!0):E(h<u?s:l,!1);}var x=M;function E(e,n,o){if(n===void 0){n=!0;}if(o===void 0){o=!0;}var _W6=W(e),l=_W6[2],_k4=k(l,e,e),s=_k4[0],i=_k4[1],c=s.length,u=i.startColumn,h=n?u+e.__colSpan-1:u-1,g=l.getFirstChild();m(g)||d(120);var f=null;function C(e){if(e===void 0){e=r.NO_STATUS;}var n=a(e).append(require("Lexical").$createParagraphNode());return null===f&&(f=n),n;}var p=g;e:for(var _e9=0;_e9<c;_e9++){if(0!==_e9){var _e0=p.getNextSibling();m(_e0)||d(121),p=_e0;}var _t=s[_e9],_n5=_t[h<0?0:h].cell.__headerState,_o4=T(_n5,r.ROW);if(h<0){D(p,C(_o4));continue;}var _t$h=_t[h],_l6=_t$h.cell,_i3=_t$h.startColumn,_a=_t$h.startRow;if(_i3+_l6.__colSpan-1<=h){var _n6=_l6,_r=_a,_s4=h;for(;_r!==_e9&&_n6.__rowSpan>1;){if(_s4-=_l6.__colSpan,!(_s4>=0)){p.append(C(_o4));continue e;}{var _t$_s=_t[_s4],_e1=_t$_s.cell,_o5=_t$_s.startRow;_n6=_e1,_r=_o5;}}_n6.insertAfter(C(_o4));}else _l6.setColSpan(_l6.__colSpan+1);}null!==f&&o&&P(f);var _=l.getColWidths();if(_){var _e10=[].concat(_),_t2=h<0?0:h,_n7=_e10[_t2];_e10.splice(_t2,0,_n7),l.setColWidths(_e10);}return f;}function O(){var e=require("Lexical").$getSelection();require("Lexical").$isRangeSelection(e)||X(e)||d(188);var _ref=e.isBackward()?[e.focus.getNode(),e.anchor.getNode()]:[e.anchor.getNode(),e.focus.getNode()],n=_ref[0],o=_ref[1],_W7=W(n),r=_W7[0],l=_W7[2],_W8=W(o),s=_W8[0],_k5=k(l,r,s),i=_k5[0],a=_k5[1],c=_k5[2],u=a.startRow,h=c.startRow,g=h+s.__rowSpan-1;if(i.length===g-u+1)return void l.remove();var f=i[0].length,C=i[g+1],p=l.getChildAtIndex(g+1);for(var _e11=g;_e11>=u;_e11--){for(var _t3=f-1;_t3>=0;_t3--){var _i$_e11$_t=i[_e11][_t3],_n8=_i$_e11$_t.cell,_o6=_i$_e11$_t.startRow,_r2=_i$_e11$_t.startColumn;if(_r2===_t3){if(_o6<u||_o6+_n8.__rowSpan-1>g){var _e12=Math.max(_o6,u),_t4=Math.min(_n8.__rowSpan+_o6-1,g),_r3=_e12<=_t4?_t4-_e12+1:0;_n8.setRowSpan(_n8.__rowSpan-_r3);}if(_o6>=u&&_o6+_n8.__rowSpan-1>g&&_e11===g){null===p&&d(122);var _o7=null;for(var _n9=0;_n9<_t3;_n9++){var _t5=C[_n9],_r4=_t5.cell;_t5.startRow===_e11+1&&(_o7=_r4),_r4.__colSpan>1&&(_n9+=_r4.__colSpan-1);}null===_o7?D(p,_n8):_o7.insertAfter(_n8);}}}var _t6=l.getChildAtIndex(_e11);m(_t6)||d(206,String(_e11)),_t6.remove();}if(void 0!==C){var _e13=C[0].cell;P(_e13);}else{var _e14=i[u-1],_t7=_e14[0].cell;P(_t7);}}var A=O;function v(){var e=require("Lexical").$getSelection();require("Lexical").$isRangeSelection(e)||X(e)||d(188);var n=e.anchor.getNode(),o=e.focus.getNode(),_W9=W(n),r=_W9[0],l=_W9[2],_W0=W(o),s=_W0[0],_k6=k(l,r,s),i=_k6[0],a=_k6[1],c=_k6[2],u=a.startColumn,h=c.startRow,g=c.startColumn,f=Math.min(u,g),m=Math.max(u+r.__colSpan-1,g+s.__colSpan-1),C=m-f+1;if(i[0].length===m-f+1)return l.selectPrevious(),void l.remove();var p=i.length;for(var _e15=0;_e15<p;_e15++)for(var _t8=f;_t8<=m;_t8++){var _i$_e15$_t=i[_e15][_t8],_n0=_i$_e15$_t.cell,_o8=_i$_e15$_t.startColumn;if(_o8<f){if(_t8===f){var _e16=f-_o8;_n0.setColSpan(_n0.__colSpan-Math.min(C,_n0.__colSpan-_e16));}}else if(_o8+_n0.__colSpan-1>m){if(_t8===m){var _e17=m-_o8+1;_n0.setColSpan(_n0.__colSpan-_e17);}}else _n0.remove();}var _=i[h],S=u>g?_[u+r.__colSpan]:_[g+s.__colSpan];if(void 0!==S){var _e18=S.cell;P(_e18);}else{var _e19=g<u?_[g-1]:_[u-1],_t9=_e19.cell;P(_t9);}var N=l.getColWidths();if(N){var _e20=[].concat(N);_e20.splice(f,C),l.setColWidths(_e20);}}var F=v;function P(e){var t=e.getFirstDescendant();null==t?e.selectStart():t.getParentOrThrow().selectStart();}function D(e,t){var n=e.getFirstChild();null!==n?n.insertBefore(t):e.append(t);}function K(e){if(0===e.length)return null;var n=w(e[0]),_H=H(n,null,null),o=_H[0];var r=1/0,l=-1/0,s=1/0,i=-1/0;var a=new Set();for(var _t0 of o){var _loop=function _loop(_n1){if(!_n1||!_n1.cell)return 1;var t=_n1.cell.getKey();if(!a.has(t)&&e.some(function(e){return e.is(_n1.cell);})){a.add(t);var _e21=_n1.startRow,_o9=_n1.startColumn,_c2=_n1.cell.__rowSpan||1,_u=_n1.cell.__colSpan||1;r=Math.min(r,_e21),l=Math.max(l,_e21+_c2-1),s=Math.min(s,_o9),i=Math.max(i,_o9+_u-1);}};for(var _n1 of _t0){if(_loop(_n1))continue;}}if(r===1/0||s===1/0)return null;var c=l-r+1,u=i-s+1,d=o[r][s];if(!d.cell)return null;var h=d.cell;h.setColSpan(u),h.setRowSpan(c);var g=new Set([h.getKey()]);for(var _e22=r;_e22<=l;_e22++)for(var _t1=s;_t1<=i;_t1++){var _n10=o[_e22][_t1];if(!_n10.cell)continue;var _r5=_n10.cell,_l7=_r5.getKey();if(!g.has(_l7)){g.add(_l7);I(_r5)||h.append.apply(h,_r5.getChildren()),_r5.remove();}}return 0===h.getChildrenSize()&&h.append(require("Lexical").$createParagraphNode()),h;}function I(e){if(1!==e.getChildrenSize())return!1;var n=e.getFirstChildOrThrow();return!(!require("Lexical").$isParagraphNode(n)||!n.isEmpty());}function L(e){var _W1=W(e),n=_W1[0],o=_W1[1],l=_W1[2],s=n.__colSpan,i=n.__rowSpan;if(1===s&&1===i)return;var _k7=k(l,n,n),c=_k7[0],u=_k7[1],h=u.startColumn,g=u.startRow,f=n.__headerState&r.COLUMN,C=Array.from({length:s},function(e,t){var n=f;for(var _e23=0;0!==n&&_e23<c.length;_e23++)n&=c[_e23][t+h].cell.__headerState;return n;}),p=n.__headerState&r.ROW,_=Array.from({length:i},function(e,t){var n=p;for(var _e24=0;0!==n&&_e24<c[0].length;_e24++)n&=c[t+g][_e24].cell.__headerState;return n;});if(s>1){for(var _e25=1;_e25<s;_e25++)n.insertAfter(a(C[_e25]|_[0]).append(require("Lexical").$createParagraphNode()));n.setColSpan(1);}if(i>1){var _e26;for(var _n11=1;_n11<i;_n11++){var _r6=g+_n11,_l8=c[_r6];_e26=(_e26||o).getNextSibling(),m(_e26)||d(125);var _i4=null;for(var _e27=0;_e27<h;_e27++){var _t10=_l8[_e27],_n12=_t10.cell;_t10.startRow===_r6&&(_i4=_n12),_n12.__colSpan>1&&(_e27+=_n12.__colSpan-1);}if(null===_i4)for(var _o0=s-1;_o0>=0;_o0--)D(_e26,a(C[_o0]|_[_n11]).append(require("Lexical").$createParagraphNode()));else for(var _e28=s-1;_e28>=0;_e28--)_i4.insertAfter(a(C[_e28]|_[_n11]).append(require("Lexical").$createParagraphNode()));}n.setRowSpan(1);}}function k(e,t,n){var _H2=H(e,t,n),o=_H2[0],r=_H2[1],l=_H2[2];return null===r&&d(207),null===l&&d(208),[o,r,l];}function H(e,t,n){var o=[];var r=null,l=null;function s(e){var t=o[e];return void 0===t&&(o[e]=t=[]),t;}var i=e.getChildren();for(var _e29=0;_e29<i.length;_e29++){var _o1=i[_e29];m(_o1)||d(209);var _a2=s(_e29);for(var _u2=_o1.getFirstChild(),_h3=0;null!=_u2;_u2=_u2.getNextSibling()){for(c(_u2)||d(147);void 0!==_a2[_h3];)_h3++;var _o10={cell:_u2,startColumn:_h3,startRow:_e29},_u3=_u2,_g2=_u3.__rowSpan,_f=_u3.__colSpan;for(var _t11=0;_t11<_g2&&!(_e29+_t11>=i.length);_t11++){var _n13=s(_e29+_t11);for(var _e30=0;_e30<_f;_e30++)_n13[_h3+_e30]=_o10;}null!==t&&null===r&&t.is(_u2)&&(r=_o10),null!==n&&null===l&&n.is(_u2)&&(l=_o10);}}return[o,r,l];}function W(t){var n;if(t instanceof _l24)n=t;else if("__type"in t){var _o11=require("LexicalUtils").$findMatchingParent(t,c);c(_o11)||d(148),n=_o11;}else{var _o12=require("LexicalUtils").$findMatchingParent(t.getNode(),c);c(_o12)||d(148),n=_o12;}var o=n.getParent();m(o)||d(149);var r=o.getParent();return ke(r)||d(210),[n,o,r];}function z(e,t,n){var o,r=Math.min(t.startColumn,n.startColumn),l=Math.min(t.startRow,n.startRow),s=Math.max(t.startColumn+t.cell.__colSpan-1,n.startColumn+n.cell.__colSpan-1),i=Math.max(t.startRow+t.cell.__rowSpan-1,n.startRow+n.cell.__rowSpan-1);do{o=!1;for(var _t12=0;_t12<e.length;_t12++)for(var _n14=0;_n14<e[0].length;_n14++){var _a3=e[_t12][_n14];if(!_a3)continue;var _c3=_a3.startColumn+_a3.cell.__colSpan-1,_u4=_a3.startRow+_a3.cell.__rowSpan-1,_d=_a3.startColumn<=s&&_c3>=r,_h4=_a3.startRow<=i&&_u4>=l;if(_d&&_h4){var _e31=Math.min(r,_a3.startColumn),_t13=Math.max(s,_c3),_n15=Math.min(l,_a3.startRow),_d2=Math.max(i,_u4);_e31===r&&_t13===s&&_n15===l&&_d2===i||(r=_e31,s=_t13,l=_n15,i=_d2,o=!0);}}}while(o);return{maxColumn:s,maxRow:i,minColumn:r,minRow:l};}function B(e){var _W10=W(e),t=_W10[0],n=_W10[2],o=n.getChildren(),r=o.length,l=o[0].getChildren().length,s=new Array(r);for(var _e32=0;_e32<r;_e32++)s[_e32]=new Array(l);for(var _e33=0;_e33<r;_e33++){var _n16=o[_e33].getChildren();var _r7=0;for(var _o13=0;_o13<_n16.length;_o13++){for(;s[_e33][_r7];)_r7++;var _l9=_n16[_o13],_i5=_l9.__rowSpan||1,_a4=_l9.__colSpan||1;for(var _t14=0;_t14<_i5;_t14++)for(var _n17=0;_n17<_a4;_n17++)s[_e33+_t14][_r7+_n17]=_l9;if(t===_l9)return{colSpan:_a4,columnIndex:_r7,rowIndex:_e33,rowSpan:_i5};_r7+=_a4;}}return null;}function Y(t){var _map=["anchor","focus"].map(function(n){var o=t[n].getNode(),r=require("LexicalUtils").$findMatchingParent(o,c);c(r)||d(238,n,o.getKey(),o.getType());var l=r.getParent();m(l)||d(239,n);var s=l.getParent();return ke(s)||d(240,n),[o,r,l,s];}),_map$=_map[0],n=_map$[0],o=_map$[1],r=_map$[2],l=_map$[3],_map$2=_map[1],s=_map$2[0],i=_map$2[1],a=_map$2[2],u=_map$2[3];return l.is(u)||d(241),{anchorCell:o,anchorNode:n,anchorRow:r,anchorTable:l,focusCell:i,focusNode:s,focusRow:a,focusTable:u};}var _U=function(){function U(e,t,n){this.anchor=t,this.focus=n,t._selection=this,n._selection=this,this._cachedNodes=null,this.dirty=!1,this.tableKey=e;}var _proto3=U.prototype;_proto3.getStartEndPoints=function getStartEndPoints(){return[this.anchor,this.focus];};_proto3.isValid=function isValid(){return"root"!==this.tableKey&&"root"!==this.anchor.key&&"element"===this.anchor.type&&"root"!==this.focus.key&&"element"===this.focus.type;};_proto3.isBackward=function isBackward(){return this.focus.isBefore(this.anchor);};_proto3.getCachedNodes=function getCachedNodes(){return this._cachedNodes;};_proto3.setCachedNodes=function setCachedNodes(e){this._cachedNodes=e;};_proto3.is=function is(e){return X(e)&&this.tableKey===e.tableKey&&this.anchor.is(e.anchor)&&this.focus.is(e.focus);};_proto3.set=function set(e,t,n){this.dirty=this.dirty||e!==this.tableKey||t!==this.anchor.key||n!==this.focus.key,this.tableKey=e,this.anchor.key=t,this.focus.key=n,this._cachedNodes=null;};_proto3.clone=function clone(){return new U(this.tableKey,require("Lexical").$createPoint(this.anchor.key,this.anchor.offset,this.anchor.type),require("Lexical").$createPoint(this.focus.key,this.focus.offset,this.focus.type));};_proto3.isCollapsed=function isCollapsed(){return!1;};_proto3.extract=function extract(){return this.getNodes();};_proto3.insertRawText=function insertRawText(e){};_proto3.insertText=function insertText(){};_proto3.hasFormat=function hasFormat(e){var n=0;this.getNodes().filter(c).forEach(function(e){var o=e.getFirstChild();require("Lexical").$isParagraphNode(o)&&(n|=o.getTextFormat());});var o=require("Lexical").TEXT_TYPE_TO_FORMAT[e];return 0!==(n&o);};_proto3.insertNodes=function insertNodes(e){var n=this.focus.getNode();require("Lexical").$isElementNode(n)||d(151);require("Lexical").$normalizeSelection__EXPERIMENTAL(n.select(0,n.getChildrenSize())).insertNodes(e);};_proto3.getShape=function getShape(){var _Y=Y(this),e=_Y.anchorCell,t=_Y.focusCell,n=B(e);null===n&&d(153);var o=B(t);null===o&&d(155);var r=Math.min(n.columnIndex,o.columnIndex),l=Math.max(n.columnIndex+n.colSpan-1,o.columnIndex+o.colSpan-1),s=Math.min(n.rowIndex,o.rowIndex),i=Math.max(n.rowIndex+n.rowSpan-1,o.rowIndex+o.rowSpan-1);return{fromX:Math.min(r,l),fromY:Math.min(s,i),toX:Math.max(r,l),toY:Math.max(s,i)};};_proto3.getNodes=function getNodes(){if(!this.isValid())return[];var e=this._cachedNodes;if(null!==e)return e;var _Y2=Y(this),n=_Y2.anchorTable,o=_Y2.anchorCell,r=_Y2.focusCell,l=r.getParents()[1];if(l!==n){if(n.isParentOf(r)){var _e34=l.getParent();null==_e34&&d(159),this.set(this.tableKey,r.getKey(),_e34.getKey());}else{var _e35=n.getParent();null==_e35&&d(158),this.set(this.tableKey,_e35.getKey(),r.getKey());}return this.getNodes();}var _k8=k(n,o,r),s=_k8[0],i=_k8[1],a=_k8[2],_z=z(s,i,a),c=_z.minColumn,u=_z.maxColumn,h=_z.minRow,g=_z.maxRow,f=new Map([[n.getKey(),n]]);var C=null;for(var _e36=h;_e36<=g;_e36++)for(var _t15=c;_t15<=u;_t15++){var _n18=s[_e36][_t15].cell,_o14=_n18.getParent();m(_o14)||d(160),_o14!==C&&(f.set(_o14.getKey(),_o14),C=_o14),f.has(_n18.getKey())||G(_n18,function(e){f.set(e.getKey(),e);});}var p=Array.from(f.values());return require("Lexical").isCurrentlyReadOnlyMode()||(this._cachedNodes=p),p;};_proto3.getTextContent=function getTextContent(){var e=this.getNodes().filter(function(e){return c(e);});var t="";for(var _n19=0;_n19<e.length;_n19++){var _o15=e[_n19],_r8=_o15.__parent,_l0=(e[_n19+1]||{}).__parent;t+=_o15.getTextContent()+(_l0!==_r8?"\n":"\t");}return t;};return U;}();function X(e){return e instanceof _U;}function J(){var e=require("Lexical").$createPoint("root",0,"element"),n=require("Lexical").$createPoint("root",0,"element");return new _U("root",e,n);}function q(e,n,o){e.getKey(),n.getKey(),o.getKey();var r=require("Lexical").$getSelection(),l=X(r)?r.clone():J();return l.set(e.getKey(),n.getKey(),o.getKey()),l;}function G(e,n){var o=[[e]];for(var _e37=o.at(-1);void 0!==_e37&&o.length>0;_e37=o.at(-1)){var _r9=_e37.pop();void 0===_r9?o.pop():!1!==n(_r9)&&require("Lexical").$isElementNode(_r9)&&o.push(_r9.getChildren());}}function j(e,n){if(n===void 0){n=require("Lexical").$getEditor();}var o=require("Lexical").$getNodeByKey(e);ke(o)||d(231,e);var r=ee(o,n.getElementByKey(e));return null===r&&d(232,e),{tableElement:r,tableNode:o};}var _V=function(){function V(e,t){this.isHighlightingCells=!1,this.anchorX=-1,this.anchorY=-1,this.focusX=-1,this.focusY=-1,this.listenersToRemove=new Set(),this.tableNodeKey=t,this.editor=e,this.table={columns:0,domRows:[],rows:0},this.tableSelection=null,this.anchorCellNodeKey=null,this.focusCellNodeKey=null,this.anchorCell=null,this.focusCell=null,this.hasHijackedSelectionStyles=!1,this.isSelecting=!1,this.pointerType=null,this.shouldCheckSelection=!1,this.abortController=new AbortController(),this.listenerOptions={signal:this.abortController.signal},this.nextFocus=null,this.trackTable();}var _proto4=V.prototype;_proto4.getTable=function getTable(){return this.table;};_proto4.removeListeners=function removeListeners(){this.abortController.abort("removeListeners"),Array.from(this.listenersToRemove).forEach(function(e){return e();}),this.listenersToRemove.clear();};_proto4.$lookup=function $lookup(){return j(this.tableNodeKey,this.editor);};_proto4.trackTable=function trackTable(){var _this4=this;var e=new MutationObserver(function(e){_this4.editor.getEditorState().read(function(){var t=!1;for(var _n20=0;_n20<e.length;_n20++){var _o16=e[_n20].target.nodeName;if("TABLE"===_o16||"TBODY"===_o16||"THEAD"===_o16||"TR"===_o16){t=!0;break;}}if(!t)return;var _this4$$lookup=_this4.$lookup(),n=_this4$$lookup.tableNode,o=_this4$$lookup.tableElement;_this4.table=ue(n,o);},{editor:_this4.editor});});this.editor.getEditorState().read(function(){var _this4$$lookup2=_this4.$lookup(),t=_this4$$lookup2.tableNode,n=_this4$$lookup2.tableElement;_this4.table=ue(t,n),e.observe(n,{attributes:!0,childList:!0,subtree:!0});},{editor:this.editor});};_proto4.$clearHighlight=function $clearHighlight(){var e=this.editor;this.isHighlightingCells=!1,this.anchorX=-1,this.anchorY=-1,this.focusX=-1,this.focusY=-1,this.tableSelection=null,this.anchorCellNodeKey=null,this.focusCellNodeKey=null,this.anchorCell=null,this.focusCell=null,this.hasHijackedSelectionStyles=!1,this.$enableHighlightStyle();var _this$$lookup=this.$lookup(),n=_this$$lookup.tableNode,o=_this$$lookup.tableElement;de(e,ue(n,o),null),null!==require("Lexical").$getSelection()&&(require("Lexical").$setSelection(null),e.dispatchCommand(require("Lexical").SELECTION_CHANGE_COMMAND,void 0));};_proto4.$enableHighlightStyle=function $enableHighlightStyle(){var t=this.editor,_this$$lookup2=this.$lookup(),n=_this$$lookup2.tableElement;require("LexicalUtils").removeClassNamesFromElement(n,t._config.theme.tableSelection),n.classList.remove("disable-selection"),this.hasHijackedSelectionStyles=!1;};_proto4.$disableHighlightStyle=function $disableHighlightStyle(){var _this$$lookup3=this.$lookup(),t=_this$$lookup3.tableElement;require("LexicalUtils").addClassNamesToElement(t,this.editor._config.theme.tableSelection),this.hasHijackedSelectionStyles=!0;};_proto4.$updateTableTableSelection=function $updateTableTableSelection(e){if(null!==e){e.tableKey!==this.tableNodeKey&&d(233,e.tableKey,this.tableNodeKey);var _t16=this.editor;this.tableSelection=e,this.isHighlightingCells=!0,this.$disableHighlightStyle(),this.updateDOMSelection(),de(_t16,this.table,this.tableSelection);}else this.$clearHighlight();};_proto4.setShouldCheckSelection=function setShouldCheckSelection(){this.shouldCheckSelection=!0;};_proto4.getAndClearShouldCheckSelection=function getAndClearShouldCheckSelection(){return!!this.shouldCheckSelection&&(this.shouldCheckSelection=!1,!0);};_proto4.setNextFocus=function setNextFocus(e){this.nextFocus=e;};_proto4.getAndClearNextFocus=function getAndClearNextFocus(){var e=this.nextFocus;return null!==e&&(this.nextFocus=null),e;};_proto4.updateDOMSelection=function updateDOMSelection(){if(null!==this.anchorCell&&null!==this.focusCell){var _e38=require("Lexical").getDOMSelection(this.editor._window);_e38&&_e38.rangeCount>0&&_e38.removeAllRanges();}};_proto4.$setFocusCellForSelection=function $setFocusCellForSelection(e,n){if(n===void 0){n=!1;}var o=this.editor,_this$$lookup4=this.$lookup(),r=_this$$lookup4.tableNode,l=e.x,s=e.y;if(this.focusCell=e,this.isHighlightingCells||this.anchorX===l&&this.anchorY===s&&!n){if(l===this.focusX&&s===this.focusY)return!1;}else this.isHighlightingCells=!0,this.$disableHighlightStyle();if(this.focusX=l,this.focusY=s,this.isHighlightingCells){var _n21=Ae(r,e.elem);if(null!=this.tableSelection&&null!=this.anchorCellNodeKey&&null!==_n21)return this.focusCellNodeKey=_n21.getKey(),this.tableSelection=q(r,this.$getAnchorTableCellOrThrow(),_n21),require("Lexical").$setSelection(this.tableSelection),o.dispatchCommand(require("Lexical").SELECTION_CHANGE_COMMAND,void 0),de(o,this.table,this.tableSelection),!0;}return!1;};_proto4.$getAnchorTableCell=function $getAnchorTableCell(){return this.anchorCellNodeKey?require("Lexical").$getNodeByKey(this.anchorCellNodeKey):null;};_proto4.$getAnchorTableCellOrThrow=function $getAnchorTableCellOrThrow(){var e=this.$getAnchorTableCell();return null===e&&d(234),e;};_proto4.$getFocusTableCell=function $getFocusTableCell(){return this.focusCellNodeKey?require("Lexical").$getNodeByKey(this.focusCellNodeKey):null;};_proto4.$getFocusTableCellOrThrow=function $getFocusTableCellOrThrow(){var e=this.$getFocusTableCell();return null===e&&d(235),e;};_proto4.$setAnchorCellForSelection=function $setAnchorCellForSelection(e){this.isHighlightingCells=!1,this.anchorCell=e,this.anchorX=e.x,this.anchorY=e.y;var _this$$lookup5=this.$lookup(),t=_this$$lookup5.tableNode,n=Ae(t,e.elem);if(null!==n){var _e39=n.getKey();this.tableSelection=null!=this.tableSelection?this.tableSelection.clone():J(),this.anchorCellNodeKey=_e39;}};_proto4.$formatCells=function $formatCells(e){var n=require("Lexical").$getSelection();X(n)||d(236);var o=require("Lexical").$createRangeSelection(),r=o.anchor,l=o.focus,s=n.getNodes().filter(c);s.length>0||d(237);var i=s[0].getFirstChild(),a=require("Lexical").$isParagraphNode(i)?i.getFormatFlags(e,null):null;s.forEach(function(t){r.set(t.getKey(),0,"element"),l.set(t.getKey(),t.getChildrenSize(),"element"),o.formatText(e,a);}),require("Lexical").$setSelection(n),this.editor.dispatchCommand(require("Lexical").SELECTION_CHANGE_COMMAND,void 0);};_proto4.$clearText=function $clearText(){var e=this.editor,n=require("Lexical").$getNodeByKey(this.tableNodeKey);if(!ke(n))throw new Error("Expected TableNode.");var o=require("Lexical").$getSelection();X(o)||d(253);var r=o.getNodes().filter(c),l=n.getFirstChild(),s=n.getLastChild();if(r.length>0&&null!==l&&null!==s&&m(l)&&m(s)&&r[0]===l.getFirstChild()&&r[r.length-1]===s.getLastChild()){n.selectPrevious();var _o17=n.getParent();return n.remove(),void(require("Lexical").$isRootNode(_o17)&&_o17.isEmpty()&&e.dispatchCommand(require("Lexical").INSERT_PARAGRAPH_COMMAND,void 0));}r.forEach(function(e){if(require("Lexical").$isElementNode(e)){var _n22=require("Lexical").$createParagraphNode(),_o18=require("Lexical").$createTextNode();_n22.append(_o18),e.append(_n22),e.getChildren().forEach(function(e){e!==_n22&&e.remove();});}}),de(e,this.table,null),require("Lexical").$setSelection(null),e.dispatchCommand(require("Lexical").SELECTION_CHANGE_COMMAND,void 0);};return V;}();var Q="__lexicalTableSelection";function Z(e){return require("Lexical").isHTMLElement(e)&&"TABLE"===e.nodeName;}function ee(e,t){if(!t)return t;var n=Z(t)?t:e.getDOMSlot(t).element;return"TABLE"!==n.nodeName&&d(245,t.nodeName),n;}function te(e){return e._window;}function ne(e,t){for(var _n23=t,_o19=null;null!==_n23;_n23=_n23.getParent()){if(e.is(_n23))return _o19;c(_n23)&&(_o19=_n23);}return null;}var oe=[[require("Lexical").KEY_ARROW_DOWN_COMMAND,"down"],[require("Lexical").KEY_ARROW_UP_COMMAND,"up"],[require("Lexical").KEY_ARROW_LEFT_COMMAND,"backward"],[require("Lexical").KEY_ARROW_RIGHT_COMMAND,"forward"]],re=[require("Lexical").DELETE_WORD_COMMAND,require("Lexical").DELETE_LINE_COMMAND,require("Lexical").DELETE_CHARACTER_COMMAND],le=[require("Lexical").KEY_BACKSPACE_COMMAND,require("Lexical").KEY_DELETE_COMMAND];function se(o,r,l,s){var i=l.getRootElement(),a=te(l);null!==i&&null!==a||d(246);var u=new _V(l,o.getKey()),h=ee(o,r);!function(e,t){null!==ie(e)&&d(205);e[Q]=t;}(h,u),u.listenersToRemove.add(function(){return function(e,t){ie(e)===t&&delete e[Q];}(h,u);});var g=function g(e){if(u.pointerType=e.pointerType,0!==e.button||!require("Lexical").isDOMNode(e.target)||!a)return;var n=ae(e.target);null!==n&&l.update(function(){var r=require("Lexical").$getPreviousSelection();if(_&&e.shiftKey&&Se(r,o)&&(require("Lexical").$isRangeSelection(r)||X(r))){var _t17=r.anchor.getNode(),_l1=ne(o,r.anchor.getNode());if(_l1)u.$setAnchorCellForSelection(Oe(u,_l1)),u.$setFocusCellForSelection(n),Me(e);else{(o.isBefore(_t17)?o.selectStart():o.selectEnd()).anchor.set(r.anchor.key,r.anchor.offset,r.anchor.type);}}else"touch"!==e.pointerType&&u.$setAnchorCellForSelection(n);}),function(){if(u.isSelecting)return;var _e40=function e(){u.isSelecting=!1,a.removeEventListener("pointerup",_e40),a.removeEventListener("pointermove",_n24);},_n24=function n(o){if(1&~o.buttons&&u.isSelecting)return u.isSelecting=!1,a.removeEventListener("pointerup",_e40),void a.removeEventListener("pointermove",_n24);if(!require("Lexical").isDOMNode(o.target))return;var r=null;var s=!(_||h.contains(o.target));if(s)r=ce(h,o.target);else for(var _e41 of document.elementsFromPoint(o.clientX,o.clientY))if(r=ce(h,_e41),r)break;!r||null!==u.focusCell&&r.elem===u.focusCell.elem||(u.setNextFocus({focusCell:r,override:s}),l.dispatchCommand(require("Lexical").SELECTION_CHANGE_COMMAND,void 0));};u.isSelecting=!0,a.addEventListener("pointerup",_e40,u.listenerOptions),a.addEventListener("pointermove",_n24,u.listenerOptions);}();};h.addEventListener("pointerdown",g,u.listenerOptions),u.listenersToRemove.add(function(){h.removeEventListener("pointerdown",g);});var f=function f(e){if(e.detail>=3&&require("Lexical").isDOMNode(e.target)){null!==ae(e.target)&&e.preventDefault();}};h.addEventListener("mousedown",f,u.listenerOptions),u.listenersToRemove.add(function(){h.removeEventListener("mousedown",f);});var C=function C(e){var n=e.target;0===e.button&&require("Lexical").isDOMNode(n)&&l.update(function(){var e=require("Lexical").$getSelection();X(e)&&e.tableKey===u.tableNodeKey&&i.contains(n)&&u.$clearHighlight();});};a.addEventListener("pointerdown",C,u.listenerOptions),u.listenersToRemove.add(function(){a.removeEventListener("pointerdown",C);});var _loop2=function _loop2(){var e=_ref3[0];var n=_ref3[1];u.listenersToRemove.add(l.registerCommand(e,function(e){return Re(l,e,n,o,u);},require("Lexical").COMMAND_PRIORITY_HIGH));};for(var _ref3 of oe){_loop2();}u.listenersToRemove.add(l.registerCommand(require("Lexical").KEY_ESCAPE_COMMAND,function(e){var n=require("Lexical").$getSelection();if(X(n)){var _t18=ne(o,n.focus.getNode());if(null!==_t18)return Me(e),_t18.selectEnd(),!0;}return!1;},require("Lexical").COMMAND_PRIORITY_HIGH));var p=function p(n){return function(){var r=require("Lexical").$getSelection();if(!Se(r,o))return!1;if(X(r))return u.$clearText(),!0;if(require("Lexical").$isRangeSelection(r)){if(!c(ne(o,r.anchor.getNode())))return!1;var _l10=r.anchor.getNode(),_s5=r.focus.getNode(),_i6=o.isParentOf(_l10),_a5=o.isParentOf(_s5);if(_i6&&!_a5||_a5&&!_i6)return u.$clearText(),!0;var _d3=require("LexicalUtils").$findMatchingParent(r.anchor.getNode(),function(e){return require("Lexical").$isElementNode(e);}),_h5=_d3&&require("LexicalUtils").$findMatchingParent(_d3,function(e){return require("Lexical").$isElementNode(e)&&c(e.getParent());});if(!require("Lexical").$isElementNode(_h5)||!require("Lexical").$isElementNode(_d3))return!1;if(n===require("Lexical").DELETE_LINE_COMMAND&&null===_h5.getPreviousSibling())return!0;}return!1;};};for(var _e42 of re)u.listenersToRemove.add(l.registerCommand(_e42,p(_e42),require("Lexical").COMMAND_PRIORITY_CRITICAL));var S=function S(e){var n=require("Lexical").$getSelection();if(!X(n)&&!require("Lexical").$isRangeSelection(n))return!1;var r=o.isParentOf(n.anchor.getNode());if(r!==o.isParentOf(n.focus.getNode())){var _e43=r?"anchor":"focus",_t19=r?"focus":"anchor",_n$t=n[_t19],_l11=_n$t.key,_s6=_n$t.offset,_i7=_n$t.type;return o[n[_e43].isBefore(n[_t19])?"selectPrevious":"selectNext"]()[_t19].set(_l11,_s6,_i7),!1;}return!!Se(n,o)&&!!X(n)&&(e&&(e.preventDefault(),e.stopPropagation()),u.$clearText(),!0);};for(var _e44 of le)u.listenersToRemove.add(l.registerCommand(_e44,S,require("Lexical").COMMAND_PRIORITY_CRITICAL));return u.listenersToRemove.add(l.registerCommand(require("Lexical").CUT_COMMAND,function(o){var r=require("Lexical").$getSelection();if(r){if(!X(r)&&!require("Lexical").$isRangeSelection(r))return!1;require("LexicalClipboard").copyToClipboard(l,require("LexicalUtils").objectKlassEquals(o,ClipboardEvent)?o:null,require("LexicalClipboard").$getClipboardDataFromSelection(r));var _s7=S(o);return require("Lexical").$isRangeSelection(r)?(r.removeText(),!0):_s7;}return!1;},require("Lexical").COMMAND_PRIORITY_CRITICAL)),u.listenersToRemove.add(l.registerCommand(require("Lexical").FORMAT_TEXT_COMMAND,function(n){var r=require("Lexical").$getSelection();if(!Se(r,o))return!1;if(X(r))return u.$formatCells(n),!0;if(require("Lexical").$isRangeSelection(r)){var _t20=require("LexicalUtils").$findMatchingParent(r.anchor.getNode(),function(e){return c(e);});if(!c(_t20))return!1;}return!1;},require("Lexical").COMMAND_PRIORITY_CRITICAL)),u.listenersToRemove.add(l.registerCommand(require("Lexical").FORMAT_ELEMENT_COMMAND,function(e){var n=require("Lexical").$getSelection();if(!X(n)||!Se(n,o))return!1;var r=n.anchor.getNode(),l=n.focus.getNode();if(!c(r)||!c(l))return!1;if(function(e,t){if(X(e)){var _n25=e.anchor.getNode(),_o20=e.focus.getNode();if(t&&_n25&&_o20){var _k9=k(t,_n25,_o20),_e45=_k9[0];return _n25.getKey()===_e45[0][0].cell.getKey()&&_o20.getKey()===_e45[_e45.length-1].at(-1).cell.getKey();}}return!1;}(n,o))return o.setFormat(e),!0;var _k0=k(o,r,l),s=_k0[0],i=_k0[1],a=_k0[2],u=Math.max(i.startRow+i.cell.__rowSpan-1,a.startRow+a.cell.__rowSpan-1),d=Math.max(i.startColumn+i.cell.__colSpan-1,a.startColumn+a.cell.__colSpan-1),h=Math.min(i.startRow,a.startRow),g=Math.min(i.startColumn,a.startColumn),f=new Set();for(var _n26=h;_n26<=u;_n26++)for(var _o21=g;_o21<=d;_o21++){var _r0=s[_n26][_o21].cell;if(f.has(_r0))continue;f.add(_r0),_r0.setFormat(e);var _l12=_r0.getChildren();for(var _n27=0;_n27<_l12.length;_n27++){var _o22=_l12[_n27];require("Lexical").$isElementNode(_o22)&&!_o22.isInline()&&_o22.setFormat(e);}}return!0;},require("Lexical").COMMAND_PRIORITY_CRITICAL)),u.listenersToRemove.add(l.registerCommand(require("Lexical").CONTROLLED_TEXT_INSERTION_COMMAND,function(n){var r=require("Lexical").$getSelection();if(!Se(r,o))return!1;if(X(r))return u.$clearHighlight(),!1;if(require("Lexical").$isRangeSelection(r)){var _s8=require("LexicalUtils").$findMatchingParent(r.anchor.getNode(),function(e){return c(e);});if(!c(_s8))return!1;if("string"==typeof n){var _e46=Ee(l,r,o);if(_e46)return xe(_e46,o,[require("Lexical").$createTextNode(n)]),!0;}}return!1;},require("Lexical").COMMAND_PRIORITY_CRITICAL)),s&&u.listenersToRemove.add(l.registerCommand(require("Lexical").KEY_TAB_COMMAND,function(n){var r=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(r)||!r.isCollapsed()||!Se(r,o))return!1;var l=Te(r.anchor.getNode());return!(null===l||!o.is($e(l)))&&(Me(n),function(n,o){var r="next"===o?"getNextSibling":"getPreviousSibling",l="next"===o?"getFirstChild":"getLastChild",s=n[r]();if(require("Lexical").$isElementNode(s))return s.selectEnd();var i=require("LexicalUtils").$findMatchingParent(n,m);null===i&&d(247);for(var _e47=i[r]();m(_e47);_e47=_e47[r]()){var _n28=_e47[l]();if(require("Lexical").$isElementNode(_n28))return _n28.selectEnd();}var a=require("LexicalUtils").$findMatchingParent(i,ke);null===a&&d(248);"next"===o?a.selectNext():a.selectPrevious();}(l,n.shiftKey?"previous":"next"),!0);},require("Lexical").COMMAND_PRIORITY_CRITICAL)),u.listenersToRemove.add(l.registerCommand(require("Lexical").FOCUS_COMMAND,function(e){return o.isSelected();},require("Lexical").COMMAND_PRIORITY_HIGH)),u.listenersToRemove.add(l.registerCommand(require("Lexical").SELECTION_INSERT_CLIPBOARD_NODES_COMMAND,function(n,o){if(l!==o)return!1;var r=n.nodes,s=n.selection,i=s.getStartEndPoints(),a=X(s),u=require("Lexical").$isRangeSelection(s)&&null!==require("LexicalUtils").$findMatchingParent(s.anchor.getNode(),function(e){return c(e);})&&null!==require("LexicalUtils").$findMatchingParent(s.focus.getNode(),function(e){return c(e);})||a;if(1!==r.length||!ke(r[0])||!u||null===i)return!1;var d=i[0],h=i[1],_W11=W(d),g=_W11[0],f=_W11[1],C=_W11[2],p=require("LexicalUtils").$findMatchingParent(h.getNode(),function(e){return c(e);});if(!(c(g)&&c(p)&&m(f)&&ke(C)))return!1;var _=r[0],_k1=k(C,g,p),S=_k1[0],N=_k1[1],w=_k1[2],_H3=H(_,null,null),b=_H3[0],T=S.length,$=T>0?S[0].length:0;var y=N.startRow,M=N.startColumn,x=b.length,O=x>0?b[0].length:0;if(a){var _e48=z(S,N,w),_t21=_e48.maxRow-_e48.minRow+1,_n29=_e48.maxColumn-_e48.minColumn+1;y=_e48.minRow,M=_e48.minColumn,x=Math.min(x,_t21),O=Math.min(O,_n29);}var A=!1;var v=Math.min(T,y+x)-1,F=Math.min($,M+O)-1,P=new Set();for(var _e49=y;_e49<=v;_e49++)for(var _t22=M;_t22<=F;_t22++){var _n30=S[_e49][_t22];P.has(_n30.cell.getKey())||1===_n30.cell.__rowSpan&&1===_n30.cell.__colSpan||(L(_n30.cell),P.add(_n30.cell.getKey()),A=!0);}var _H4=H(C.getWritable(),null,null),D=_H4[0];var I=x-T+y;for(var _e50=0;_e50<I;_e50++){R(D[T-1][0].cell);}var B=O-$+M;for(var _e51=0;_e51<B;_e51++){E(D[0][$-1].cell,!0,!1);}var _H5=H(C.getWritable(),null,null);D=_H5[0];for(var _e52=y;_e52<y+x;_e52++){var _loop3=function _loop3(){var o=_e52-y,r=_n31-M,l=b[o][r];if(l.startRow!==o||l.startColumn!==r)return 1;var s=l.cell;if(1!==s.__rowSpan||1!==s.__colSpan){var _t23=[],_o23=Math.min(_e52+s.__rowSpan,y+x)-1,_r1=Math.min(_n31+s.__colSpan,M+O)-1;for(var _l13=_e52;_l13<=_o23;_l13++)for(var _e53=_n31;_e53<=_r1;_e53++){var _n32=D[_l13][_e53];_t23.push(_n32.cell);}K(_t23),A=!0;}var i=D[_e52][_n31].cell,a=i.getChildren();s.getChildren().forEach(function(e){if(require("Lexical").$isTextNode(e)){require("Lexical").$createParagraphNode().append(e),i.append(e);}else i.append(e);}),a.forEach(function(e){return e.remove();});};for(var _n31=M;_n31<M+O;_n31++){if(_loop3())continue;}}if(a&&A){var _H6=H(C.getWritable(),null,null),_e54=_H6[0];_e54[N.startRow][N.startColumn].cell.selectEnd();}return!0;},require("Lexical").COMMAND_PRIORITY_CRITICAL)),u.listenersToRemove.add(l.registerCommand(require("Lexical").SELECTION_CHANGE_COMMAND,function(){var n=require("Lexical").$getSelection(),r=require("Lexical").$getPreviousSelection(),s=u.getAndClearNextFocus();if(null!==s){var _e55=s.focusCell;if(X(n)&&n.tableKey===u.tableNodeKey)return(_e55.x!==u.focusX||_e55.y!==u.focusY)&&(u.$setFocusCellForSelection(_e55),!0);if(_e55!==u.anchorCell&&Se(n,o))return u.$setFocusCellForSelection(_e55),!0;}if(u.getAndClearShouldCheckSelection()&&require("Lexical").$isRangeSelection(r)&&require("Lexical").$isRangeSelection(n)&&n.isCollapsed()){var _t24=n.anchor.getNode(),_r10=o.getFirstChild(),_l14=Te(_t24);if(null!==_l14&&m(_r10)){var _t25=_r10.getFirstChild();if(c(_t25)&&o.is(require("LexicalUtils").$findMatchingParent(_l14,function(e){return e.is(o)||e.is(_t25);})))return _t25.selectStart(),!0;}}if(require("Lexical").$isRangeSelection(n)){var _e56=n.anchor,_s9=n.focus,_i8=_e56.getNode(),_a6=_s9.getNode(),_c4=Te(_i8),_d4=Te(_a6),_h6=!(!_c4||!o.is($e(_c4))),_g3=!(!_d4||!o.is($e(_d4))),_f2=_h6!==_g3,_m=_h6&&_g3,_C=n.isBackward();if(_f2){var _e57=n.clone();if(_g3){var _k10=k(o,_d4,_d4),_t26=_k10[0],_n33=_t26[0][0].cell,_r11=_t26[_t26.length-1].at(-1).cell;_e57.focus.set(_C?_n33.getKey():_r11.getKey(),_C?_n33.getChildrenSize():_r11.getChildrenSize(),"element");}else if(_h6){var _k11=k(o,_c4,_c4),_t27=_k11[0],_n34=_t27[0][0].cell,_r12=_t27[_t27.length-1].at(-1).cell;_e57.anchor.set(_C?_r12.getKey():_n34.getKey(),_C?_r12.getChildrenSize():0,"element");}require("Lexical").$setSelection(_e57),ge(l,u);}else if(_m&&(_c4.is(_d4)||(u.$setAnchorCellForSelection(Oe(u,_c4)),u.$setFocusCellForSelection(Oe(u,_d4),!0)),"touch"===u.pointerType&&u.isSelecting&&n.isCollapsed()&&require("Lexical").$isRangeSelection(r)&&r.isCollapsed())){var _e58=Te(r.anchor.getNode());_e58&&!_e58.is(_d4)&&(u.$setAnchorCellForSelection(Oe(u,_e58)),u.$setFocusCellForSelection(Oe(u,_d4),!0),u.pointerType=null);}}else if(n&&X(n)&&n.is(r)&&n.tableKey===o.getKey()){var _e59=require("Lexical").getDOMSelection(a);if(_e59&&_e59.anchorNode&&_e59.focusNode){var _r13=require("Lexical").$getNearestNodeFromDOMNode(_e59.focusNode),_s0=_r13&&!o.isParentOf(_r13),_i9=require("Lexical").$getNearestNodeFromDOMNode(_e59.anchorNode),_a7=_i9&&o.isParentOf(_i9);if(_s0&&_a7&&_e59.rangeCount>0){var _r14=require("Lexical").$createRangeSelectionFromDom(_e59,l);_r14&&(_r14.anchor.set(o.getKey(),n.isBackward()?o.getChildrenSize():0,"element"),_e59.removeAllRanges(),require("Lexical").$setSelection(_r14));}}}return n&&!n.is(r)&&(X(n)||X(r))&&u.tableSelection&&!u.tableSelection.is(r)?(X(n)&&n.tableKey===u.tableNodeKey?u.$updateTableTableSelection(n):!X(n)&&X(r)&&r.tableKey===u.tableNodeKey&&u.$updateTableTableSelection(null),!1):(u.hasHijackedSelectionStyles&&!o.isSelected()?function(e,t){t.$enableHighlightStyle(),he(t.table,function(t){var n=t.elem;t.highlighted=!1,be(e,t),n.getAttribute("style")||n.removeAttribute("style");});}(l,u):!u.hasHijackedSelectionStyles&&o.isSelected()&&ge(l,u),!1);},require("Lexical").COMMAND_PRIORITY_CRITICAL)),u.listenersToRemove.add(l.registerCommand(require("Lexical").INSERT_PARAGRAPH_COMMAND,function(){var e=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(e)||!e.isCollapsed()||!Se(e,o))return!1;var n=Ee(l,e,o);return!!n&&(xe(n,o),!0);},require("Lexical").COMMAND_PRIORITY_CRITICAL)),u;}function ie(e){return e[Q]||null;}function ae(e){var t=e;for(;null!=t;){var _e60=t.nodeName;if("TD"===_e60||"TH"===_e60){var _e61=t._cell;return void 0===_e61?null:_e61;}t=t.parentNode;}return null;}function ce(e,t){if(!e.contains(t))return null;var n=null;for(var _o24=t;null!=_o24;_o24=_o24.parentNode){if(_o24===e)return n;var _t28=_o24.nodeName;"TD"!==_t28&&"TH"!==_t28||(n=_o24._cell||null);}return null;}function ue(e,t){var n=[],o={columns:0,domRows:n,rows:0};var r=ee(e,t).querySelector("tr"),l=0,s=0;for(n.length=0;null!=r;){var _e62=r.nodeName;if("TD"===_e62||"TH"===_e62){var _e63={elem:r,hasBackgroundColor:""!==r.style.backgroundColor,highlighted:!1,x:l,y:s};r._cell=_e63;var _t29=n[s];void 0===_t29&&(_t29=n[s]=[]),_t29[l]=_e63;}else{var _e64=r.firstChild;if(null!=_e64){r=_e64;continue;}}var _t30=r.nextSibling;if(null!=_t30){l++,r=_t30;continue;}var _o25=r.parentNode;if(null!=_o25){var _e65=_o25.nextSibling;if(null==_e65)break;s++,l=0,r=_e65;}}return o.columns=l+1,o.rows=s+1,o;}function de(e,t,n){var o=new Set(n?n.getNodes():[]);he(t,function(t,n){var r=t.elem;o.has(n)?(t.highlighted=!0,we(e,t)):(t.highlighted=!1,be(e,t),r.getAttribute("style")||r.removeAttribute("style"));});}function he(e,n){var o=e.domRows;for(var _e66=0;_e66<o.length;_e66++){var _r15=o[_e66];if(_r15)for(var _o26=0;_o26<_r15.length;_o26++){var _l15=_r15[_o26];if(!_l15)continue;var _s1=require("Lexical").$getNearestNodeFromDOMNode(_l15.elem);null!==_s1&&n(_l15,_s1,{x:_o26,y:_e66});}}}function ge(e,t){t.$disableHighlightStyle(),he(t.table,function(t){t.highlighted=!0,we(e,t);});}var fe=function fe(e,t,n,o,r){var l="forward"===r;switch(r){case"backward":case"forward":return n!==(l?e.table.columns-1:0)?Ne(t.getCellNodeFromCordsOrThrow(n+(l?1:-1),o,e.table),l):o!==(l?e.table.rows-1:0)?Ne(t.getCellNodeFromCordsOrThrow(l?0:e.table.columns-1,o+(l?1:-1),e.table),l):l?t.selectNext():t.selectPrevious(),!0;case"up":return 0!==o?Ne(t.getCellNodeFromCordsOrThrow(n,o-1,e.table),!1):t.selectPrevious(),!0;case"down":return o!==e.table.rows-1?Ne(t.getCellNodeFromCordsOrThrow(n,o+1,e.table),!0):t.selectNext(),!0;default:return!1;}};function me(e,t){var n,o;if(t.startColumn===e.minColumn)n="minColumn";else{if(t.startColumn+t.cell.__colSpan-1!==e.maxColumn)return null;n="maxColumn";}if(t.startRow===e.minRow)o="minRow";else{if(t.startRow+t.cell.__rowSpan-1!==e.maxRow)return null;o="maxRow";}return[n,o];}function Ce(_ref4){var e=_ref4[0],t=_ref4[1];return["minColumn"===e?"maxColumn":"minColumn","minRow"===t?"maxRow":"minRow"];}function pe(e,t,_ref5){var n=_ref5[0],o=_ref5[1];var r=t[o],l=e[r];void 0===l&&d(250,o,String(r));var s=t[n],i=l[s];return void 0===i&&d(250,n,String(s)),i;}function _e(e,t,n,o,r){var l=z(t,n,o),s=function(e,t){var n=t.minColumn,o=t.maxColumn,r=t.minRow,l=t.maxRow;var s=1,i=1,a=1,c=1;var u=e[r],d=e[l];for(var _e67=n;_e67<=o;_e67++)s=Math.max(s,u[_e67].cell.__rowSpan),c=Math.max(c,d[_e67].cell.__rowSpan);for(var _t31=r;_t31<=l;_t31++)i=Math.max(i,e[_t31][n].cell.__colSpan),a=Math.max(a,e[_t31][o].cell.__colSpan);return{bottomSpan:c,leftSpan:i,rightSpan:a,topSpan:s};}(t,l),i=s.topSpan,a=s.leftSpan,c=s.bottomSpan,u=s.rightSpan,h=function(e,t){var n=me(e,t);return null===n&&d(249,t.cell.getKey()),n;}(l,n),_Ce=Ce(h),g=_Ce[0],f=_Ce[1];var m=l[g],C=l[f];"forward"===r?m+="maxColumn"===g?1:a:"backward"===r?m-="minColumn"===g?1:u:"down"===r?C+="maxRow"===f?1:i:"up"===r&&(C-="minRow"===f?1:c);var p=t[C];if(void 0===p)return!1;var _=p[m];if(void 0===_)return!1;var _ref6=function(e,t,n){var o=z(e,t,n),r=me(o,t);if(r)return[pe(e,o,r),pe(e,o,Ce(r))];var l=me(o,n);if(l)return[pe(e,o,Ce(l)),pe(e,o,l)];var s=["minColumn","minRow"];return[pe(e,o,s),pe(e,o,Ce(s))];}(t,n,_),S=_ref6[0],N=_ref6[1],w=Oe(e,S.cell),b=Oe(e,N.cell);return e.$setAnchorCellForSelection(w),e.$setFocusCellForSelection(b,!0),!0;}function Se(e,n){if(require("Lexical").$isRangeSelection(e)||X(e)){var _t32=n.isParentOf(e.anchor.getNode()),_o27=n.isParentOf(e.focus.getNode());return _t32&&_o27;}return!1;}function Ne(e,t){t?e.selectStart():e.selectEnd();}function we(n,o){var r=o.elem,l=n._config.theme;c(require("Lexical").$getNearestNodeFromDOMNode(r))||d(131),require("LexicalUtils").addClassNamesToElement(r,l.tableCellSelected);}function be(n,o){var r=o.elem;c(require("Lexical").$getNearestNodeFromDOMNode(r))||d(131);var l=n._config.theme;require("LexicalUtils").removeClassNamesFromElement(r,l.tableCellSelected);}function Te(t){var n=require("LexicalUtils").$findMatchingParent(t,c);return c(n)?n:null;}function $e(t){var n=require("LexicalUtils").$findMatchingParent(t,ke);return ke(n)?n:null;}function ye(n,o,r,l,s,i,a){var u=require("Lexical").$caretFromPoint(r.focus,s?"previous":"next");if(require("Lexical").$isExtendableTextPointCaret(u))return!1;var d=u;for(var _e68 of require("Lexical").$extendCaretToRange(u).iterNodeCarets("shadowRoot")){if(!require("Lexical").$isSiblingCaret(_e68)||!require("Lexical").$isElementNode(_e68.origin))return!1;d=_e68;}var h=d.getParentAtCaret();if(!c(h))return!1;var g=h,f=function(e){for(var _n35 of require("Lexical").$extendCaretToRange(e).iterNodeCarets("root")){var _o28=_n35.origin;if(c(_o28)){if(require("Lexical").$isChildCaret(_n35))return require("Lexical").$getChildCaret(_o28,e.direction);}else if(!m(_o28))break;}return null;}(require("Lexical").$getSiblingCaret(g,d.direction)),C=require("LexicalUtils").$findMatchingParent(g,ke);if(!C||!C.is(i))return!1;var p=n.getElementByKey(g.getKey()),_=ae(p);if(!p||!_)return!1;var S=Ke(n,C);if(a.table=S,f){if("extend"===l){var _e69=ae(n.getElementByKey(f.origin.getKey()));if(!_e69)return!1;a.$setAnchorCellForSelection(_),a.$setFocusCellForSelection(_e69,!0);}else{var _e70=require("Lexical").$normalizeCaret(f);require("Lexical").$setPointFromCaret(r.anchor,_e70),require("Lexical").$setPointFromCaret(r.focus,_e70);}}else if("extend"===l)a.$setAnchorCellForSelection(_),a.$setFocusCellForSelection(_,!0);else{var _e71=function(e){var n=require("Lexical").$getAdjacentChildCaret(e);return require("Lexical").$isChildCaret(n)?require("Lexical").$normalizeCaret(n):e;}(require("Lexical").$getSiblingCaret(C,u.direction));require("Lexical").$setPointFromCaret(r.anchor,_e71),require("Lexical").$setPointFromCaret(r.focus,_e71);}return Me(o),!0;}function Re(n,o,r,l,s){if(("up"===r||"down"===r)&&function(e){var t=e.getRootElement();if(!t)return!1;return t.hasAttribute("aria-controls")&&"typeahead-menu"===t.getAttribute("aria-controls");}(n))return!1;var i=require("Lexical").$getSelection();if(!Se(i,l)){if(require("Lexical").$isRangeSelection(i)){if("backward"===r){if(i.focus.offset>0)return!1;var _e72=function(e){for(var _n36=e,_o29=e;null!==_o29;_n36=_o29,_o29=_o29.getParent())if(require("Lexical").$isElementNode(_o29)){if(_o29!==_n36&&_o29.getFirstChild()!==_n36)return null;if(!_o29.isInline())return _o29;}return null;}(i.focus.getNode());if(!_e72)return!1;var _n37=_e72.getPreviousSibling();return!!ke(_n37)&&(Me(o),o.shiftKey?i.focus.set(_n37.getParentOrThrow().getKey(),_n37.getIndexWithinParent(),"element"):_n37.selectEnd(),!0);}if(o.shiftKey&&("up"===r||"down"===r)){var _n38=i.focus.getNode();if(!i.isCollapsed()&&("up"===r&&!i.isBackward()||"down"===r&&i.isBackward())){var _s10=require("LexicalUtils").$findMatchingParent(_n38,function(e){return ke(e);});if(c(_s10)&&(_s10=require("LexicalUtils").$findMatchingParent(_s10,ke)),_s10!==l)return!1;if(!_s10)return!1;var _a8="down"===r?_s10.getNextSibling():_s10.getPreviousSibling();if(!_a8)return!1;var _u5=0;"up"===r&&require("Lexical").$isElementNode(_a8)&&(_u5=_a8.getChildrenSize());var _d5=_a8;if("up"===r&&require("Lexical").$isElementNode(_a8)){var _e73=_a8.getLastChild();_d5=_e73||_a8,_u5=require("Lexical").$isTextNode(_d5)?_d5.getTextContentSize():0;}var _h7=i.clone();return _h7.focus.set(_d5.getKey(),_u5,require("Lexical").$isTextNode(_d5)?"text":"element"),require("Lexical").$setSelection(_h7),Me(o),!0;}if(require("Lexical").$isRootOrShadowRoot(_n38)){var _e74="up"===r?i.getNodes()[i.getNodes().length-1]:i.getNodes()[0];if(_e74){if(null!==ne(l,_e74)){var _e75=l.getFirstDescendant(),_t33=l.getLastDescendant();if(!_e75||!_t33)return!1;var _W12=W(_e75),_n39=_W12[0],_W13=W(_t33),_o30=_W13[0],_r16=l.getCordsFromCellNode(_n39,s.table),_i0=l.getCordsFromCellNode(_o30,s.table),_a9=l.getDOMCellFromCordsOrThrow(_r16.x,_r16.y,s.table),_c5=l.getDOMCellFromCordsOrThrow(_i0.x,_i0.y,s.table);return s.$setAnchorCellForSelection(_a9),s.$setFocusCellForSelection(_c5,!0),!0;}}return!1;}{var _l16=require("LexicalUtils").$findMatchingParent(_n38,function(e){return require("Lexical").$isElementNode(e)&&!e.isInline();});if(c(_l16)&&(_l16=require("LexicalUtils").$findMatchingParent(_l16,ke)),!_l16)return!1;var _a0="down"===r?_l16.getNextSibling():_l16.getPreviousSibling();if(ke(_a0)&&s.tableNodeKey===_a0.getKey()){var _e76=_a0.getFirstDescendant(),_n40=_a0.getLastDescendant();if(!_e76||!_n40)return!1;var _W14=W(_e76),_l17=_W14[0],_W15=W(_n40),_s11=_W15[0],_c6=i.clone();return _c6.focus.set(("up"===r?_l17:_s11).getKey(),"up"===r?0:_s11.getChildrenSize(),"element"),Me(o),require("Lexical").$setSelection(_c6),!0;}}}}return"down"===r&&Pe(n)&&s.setShouldCheckSelection(),!1;}if(require("Lexical").$isRangeSelection(i)){if("backward"===r||"forward"===r){return ye(n,o,i,o.shiftKey?"extend":"move","backward"===r,l,s);}if(i.isCollapsed()){var _a1=i.anchor,_u6=i.focus,_d6=require("LexicalUtils").$findMatchingParent(_a1.getNode(),c),_h8=require("LexicalUtils").$findMatchingParent(_u6.getNode(),c);if(!c(_d6)||!_d6.is(_h8))return!1;var _g4=$e(_d6);if(_g4!==l&&null!=_g4){var _e77=ee(_g4,n.getElementByKey(_g4.getKey()));if(null!=_e77)return s.table=ue(_g4,_e77),Re(n,o,r,_g4,s);}var _f3=n.getElementByKey(_d6.__key),_m2=n.getElementByKey(_a1.key);if(null==_m2||null==_f3)return!1;var _C2;if("element"===_a1.type)_C2=_m2.getBoundingClientRect();else{var _e78=require("Lexical").getDOMSelection(te(n));if(null===_e78||0===_e78.rangeCount)return!1;_C2=_e78.getRangeAt(0).getBoundingClientRect();}var _p="up"===r?_d6.getFirstChild():_d6.getLastChild();if(null==_p)return!1;var _2=n.getElementByKey(_p.__key);if(null==_2)return!1;var _S=_2.getBoundingClientRect();if("up"===r?_S.top>_C2.top-_C2.height:_C2.bottom+_C2.height>_S.bottom){Me(o);var _e79=l.getCordsFromCellNode(_d6,s.table);if(!o.shiftKey)return fe(s,l,_e79.x,_e79.y,r);{var _t34=l.getDOMCellFromCordsOrThrow(_e79.x,_e79.y,s.table);s.$setAnchorCellForSelection(_t34),s.$setFocusCellForSelection(_t34,!0);}return!0;}}}else if(X(i)){var _t35=i.anchor,_a10=i.focus,_u7=require("LexicalUtils").$findMatchingParent(_t35.getNode(),c),_h9=require("LexicalUtils").$findMatchingParent(_a10.getNode(),c),_i$getNodes=i.getNodes(),_g5=_i$getNodes[0];ke(_g5)||d(251);var _f4=ee(_g5,n.getElementByKey(_g5.getKey()));if(!c(_u7)||!c(_h9)||!ke(_g5)||null==_f4)return!1;s.$updateTableTableSelection(i);var _m3=ue(_g5,_f4),_C3=l.getCordsFromCellNode(_u7,_m3),_p2=l.getDOMCellFromCordsOrThrow(_C3.x,_C3.y,_m3);if(s.$setAnchorCellForSelection(_p2),Me(o),o.shiftKey){var _k12=k(l,_u7,_h9),_e80=_k12[0],_t36=_k12[1],_n41=_k12[2];return _e(s,_e80,_t36,_n41,r);}return _h9.selectEnd(),!0;}return!1;}function Me(e){e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation();}function xe(e,n,o){var r=require("Lexical").$createParagraphNode();"first"===e?n.insertBefore(r):n.insertAfter(r),r.append.apply(r,o||[]),r.selectEnd();}function Ee(n,o,r){var l=r.getParent();if(!l)return;var s=require("Lexical").getDOMSelection(te(n));if(!s)return;var i=s.anchorNode,a=n.getElementByKey(l.getKey()),u=ee(r,n.getElementByKey(r.getKey()));if(!i||!a||!u||!a.contains(i)||u.contains(i))return;var d=require("LexicalUtils").$findMatchingParent(o.anchor.getNode(),function(e){return c(e);});if(!d)return;var h=require("LexicalUtils").$findMatchingParent(d,function(e){return ke(e);});if(!ke(h)||!h.is(r))return;var _k13=k(r,d,d),g=_k13[0],f=_k13[1],m=g[0][0],C=g[g.length-1][g[0].length-1],p=f.startRow,_=f.startColumn,S=p===m.startRow&&_===m.startColumn,N=p===C.startRow&&_===C.startColumn;return S?"first":N?"last":void 0;}function Oe(e,t){var _e$$lookup=e.$lookup(),n=_e$$lookup.tableNode,o=n.getCordsFromCellNode(t,e.table);return n.getDOMCellFromCordsOrThrow(o.x,o.y,e.table);}function Ae(e,n,o){return ne(e,require("Lexical").$getNearestNodeFromDOMNode(n,o));}function ve(t,n,o){if(!n.theme.tableAlignment)return;var r=[],l=[];for(var _e81 of["center","right"]){var _t37=n.theme.tableAlignment[_e81];_t37&&(_e81===o?l:r).push(_t37);}require("LexicalUtils").removeClassNamesFromElement.apply(require("LexicalUtils"),[t].concat(r)),require("LexicalUtils").addClassNamesToElement.apply(require("LexicalUtils"),[t].concat(l));}var Fe=new WeakSet();function Pe(e){if(e===void 0){e=require("Lexical").$getEditor();}return Fe.has(e);}var _De=function(_t$ElementNode3){function De(e){var _this3;_this3=_t$ElementNode3.call(this,e)||this,_this3.__rowStriping=!1,_this3.__frozenColumnCount=0,_this3.__frozenRowCount=0;return _this3;}babelHelpers.inheritsLoose(De,_t$ElementNode3);De.getType=function getType(){return"table";};var _proto5=De.prototype;_proto5.getColWidths=function getColWidths(){return this.getLatest().__colWidths;};_proto5.setColWidths=function setColWidths(e){var t=this.getWritable();return t.__colWidths=e,t;};De.clone=function clone(e){return new De(e.__key);};_proto5.afterCloneFrom=function afterCloneFrom(e){_t$ElementNode3.prototype.afterCloneFrom.call(this,e),this.__colWidths=e.__colWidths,this.__rowStriping=e.__rowStriping,this.__frozenColumnCount=e.__frozenColumnCount,this.__frozenRowCount=e.__frozenRowCount;};De.importDOM=function importDOM(){return{table:function table(e){return{conversion:Ie,priority:1};}};};De.importJSON=function importJSON(e){return Le().updateFromJSON(e);};_proto5.updateFromJSON=function updateFromJSON(e){return _t$ElementNode3.prototype.updateFromJSON.call(this,e).setRowStriping(e.rowStriping||!1).setFrozenColumns(e.frozenColumnCount||0).setFrozenRows(e.frozenRowCount||0).setColWidths(e.colWidths);};_proto5.exportJSON=function exportJSON(){return babelHelpers["extends"]({},_t$ElementNode3.prototype.exportJSON.call(this),{colWidths:this.getColWidths(),frozenColumnCount:this.__frozenColumnCount?this.__frozenColumnCount:void 0,frozenRowCount:this.__frozenRowCount?this.__frozenRowCount:void 0,rowStriping:this.__rowStriping?this.__rowStriping:void 0});};_proto5.extractWithChild=function extractWithChild(e,t,n){return"html"===n;};_proto5.getDOMSlot=function getDOMSlot(e){var t=Z(e)?e:e.querySelector("table");return Z(t)||d(229),_t$ElementNode3.prototype.getDOMSlot.call(this,e).withElement(t).withAfter(t.querySelector("colgroup"));};_proto5.createDOM=function createDOM(n,o){var r=document.createElement("table");this.__style&&(r.style.cssText=this.__style);var l=document.createElement("colgroup");if(r.appendChild(l),require("Lexical").setDOMUnmanaged(l),require("LexicalUtils").addClassNamesToElement(r,n.theme.table),this.updateTableElement(null,r,n),Pe(o)){var _t38=document.createElement("div"),_o31=n.theme.tableScrollableWrapper;return _o31?require("LexicalUtils").addClassNamesToElement(_t38,_o31):_t38.style.cssText="overflow-x: auto;",_t38.appendChild(r),this.updateTableWrapper(null,_t38,r,n),_t38;}return r;};_proto5.updateTableWrapper=function updateTableWrapper(t,n,o,r){this.__frozenColumnCount!==(t?t.__frozenColumnCount:0)&&function(t,n,o,r){r>0?(require("LexicalUtils").addClassNamesToElement(t,o.theme.tableFrozenColumn),n.setAttribute("data-lexical-frozen-column","true")):(require("LexicalUtils").removeClassNamesFromElement(t,o.theme.tableFrozenColumn),n.removeAttribute("data-lexical-frozen-column"));}(n,o,r,this.__frozenColumnCount),this.__frozenRowCount!==(t?t.__frozenRowCount:0)&&function(t,n,o,r){r>0?(require("LexicalUtils").addClassNamesToElement(t,o.theme.tableFrozenRow),n.setAttribute("data-lexical-frozen-row","true")):(require("LexicalUtils").removeClassNamesFromElement(t,o.theme.tableFrozenRow),n.removeAttribute("data-lexical-frozen-row"));}(n,o,r,this.__frozenRowCount);};_proto5.updateTableElement=function updateTableElement(t,n,o){this.__style!==(t?t.__style:"")&&(n.style.cssText=this.__style),this.__rowStriping!==(!!t&&t.__rowStriping)&&function(t,n,o){o?(require("LexicalUtils").addClassNamesToElement(t,n.theme.tableRowStriping),t.setAttribute("data-lexical-row-striping","true")):(require("LexicalUtils").removeClassNamesFromElement(t,n.theme.tableRowStriping),t.removeAttribute("data-lexical-row-striping"));}(n,o,this.__rowStriping),function(e,t,n,o){var r=e.querySelector("colgroup");if(!r)return;var l=[];for(var _e82=0;_e82<n;_e82++){var _t39=document.createElement("col"),_n42=o&&o[_e82];_n42&&(_t39.style.width=_n42+"px"),l.push(_t39);}r.replaceChildren.apply(r,l);}(n,0,this.getColumnCount(),this.getColWidths()),ve(n,o,this.getFormatType());};_proto5.updateDOM=function updateDOM(t,n,o){var r=this.getDOMSlot(n).element;return n===r===Pe()||(l=n,require("LexicalUtils").isHTMLElement(l)&&"DIV"===l.nodeName&&this.updateTableWrapper(t,n,r,o),this.updateTableElement(t,r,o),!1);var l;};_proto5.exportDOM=function exportDOM(t){var _this5=this;var n=_t$ElementNode3.prototype.exportDOM.call(this,t),o=n.element;return{after:function after(o){if(n.after&&(o=n.after(o)),!Z(o)&&require("LexicalUtils").isHTMLElement(o)&&(o=o.querySelector("table")),!Z(o))return null;ve(o,t._config,_this5.getFormatType());var _H7=H(_this5,null,null),r=_H7[0],l=new Map();for(var _e83 of r)for(var _t40 of _e83){var _e84=_t40.cell.getKey();l.has(_e84)||l.set(_e84,{colSpan:_t40.cell.getColSpan(),startColumn:_t40.startColumn});}var s=new Set();for(var _e85 of o.querySelectorAll(":scope > tr > [data-temporary-table-cell-lexical-key]")){var _t41=_e85.getAttribute("data-temporary-table-cell-lexical-key");if(_t41){var _n43=l.get(_t41);if(_e85.removeAttribute("data-temporary-table-cell-lexical-key"),_n43){l["delete"](_t41);for(var _e86=0;_e86<_n43.colSpan;_e86++)s.add(_e86+_n43.startColumn);}}}var i=o.querySelector(":scope > colgroup");if(i){var _e87=Array.from(o.querySelectorAll(":scope > colgroup > col")).filter(function(e,t){return s.has(t);});i.replaceChildren.apply(i,_e87);}var a=o.querySelectorAll(":scope > tr");if(a.length>0){var _e88=document.createElement("tbody");for(var _t42 of a)_e88.appendChild(_t42);o.append(_e88);}return o;},element:!Z(o)&&require("LexicalUtils").isHTMLElement(o)?o.querySelector("table"):o};};_proto5.canBeEmpty=function canBeEmpty(){return!1;};_proto5.isShadowRoot=function isShadowRoot(){return!0;};_proto5.getCordsFromCellNode=function getCordsFromCellNode(e,t){var n=t.rows,o=t.domRows;for(var _t43=0;_t43<n;_t43++){var _n44=o[_t43];if(null!=_n44)for(var _o32=0;_o32<_n44.length;_o32++){var _r17=_n44[_o32];if(null==_r17)continue;var _l18=_r17.elem,_s12=Ae(this,_l18);if(null!==_s12&&e.is(_s12))return{x:_o32,y:_t43};}}throw new Error("Cell not found in table.");};_proto5.getDOMCellFromCords=function getDOMCellFromCords(e,t,n){var o=n.domRows,r=o[t];if(null==r)return null;var l=r[e<r.length?e:r.length-1];return null==l?null:l;};_proto5.getDOMCellFromCordsOrThrow=function getDOMCellFromCordsOrThrow(e,t,n){var o=this.getDOMCellFromCords(e,t,n);if(!o)throw new Error("Cell not found at cords.");return o;};_proto5.getCellNodeFromCords=function getCellNodeFromCords(e,n,o){var r=this.getDOMCellFromCords(e,n,o);if(null==r)return null;var l=require("Lexical").$getNearestNodeFromDOMNode(r.elem);return c(l)?l:null;};_proto5.getCellNodeFromCordsOrThrow=function getCellNodeFromCordsOrThrow(e,t,n){var o=this.getCellNodeFromCords(e,t,n);if(!o)throw new Error("Node at cords not TableCellNode.");return o;};_proto5.getRowStriping=function getRowStriping(){return Boolean(this.getLatest().__rowStriping);};_proto5.setRowStriping=function setRowStriping(e){var t=this.getWritable();return t.__rowStriping=e,t;};_proto5.setFrozenColumns=function setFrozenColumns(e){var t=this.getWritable();return t.__frozenColumnCount=e,t;};_proto5.getFrozenColumns=function getFrozenColumns(){return this.getLatest().__frozenColumnCount;};_proto5.setFrozenRows=function setFrozenRows(e){var t=this.getWritable();return t.__frozenRowCount=e,t;};_proto5.getFrozenRows=function getFrozenRows(){return this.getLatest().__frozenRowCount;};_proto5.canSelectBefore=function canSelectBefore(){return!0;};_proto5.canIndent=function canIndent(){return!1;};_proto5.getColumnCount=function getColumnCount(){var e=this.getFirstChild();if(!e)return 0;var t=0;return e.getChildren().forEach(function(e){c(e)&&(t+=e.getColSpan());}),t;};return De;}(require("Lexical").ElementNode);function Ke(e,t){var n=e.getElementByKey(t.getKey());return null===n&&d(230),ue(t,n);}function Ie(t){var n=Le();t.hasAttribute("data-lexical-row-striping")&&n.setRowStriping(!0),t.hasAttribute("data-lexical-frozen-column")&&n.setFrozenColumns(1),t.hasAttribute("data-lexical-frozen-row")&&n.setFrozenRows(1);var r=t.querySelector(":scope > colgroup");if(r){var _e89=[];for(var _t44 of r.querySelectorAll(":scope > col")){var _n45=_t44.style.width||"";if(!o.test(_n45)&&(_n45=_t44.getAttribute("width")||"",!/^\d+$/.test(_n45))){_e89=void 0;break;}_e89.push(parseFloat(_n45));}_e89&&n.setColWidths(_e89);}return{after:function after(t){return require("LexicalUtils").$descendantsMatching(t,m);},node:n};}function Le(){return require("Lexical").$applyNodeReplacement(new _De());}function ke(e){return e instanceof _De;}function He(_ref7){var n=_ref7.rows,o=_ref7.columns,r=_ref7.includeHeaders;var l=require("Lexical").$getSelection()||require("Lexical").$getPreviousSelection();if(!l||!require("Lexical").$isRangeSelection(l))return!1;if($e(l.anchor.getNode()))return!1;var s=S(Number(n),Number(o),r);require("LexicalUtils").$insertNodeToNearestRoot(s);var i=s.getFirstDescendant();return require("Lexical").$isTextNode(i)&&i.select(),!0;}function We(e){m(e.getParent())?e.isEmpty()&&e.append(require("Lexical").$createParagraphNode()):e.remove();}function ze(t){ke(t.getParent())?require("LexicalUtils").$unwrapAndFilterDescendants(t,c):t.remove();}function Be(n){require("LexicalUtils").$unwrapAndFilterDescendants(n,m);var _H8=H(n,null,null),o=_H8[0],r=o.reduce(function(e,t){return Math.max(e,t.length);},0),l=n.getChildren();for(var _e90=0;_e90<o.length;++_e90){var _n46=l[_e90];if(!_n46)continue;m(_n46)||d(254,_n46.constructor.name,_n46.getType());var _s13=o[_e90].reduce(function(e,t){return t?1+e:e;},0);if(_s13!==r)for(var _e91=_s13;_e91<r;++_e91){var _e92=a();_e92.append(require("Lexical").$createParagraphNode()),_n46.append(_e92);}}}function Ye(n){if(n.detail<3||!require("Lexical").isDOMNode(n.target))return!1;var o=require("Lexical").$getNearestNodeFromDOMNode(n.target);if(null===o)return!1;var r=require("LexicalUtils").$findMatchingParent(o,function(e){return require("Lexical").$isElementNode(e)&&!e.isInline();});if(null===r)return!1;return!!c(r.getParent())&&(r.select(0),!0);}exports.$computeTableMap=k,exports.$computeTableMapSkipCellCheck=H,exports.$createTableCellNode=a,exports.$createTableNode=Le,exports.$createTableNodeWithDimensions=S,exports.$createTableRowNode=f,exports.$createTableSelection=J,exports.$createTableSelectionFrom=q,exports.$deleteTableColumn=function(e,t){var n=e.getChildren();for(var _e93=0;_e93<n.length;_e93++){var _o33=n[_e93];if(m(_o33)){var _e94=_o33.getChildren();if(t>=_e94.length||t<0)throw new Error("Table column target index out of range");_e94[t].remove();}}return e;},exports.$deleteTableColumnAtSelection=v,exports.$deleteTableColumn__EXPERIMENTAL=F,exports.$deleteTableRowAtSelection=O,exports.$deleteTableRow__EXPERIMENTAL=A,exports.$findCellNode=Te,exports.$findTableNode=$e,exports.$getElementForTableNode=Ke,exports.$getNodeTriplet=W,exports.$getTableAndElementByKey=j,exports.$getTableCellNodeFromLexicalNode=function(t){var n=require("LexicalUtils").$findMatchingParent(t,function(e){return c(e);});return c(n)?n:null;},exports.$getTableCellNodeRect=B,exports.$getTableColumnIndexFromTableCellNode=function(e){return N(e).getChildren().findIndex(function(t){return t.is(e);});},exports.$getTableNodeFromLexicalNodeOrThrow=w,exports.$getTableRowIndexFromTableCellNode=function(e){var t=N(e);return w(t).getChildren().findIndex(function(e){return e.is(t);});},exports.$getTableRowNodeFromTableCellNodeOrThrow=N,exports.$insertTableColumn=function(e,n,o,l,s){if(o===void 0){o=!0;}var i=e.getChildren(),u=[];for(var _e95=0;_e95<i.length;_e95++){var _o34=i[_e95];if(m(_o34))for(var _e96=0;_e96<l;_e96++){var _e97=_o34.getChildren();if(n>=_e97.length||n<0)throw new Error("Table column target index out of range");var _l19=_e97[n];c(_l19)||d(12);var _b=b(_l19,s),_i1=_b.left,_h0=_b.right;var _g6=r.NO_STATUS;(_i1&&_i1.hasHeaderState(r.ROW)||_h0&&_h0.hasHeaderState(r.ROW))&&(_g6|=r.ROW);var _f5=a(_g6);_f5.append(require("Lexical").$createParagraphNode()),u.push({newTableCell:_f5,targetCell:_l19});}}return u.forEach(function(_ref8){var e=_ref8.newTableCell,t=_ref8.targetCell;o?t.insertAfter(e):t.insertBefore(e);}),e;},exports.$insertTableColumnAtSelection=M,exports.$insertTableColumn__EXPERIMENTAL=x,exports.$insertTableRow=function(e,n,o,l,s){if(o===void 0){o=!0;}var i=e.getChildren();if(n>=i.length||n<0)throw new Error("Table row target index out of range");var u=i[n];if(!m(u))throw new Error("Row before insertion index does not exist.");for(var _e98=0;_e98<l;_e98++){var _e99=u.getChildren(),_n47=_e99.length,_l20=f();for(var _o35=0;_o35<_n47;_o35++){var _n48=_e99[_o35];c(_n48)||d(12);var _b2=b(_n48,s),_i10=_b2.above,_u8=_b2.below;var _h1=r.NO_STATUS;var _g7=_i10&&_i10.getWidth()||_u8&&_u8.getWidth()||void 0;(_i10&&_i10.hasHeaderState(r.COLUMN)||_u8&&_u8.hasHeaderState(r.COLUMN))&&(_h1|=r.COLUMN);var _f6=a(_h1,1,_g7);_f6.append(require("Lexical").$createParagraphNode()),_l20.append(_f6);}o?u.insertAfter(_l20):u.insertBefore(_l20);}return e;},exports.$insertTableRowAtSelection=$,exports.$insertTableRow__EXPERIMENTAL=y,exports.$isScrollableTablesActive=Pe,exports.$isTableCellNode=c,exports.$isTableNode=ke,exports.$isTableRowNode=m,exports.$isTableSelection=X,exports.$mergeCells=K,exports.$removeTableRowAtIndex=function(e,t){var n=e.getChildren();if(t>=n.length||t<0)throw new Error("Expected table cell to be inside of table row.");return n[t].remove(),e;},exports.$unmergeCell=function(){var n=require("Lexical").$getSelection();require("Lexical").$isRangeSelection(n)||X(n)||d(188);var o=n.anchor.getNode(),r=require("LexicalUtils").$findMatchingParent(o,c);return c(r)||d(148),L(r);},exports.INSERT_TABLE_COMMAND=u,exports.TableCellHeaderStates=r,exports.TableCellNode=_l24,exports.TableNode=_De,exports.TableObserver=_V,exports.TableRowNode=_h10,exports.applyTableHandlers=se,exports.getDOMCellFromTarget=ae,exports.getTableElement=ee,exports.getTableObserverFromTableElement=ie,exports.registerTableCellUnmergeTransform=function(t){return t.registerNodeTransform(_l24,function(t){if(t.getColSpan()>1||t.getRowSpan()>1){var _W16=W(t),_n49=_W16[2],_k14=k(_n49,t,t),_o36=_k14[0],_r18=_o36.length,_l21=_o36[0].length;var _s14=_n49.getFirstChild();m(_s14)||d(175);var _i11=[];for(var _t45=0;_t45<_r18;_t45++){0!==_t45&&(_s14=_s14.getNextSibling(),m(_s14)||d(175));var _n50=null;for(var _r19=0;_r19<_l21;_r19++){var _l22=_o36[_t45][_r19],_u9=_l22.cell;if(_l22.startRow===_t45&&_l22.startColumn===_r19)_n50=_u9,_i11.push(_u9);else if(_u9.getColSpan()>1||_u9.getRowSpan()>1){c(_u9)||d(176);var _t46=a(_u9.__headerState);null!==_n50?_n50.insertAfter(_t46):require("LexicalUtils").$insertFirst(_s14,_t46);}}}for(var _e100 of _i11)_e100.setColSpan(1),_e100.setRowSpan(1);}});},exports.registerTablePlugin=function(n){return n.hasNodes([_De])||d(255),require("LexicalUtils").mergeRegister(n.registerCommand(u,He,require("Lexical").COMMAND_PRIORITY_EDITOR),n.registerCommand(require("Lexical").SELECTION_INSERT_CLIPBOARD_NODES_COMMAND,function(_ref9,r){var e=_ref9.nodes,o=_ref9.selection;if(n!==r||!require("Lexical").$isRangeSelection(o))return!1;return null!==$e(o.anchor.getNode())&&e.some(ke);},require("Lexical").COMMAND_PRIORITY_EDITOR),n.registerCommand(require("Lexical").CLICK_COMMAND,Ye,require("Lexical").COMMAND_PRIORITY_EDITOR),n.registerNodeTransform(_De,Be),n.registerNodeTransform(_h10,ze),n.registerNodeTransform(_l24,We));},exports.registerTableSelectionObserver=function(e,t){if(t===void 0){t=!0;}var n=new Map(),o=function o(_o37,r,l){var s=ee(_o37,l),i=se(_o37,s,e,t);n.set(r,[i,s]);},r=e.registerMutationListener(_De,function(t){e.getEditorState().read(function(){for(var _ref1 of t){var _e101=_ref1[0];var _r20=_ref1[1];{var _t47=n.get(_e101);if("created"===_r20||"updated"===_r20){var _j=j(_e101),_r21=_j.tableNode,_l23=_j.tableElement;void 0===_t47?o(_r21,_e101,_l23):_l23!==_t47[1]&&(_t47[0].removeListeners(),n["delete"](_e101),o(_r21,_e101,_l23));}else"destroyed"===_r20&&void 0!==_t47&&(_t47[0].removeListeners(),n["delete"](_e101));}}},{editor:e});},{skipInitialization:!1});return function(){r();for(var _ref11 of n){var _ref10$=_ref11[1];var _e102=_ref10$[0];_e102.removeListeners();}};},exports.setScrollableTablesActive=function(e,t){t?Fe.add(e):Fe["delete"](e);};}),null);
__d("LoadContactWithCapabilities_ContactCapabilities2Query_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="24013750788220356"}),null);
__d("LoadContactWithCapabilities_ContactCapabilities2Query.graphql",["LoadContactWithCapabilities_ContactCapabilities2Query_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"id"}],c=[{kind:"Variable",name:"id",variableName:"id"}],d={alias:null,args:null,kind:"ScalarField",name:"message_capabilities2_str",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"LoadContactWithCapabilities_ContactCapabilities2Query",selections:[{alias:null,args:c,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[d],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"LoadContactWithCapabilities_ContactCapabilities2Query",selections:[{alias:null,args:c,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[d,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:b("LoadContactWithCapabilities_ContactCapabilities2Query_facebookRelayOperation"),metadata:{},name:"LoadContactWithCapabilities_ContactCapabilities2Query",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("LoadContactWithCapabilities",["CometRelay","I64","LSDatabaseSingleton","LSVerifyContactExistsWithID","LoadContactWithCapabilities_ContactCapabilities2Query.graphql","Promise","ReQL","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=h!==void 0?h:h=b("LoadContactWithCapabilities_ContactCapabilities2Query.graphql");function a(a,e){var g=(j||(j=d("I64"))).of_string(a),h=c("gkx")("7256")?(k||(k=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(b){return d("LSVerifyContactExistsWithID").runInTransaction(b,(j||(j=d("I64"))).of_string(a),!1,void 0,f.id+":43")}):void 0,m=h!=null?(i||(i=b("Promise"))).all([(k||(k=d("LSDatabaseSingleton"))).LSDatabaseSingleton,h]).then(function(a){var b=a[0];a[1];return d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.tables.contacts).getKeyRange(g))}):(k||(k=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(a){return d("LSVerifyContactExistsWithID").runInTransaction(a,g,!1,void 0,f.id+":59").then(function(){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.contacts).getKeyRange(g))})});e=d("CometRelay").fetchQuery(e,l,{id:a},{fetchPolicy:"store-or-network"}).toPromise().then(function(a){var b;return a==null||(b=a.user)==null?void 0:b.message_capabilities2_str});return{contactCapabilities:e,contactFetch:m,contactSync:h}}g.tryLoadContactAggressively=a}),98);
__d("MAWWATimedBridgeAPI",["FBLogger","MAWMaybeWithTimeout","MAWTimedBridge","MAWWaitForBackendSetup","MAWWebWorkerSingleton","WMIWABridgeApi"],(function(a,b,c,d,e,f,g){"use strict";a={getCurrentUserDeviceList:function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];return h(function(){return c("WMIWABridgeApi").getCurrentUserDeviceList.apply(c("WMIWABridgeApi"),b)},"getCurrentUserDeviceList")},getDevices:function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];return h(function(){return c("WMIWABridgeApi").getDevices.apply(c("WMIWABridgeApi"),b)},"getDevices")},getIdentityKeys:function(){return h(function(){return c("WMIWABridgeApi").getIdentityKeys()},"getIdentityKeys")},queryGroups:function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];return h(function(){return c("WMIWABridgeApi").queryGroups.apply(c("WMIWABridgeApi"),b)},"queryGroups")},removeCurrentDevice:function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];return h(function(){return c("WMIWABridgeApi").removeCurrentDevice.apply(c("WMIWABridgeApi"),b)},"removeCurrentDevice")},removeDevice:function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];return h(function(){return c("WMIWABridgeApi").removeDevice.apply(c("WMIWABridgeApi"),b)},"removeDevice")}};function h(a,b){return d("MAWWaitForBackendSetup").waitForBackendSetup(b).then(function(){return d("MAWMaybeWithTimeout").maybeWithTimeout(a(),d("MAWTimedBridge").DEFAULT_MAW_BRIDGE_TIMEOUT_MS,function(){return d("MAWWebWorkerSingleton").getWorkerHealthStatus().then(function(a){var e=new(d("MAWTimedBridge").MAWBridgeTimeoutError)("WABridged route "+b+" timed out");throw c("FBLogger")("messenger_web").catching(e).mustfixThrow("Failed to complete WABridged route %s in time. workerHealthStatus: %s",b,a.tag)})},b)})}b=a;g["default"]=b}),98);
__d("MAWShareOptimisticGetDevices",["MAWFetchUserJids","MAWWATimedBridgeAPI","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){c("promiseDone")(a,function(a){c("promiseDone")(Promise.all(b.map(async function(b){b=await d("MAWFetchUserJids").fetchUserJids(a,b);return c("MAWWATimedBridgeAPI").getDevices({ignoreDhash:!1,reason:"send-share-attachment: MAWShareOptimisticGetDevices",users:new Set(b)})})))})}g.MAWShareOptimisticGetDevices=a}),98);
__d("MAWShareOptimisticUpload",["FBLogger","I64","MAWMediaManagerUtils","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e,f){return a==null?(i||(i=b("Promise"))).resolve():a.then(function(a){return a==null?(i||(i=b("Promise"))).resolve():e.then(function(b){d("MAWMediaManagerUtils").uploadForXMA(b,(h||(h=d("I64"))).of_string(f),[a.file])})})["catch"](function(a){c("FBLogger")("messenger_e2ee_web").catching(a).warn("XMA optimistic upload failed")})}g.MAWShareOptimisticUpload=a}),98);
__d("MLCUtils",["Lexical","LexicalSelection","LexicalTable","LexicalUtils","err"],(function(a,b,c,d,e,f,g){"use strict";var h={tag:"history-merge"};function i(a,b){a=a.getParent();while(a!==null){if(b(a))return a;a=a.getParent()}return null}function a(a,b){return i(a,b)!==null}function b(a){var b=d("Lexical").$getSelection();if(b!==null)return b;b=a.getEditorState()._selection;if(b===null)return null;a=b.clone();d("Lexical").$setSelection(a);return a}function e(a,b,d){d===void 0&&(d=!0);a=a._nodes.get(b.getType());if(a!==void 0){a=a.klass;if(a!==b){if(d)throw c("err")("Node type is registered but the class reference does not match");return!1}return!0}return!1}function j(a){a=a._nodes;var b=[];for(a of a){var c=a[1];b.push(c.klass)}return b}function f(a,b){var c=[],e=j(a);for(e of e)typeof e==="function"&&c.push(a.registerNodeTransform(e,b));return d("LexicalUtils").mergeRegister.apply(void 0,c)}function k(a){var b=a.anchor,c=a.focus,e=a.anchor.getNode(),f=a.focus.getNode();if(e===f)return e;a=a.isBackward();if(a)return d("LexicalSelection").$isAtNodeEnd(c)?e:f;else return d("LexicalSelection").$isAtNodeEnd(b)?f:e}function l(){var a=d("Lexical").$getSelection();if(a===null)return null;var b;if(d("Lexical").$isRangeSelection(a)||d("LexicalTable").$isTableSelection(a))b=a.focus.getNode();else{a=a.getNodes();b=a[a.length-1]}a=d("LexicalUtils").$findMatchingParent(b,d("LexicalTable").$isTableCellNode);return d("LexicalTable").$isTableCellNode(a)?a:null}function m(){var a=d("Lexical").$getSelection();if(!d("Lexical").$isRangeSelection(a)||!a.isCollapsed())return!1;a=a.anchor.getNode();return d("Lexical").$isElementNode(a)&&d("Lexical").$isBlockElementNode(a)&&a.getTextContentSize()===0}var n=new WeakMap();function o(a,b,c){var d=n.get(a);d===void 0&&(d=new Map(),n.set(a,d));d.set(b,c);return a.dispatchCommand(b,c)}function p(a){var b=d("Lexical").$getSelection(),c=null;if(d("Lexical").$isRangeSelection(b))c=b.focus.getNode();else if(b!==null){c=(b=b.getNodes().at(-1))!=null?b:null}if(c===null||d("Lexical").$isRootOrShadowRoot(c)){b=d("Lexical").$getRoot();b.append.apply(b,a)}else{c=c.getTopLevelElementOrThrow();for(b=a.length-1;b>=0;b--)c.insertAfter(a[b])}}function q(a,b){return(a=(a=n.get(a))==null?void 0:a.get(b))!=null?a:null}function r(a,b,c,d){var e=q(a,b);e!==null&&c(e,a);return a.registerCommand(b,c,d)}g.UPDATE_HISTORY_MERGE_OPTIONS=h;g.$getAncestorPredicate=i;g.$hasAncestorPredicate=a;g.$ifNullRestoreActiveSelection=b;g.lexicalNodeIsRegistered=e;g.lexicalNodes=j;g.registerEveryNodeTransform=f;g.getSelectedNode=k;g.$getActiveTableCellNode=l;g.$isCollapsedSelectionOnEmptyBlockElement=m;g.dispatchCommandWithLVC=o;g.$insertNodesAfterBlock=p;g.lastCommandWithLVCPayload=q;g.registerCommandWithLVC=r}),98);
__d("MLCAutocompleteNode",["Lexical","MLCAutocompletePlugin","MLCUtils","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState,l=function(a){function b(b,c){c=a.call(this,c)||this;c.__uuid=b;return c}babelHelpers.inheritsLoose(b,a);b.clone=function(a){return new b(a.__uuid,a.__key)};b.getType=function(){return"autocomplete"};b.importJSON=function(a){return m(a.uuid)};var c=b.prototype;c.exportJSON=function(){return{type:"autocomplete",uuid:this.__uuid,version:1}};c.updateDOM=function(a,b,c){return!1};c.createDOM=function(a){return document.createElement("span")};c.decorate=function(a){return this.__uuid!==d("MLCAutocompletePlugin").AutocompleteUUID?null:i.jsx(n,{editor:a})};return b}(d("Lexical").DecoratorNode);function m(a){return new l(a)}function a(a){return a instanceof l}function n(a){var b=a.editor;a=k(d("MLCUtils").lastCommandWithLVCPayload(b,d("MLCAutocompletePlugin").AUTOCOMPLETE_SUGGESTION_COMMAND));var c=a[0],e=a[1];j(function(){return d("MLCUtils").registerCommandWithLVC(b,d("MLCAutocompletePlugin").AUTOCOMPLETE_SUGGESTION_COMMAND,function(a){e(a);return!1},d("Lexical").COMMAND_PRIORITY_LOW)},[b]);a=d("MLCAutocompletePlugin").ComponentMap.get(b);if(a===void 0)return null;return c===null||c.length===0?null:i.jsx(a,{suggestion:c})}n.displayName=n.name+" [from "+f.id+"]";g.MLCAutocompleteNode=l;g.$createMLCAutocompleteNode=m;g.$isMLCAutocompleteNode=a}),98);
__d("MLCAutocompletePlugin",["FBLogger","Lexical","LexicalComposerContext","LexicalSelection","LexicalUtils","MLCAutocompleteNode","MLCUtils","react","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h;h||(h=d("react"));var i=h.useEffect,j=new WeakMap(),k=c("uuidv4")(),l=d("Lexical").createCommand("AUTOCOMPLETE_SUGGESTION_COMMAND");function m(a){if(!d("Lexical").$isRangeSelection(a)||!a.isCollapsed())return null;var b=a.getNodes()[0];a=a.anchor;if(!d("Lexical").$isTextNode(b)||!b.isSimpleText()||!d("LexicalSelection").$isAtNodeEnd(a))return null;a=b.getTextContent();return a.trim().length===0?null:a}function a(a){var b=a.Component,e=a.getSuggestion,f=a.onAccept;a=d("LexicalComposerContext").useLexicalComposerContext();var g=a[0];i(function(){if(j.has(g))throw c("FBLogger")("lexical").mustfixThrow("MLCAutocompletePlugin registered twice");j.set(g,b);return function(){j["delete"](g)}},[b,g]);i(function(){var a=null,b=null,c=null,h=null;function i(){var b=a!==null?d("Lexical").$getNodeByKey(a):null;b!==null&&b.isAttached()&&(b.remove(),a=null);h=null;d("MLCUtils").dispatchCommandWithLVC(g,l,null)}function j(b){var c=b.getKey();b.__uuid===k&&c!==a&&b.remove()}function n(){g.update(function(){var f=d("Lexical").$getSelection();if(!d("Lexical").$isRangeSelection(f)){i();return}var j=m(f);if(j==null||j.length===0){i();return}if(j===b)return;var n=e(j);if(c!=null&&c===n)return;if(n==null||n.length===0){i();return}b=j;c=n;j=a!==null?d("Lexical").$getNodeByKey(a):null;if(j==null||!j.isAttached()){j==null||j.remove();var o=f.clone(),p=d("MLCAutocompleteNode").$createMLCAutocompleteNode(k);a=p.getKey();o.insertNodes([p]);d("Lexical").$setSelection(o)}else if(f.anchor.key!==h){j.remove();p=f.clone();p.insertNodes([j]);d("Lexical").$setSelection(p);h=p.anchor.key}d("MLCUtils").dispatchCommandWithLVC(g,l,n)})}function o(){if(a===null)return!1;var b=d("Lexical").$getNodeByKey(a);if(b===null)return!1;if(c===null)return!1;var e=d("Lexical").$createTextNode(c);b.replace(e);e.selectNext();f!=null&&c!=null&&f(c);i();return!0}function p(a){if(o()){a.preventDefault();return!0}return!1}function q(){g.update(function(){i()})}return d("LexicalUtils").mergeRegister(g.registerNodeTransform(d("MLCAutocompleteNode").MLCAutocompleteNode,j),g.registerUpdateListener(n),g.registerCommand((j=d("Lexical")).KEY_TAB_COMMAND,p,j.COMMAND_PRIORITY_HIGH),g.registerCommand(j.KEY_ARROW_RIGHT_COMMAND,p,j.COMMAND_PRIORITY_HIGH),q)},[g,e,f]);return null}a.displayName=a.name+" [from "+f.id+"]";g.ComponentMap=j;g.AutocompleteUUID=k;g.AUTOCOMPLETE_SUGGESTION_COMMAND=l;g.AutocompletePlugin=a}),98);
__d("UnifiedShareSheetMessengerComposer.react",["fbt","CometComposerEditorForLexicalBootstrapPlugin.react","CometLexicalContentEditable.react","CometLexicalPlaceholder.react","FDSText.react","FeedComposerCometTextStyleContext","Lexical","LexicalComposerContext","LexicalErrorBoundary","LexicalHistoryPlugin","LexicalLinkPlugin","LexicalPlainTextPlugin","UnifiedShareSheetConstants","react","react-compiler-runtime","stylex","useUnifiedShareSheetLogger"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));b=j;b.useCallback;var l=b.useEffect;b.useMemo;var m=b.useRef,n={editor:{alignItems:"x6s0dn4",cursor:"x1ed109x",display:"x1lliihq",fontSize:"x6prxxf",height:"x5yr21d",overflowY:"x1odjw0f",position:"x1n2onr6",width:"xh8yej3",$$css:!0},form:{backgroundColor:"xmjcpbm",borderStartStartRadius:"x12ol6y4",borderStartEndRadius:"x180vkcf",borderEndEndRadius:"x1khw62d",borderEndStartRadius:"x709u02",cursor:"x1ed109x",display:"x78zum5",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",maxHeight:"xo1bdp9",minHeight:"xisnujt",paddingTop:"x1y1aw1k",paddingInlineEnd:"xv54qhq",paddingBottom:"xwib8y2",paddingInlineStart:"xf7dkkf",position:"x1n2onr6",$$css:!0},placeholder:{alignItems:"x6s0dn4",display:"x78zum5",height:"x5yr21d",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(27),e=a.editor,f=a.feedLocation,g=a.shareableID,j=a.shareSheetComponentVariant,o=a.sharingComponentName;a=a.xstyle;var p;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(p=d("LexicalComposerContext").createLexicalComposerContext(),b[0]=p):p=b[0];b[1]!==e?(p=[e,p],b[1]=e,b[2]=p):p=b[2];p=p;p=p;var q=c("useUnifiedShareSheetLogger")(),r=q.onShareOptionSelected,s;b[3]!==e||b[4]!==f||b[5]!==r||b[6]!==j||b[7]!==g||b[8]!==o?(q=function(){return e.registerCommand(d("Lexical").FOCUS_COMMAND,function(){r({entry_point:f,shareable_entity_fbid:g,sharing_component_name:o,sharing_component_variant:j});return!0},d("Lexical").COMMAND_PRIORITY_EDITOR)},s=[e,f,r,g,j,o],b[3]=e,b[4]=f,b[5]=r,b[6]=j,b[7]=g,b[8]=o,b[9]=q,b[10]=s):(q=b[9],s=b[10]);l(q,s);b[11]===Symbol["for"]("react.memo_cache_sentinel")?(q=d("LexicalHistoryPlugin").createEmptyHistoryState(),b[11]=q):q=b[11];s=q;q=s;s=m(null);var t=m(null),u;b[12]===Symbol["for"]("react.memo_cache_sentinel")?(u=function(a){a=a!=null?a:null;t.current=a},b[12]=u):u=b[12];u=u;var v;b[13]===Symbol["for"]("react.memo_cache_sentinel")?(v=h._(/*BTDS*/"Add an optional message here..."),b[13]=v):v=b[13];v=v;var w;b[14]!==a?(w=(i||(i=c("stylex"))).props(n.form,a),b[14]=a,b[15]=w):w=b[15];b[16]===Symbol["for"]("react.memo_cache_sentinel")?(a={className:"x78zum5 x1iyjqo2 x5yr21d x1n2onr6"},b[16]=a):a=b[16];var x;b[17]===Symbol["for"]("react.memo_cache_sentinel")?(x=v.toString(),b[17]=x):x=b[17];b[18]===Symbol["for"]("react.memo_cache_sentinel")?(x=k.jsx(d("LexicalPlainTextPlugin").PlainTextPlugin,{ErrorBoundary:d("LexicalErrorBoundary").LexicalErrorBoundary,contentEditable:k.jsx(c("CometLexicalContentEditable.react"),{"aria-placeholder":x,contentEditableRef:u,isInitiallyFocused:!0,placeholder:k.jsx(c("CometLexicalPlaceholder.react"),{xstyle:n.placeholder,children:k.jsx(c("FDSText.react"),{color:"placeholder",numberOfLines:1,type:"body3",children:v})}),spellCheck:!0,tabIndex:0,xstyle:n.editor})}),u=k.jsx(d("LexicalLinkPlugin").LinkPlugin,{}),v=k.jsx(d("LexicalHistoryPlugin").HistoryPlugin,{externalHistoryState:q}),q=k.jsx(c("CometComposerEditorForLexicalBootstrapPlugin.react"),{autoFocus:!0,inputElementRef:t,textAlignment:"left"}),b[18]=x,b[19]=u,b[20]=v,b[21]=q):(x=b[18],u=b[19],v=b[20],q=b[21]);b[22]!==p?(a=k.jsx("div",babelHelpers["extends"]({},a,{children:k.jsx(c("FeedComposerCometTextStyleContext").Provider,{value:d("UnifiedShareSheetConstants").TEXT_STYLE,children:k.jsxs(d("LexicalComposerContext").LexicalComposerContext.Provider,{value:p,children:[x,u,v,q]})})})),b[22]=p,b[23]=a):a=b[23];b[24]!==w||b[25]!==a?(x=k.jsx("form",babelHelpers["extends"]({},w,{method:"POST",ref:s,children:a})),b[24]=w,b[25]=a,b[26]=x):x=b[26];return x}g["default"]=a}),226);
__d("UnifiedShareSheetMessengerLexicalCreateEditor",["CometLexicalDelightNode","CometLexicalEmojiNode","CometLexicalGenericEntityNode","FBLogger","Lexical","LexicalLink","LexicalOverflow","MLCAutocompleteNode","cometLexicalBaseTheme","mlcErrorHandler__INTERNAL"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("Lexical").createEditor({namespace:"UnifiedShareSheetMessengerComposer",nodes:[d("CometLexicalGenericEntityNode").CometLexicalGenericEntityNode,d("CometLexicalEmojiNode").EmojiNode,d("CometLexicalDelightNode").CometLexicalDelightNode,d("MLCAutocompleteNode").MLCAutocompleteNode,d("LexicalOverflow").OverflowNode,d("LexicalLink").LinkNode].filter(Boolean),onError:function(b){return c("mlcErrorHandler__INTERNAL")(b,a,function(a){c("FBLogger")("unfied_share_sheet_messenger_composer").catching(b).mustfix("Lexical Error: %s",a)})},theme:babelHelpers["extends"]({},c("cometLexicalBaseTheme"),{characterLimit:"xayplqe xt0psk2",paragraph:"xdj266r x14z9mp xat24cr x1lziwak x16tdsg8"})});return a}g["default"]=a}),98);
__d("UnifiedShareSheetMessengerMultiSelectionDialogQuery.graphql",["UnifiedShareSheetMessengerMultiSelectionDialogQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a={fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnifiedShareSheetMessengerMultiSelectionDialogQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"UnifiedShareSheetSendMessageButton_viewer"}]}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"UnifiedShareSheetMessengerMultiSelectionDialogQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{"if":null,kind:"Defer",label:"UnifiedShareSheetMessengerMultiSelectionDialogQuery$defer$UnifiedShareSheetSendMessageButton_viewer",selections:[{alias:null,args:null,kind:"ScalarField",name:"chat_tabs_turned_off",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]}],storageKey:null}]},params:{id:b("UnifiedShareSheetMessengerMultiSelectionDialogQuery_facebookRelayOperation"),metadata:{},name:"UnifiedShareSheetMessengerMultiSelectionDialogQuery",operationKind:"query",text:null}};b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("UnifiedShareSheetMultiSelectionContextProvider",["CometRelay","LoadContactWithCapabilities","MAWFetchXMADataUtils","MAWImageUtils","MAWShareOptimisticGetDevices","MAWShareOptimisticUpload","UnifiedShareSheetConstants","UnifiedShareSheetMultiSelectionContext","gkx","promiseDone","react","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useMemo;function a(a){var b=a.children,e=a.initialSelectedTarget,f=a.setSendButtonStatus,g=a.xmaDataPromise,h=d("CometRelay").useRelayEnvironment(),k=c("useAsyncReStore")();a=j(function(){var a=new Map(),b=new Map(),i=g!=null?g.then(function(a){return d("MAWFetchXMADataUtils").makeXMAFileArgs(a)}):null,j=g!=null&&c("gkx")("14072")?g.then(function(a){return i!=null?i:d("MAWFetchXMADataUtils").makeXMAFileArgs(a)}).then(function(a){a.faviconFileArgs;a.headerImageFileArgs;a=a.previewFileArgs;return d("MAWImageUtils").generatePreviewBlobForShare(a)}):null;e!=null&&!a.has(e.id)&&(a.set(e.id,e),b.set(e.id,d("LoadContactWithCapabilities").tryLoadContactAggressively(e.id,h)),c("gkx")("14072")&&c("promiseDone")(d("MAWShareOptimisticUpload").MAWShareOptimisticUpload(j,k,e.id)),d("MAWShareOptimisticGetDevices").MAWShareOptimisticGetDevices(k,[e.id]));var l=function(e){if(e!=null){a.has(e.id)||a.set(e.id,e);a.size>1&&a.size===2?f(d("UnifiedShareSheetConstants").SEND_BUTTON_STATUS.SEND_SEPARATELY):a.size===1&&f(d("UnifiedShareSheetConstants").SEND_BUTTON_STATUS.SEND);var g=a.keys().toArray();d("MAWShareOptimisticGetDevices").MAWShareOptimisticGetDevices(k,g);b.has(e.id)||(b.set(e.id,d("LoadContactWithCapabilities").tryLoadContactAggressively(e.id,h)),c("gkx")("14072")&&c("promiseDone")(d("MAWShareOptimisticUpload").MAWShareOptimisticUpload(j,k,e.id)))}},m=function(b){b!=null&&(a.has(b)&&a["delete"](b),a.size<=1&&a.size===1?f(d("UnifiedShareSheetConstants").SEND_BUTTON_STATUS.SEND):a.size===0&&f(d("UnifiedShareSheetConstants").SEND_BUTTON_STATUS.DISABLED))},n=function(){return j},o=function(){return i};return{AddSeletectTarget:l,RemoveSelectedTarget:m,getXMAFileArgsPromise:o,getXMAPreviewPromise:n,selectedContacts:b,selectedTargets:a}},[k,h,e,f,g]);return i.jsx(c("UnifiedShareSheetMultiSelectionContext").Provider,{value:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("UnifiedShareSheetMessengerMultiSelectionDialog.react",["fbt","CometColumn.react","CometColumnItem.react","CometErrorBoundary.react","CometPlaceholder.react","CometRelay","CometUnifiedShareSheetErrorState.react","FDSDialogHeader.react","FDSDialogPage.react","MWFacebookUserWithoutMessengerAccess","UnifiedShareSheetConstants","UnifiedShareSheetHScrollContainerPlaceholder.react","UnifiedShareSheetMessengerLexicalCreateEditor","UnifiedShareSheetMessengerMultiSelectionDialogQuery$Parameters","UnifiedShareSheetMessengerMultiSelectionDialogQuery.graphql","UnifiedShareSheetMessengerSection.react","UnifiedShareSheetMultiSelectionContextProvider","UnifiedShareSheetSendMessageButtonPlaceholder.react","UnifiedShareSheetSendMessageComposerPlaceholder.react","deferredLoadComponent","react","requireDeferredForDisplay","usePartialViewImpression","usePopPage","useRefetchablePreloadedQuery","useUnifiedShareSheetLogger"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));e=j;var l=e.useCallback,m=e.useMemo,n=e.useState,o=c("deferredLoadComponent")(c("requireDeferredForDisplay")("UnifiedShareSheetMessengerComposer.react").__setRef("UnifiedShareSheetMessengerMultiSelectionDialog.react")),p=c("deferredLoadComponent")(c("requireDeferredForDisplay")("UnifiedShareSheetSendMessageButton.react").__setRef("UnifiedShareSheetMessengerMultiSelectionDialog.react")),q=i!==void 0?i:i=b("UnifiedShareSheetMessengerMultiSelectionDialogQuery.graphql");function a(a){var b=a.props;a=a.queries;var e=c("useRefetchablePreloadedQuery")(c("UnifiedShareSheetMessengerMultiSelectionDialogQuery$Parameters"),a.multipleSelectionQueryReference),f=e[0];e=e[1];e=d("CometRelay").usePreloadedQuery(q,e);var g=a.multipleSelectionQueryReference.variables,i=l(function(){f(g)},[f,g]),j=b.LSresults,r=b.feedLocation,s=b.feedTracking,t=b.hasLightSpeedResults,u=b.initialScrollToIndex,v=b.initialSelectedTarget,w=b.onClose,x=b.shareableID,y=b.storyData,z=b.xmaDataPromise,A=m(function(){return{editor:c("UnifiedShareSheetMessengerLexicalCreateEditor")(),inputState:{__type:"lexical-editor-state-based"}}},[]);A=A.editor;var B=c("useUnifiedShareSheetLogger")(),C=B.onSharesheetImpression,D=c("usePopPage")();B=c("usePartialViewImpression")({onImpressionStart:function(){C({entry_point:b.feedLocation,shareable_entity_fbid:x,sharing_component_name:"hscroll_multiselect_suggested_recipient",sharing_component_variant:"unified_share_sheet"})}});var E=n(d("UnifiedShareSheetConstants").SEND_BUTTON_STATUS.SEND),F=E[0];E=E[1];var G=d("MWFacebookUserWithoutMessengerAccess").useIsFacebookUserWithoutMessengerAccess(),H=h._(/*BTDS*/"Send in Messenger"),I=h._(/*BTDS*/"Send a message");G=G?I:H;return k.jsx(c("UnifiedShareSheetMultiSelectionContextProvider"),{initialSelectedTarget:v,setSendButtonStatus:E,xmaDataPromise:z,children:k.jsx(c("FDSDialogPage.react"),{footer:null,header:k.jsx(c("FDSDialogHeader.react"),{onBack:function(){D&&D()},onClose:w,text:G,withBackButton:!0,withCloseButton:!0}),mobileFullHeight:!1,children:k.jsx(c("CometErrorBoundary.react"),{fallback:function(a){return k.jsx(c("CometUnifiedShareSheetErrorState.react"),{handleRefresh:i})},children:k.jsxs(c("CometColumn.react"),{paddingTop:8,paddingVertical:16,ref:B,spacing:16,children:[k.jsx(c("CometColumnItem.react"),{paddingHorizontal:0,children:k.jsx(c("CometPlaceholder.react"),{fallback:k.jsx(c("UnifiedShareSheetHScrollContainerPlaceholder.react"),{}),name:"UnifiedShareSheetMessengerMultiSelectionDialog.MessengerSection",children:k.jsx(c("UnifiedShareSheetMessengerSection.react"),{LSresults:j,enableMultiSelection:!0,feedLocation:r,feedTracking:s,hasLightSpeedResults:t,initialScrollToIndex:u,initialSelectedIndex:b.initialSelectedIndex,messengerQueryReference:a.messengerQueryReference,onClose:b.onClose,shareableID:b.shareableID,shareableUrl:b.shareableUrl,storyData:y,xmaDataPromise:z})})}),k.jsx(c("CometColumnItem.react"),{paddingHorizontal:16,paddingTop:0,children:k.jsx(c("CometPlaceholder.react"),{fallback:k.jsx(c("UnifiedShareSheetSendMessageComposerPlaceholder.react"),{}),name:"UnifiedShareSheetMessengerMultiSelectionDialog.Composer",children:k.jsx(o,{editor:A,feedLocation:r,shareSheetComponentVariant:"unified_share_sheet",shareableID:x,sharingComponentName:"hscroll_multiselect_message_composer"})})}),k.jsx(c("CometColumnItem.react"),{paddingHorizontal:16,paddingTop:0,children:k.jsx(c("CometPlaceholder.react"),{fallback:k.jsx(c("UnifiedShareSheetSendMessageButtonPlaceholder.react"),{}),name:"UnifiedShareSheetMessengerMultiSelectionDialog.SendMessageButton",children:k.jsx(p,{editor:A,feedLocation:r,feedTracking:s,onClose:w,sendButtonStatus:F,shareableID:b.shareableID,storyData:y,url:b.shareableUrl||"",viewerRef:e==null?void 0:e.viewer,xmaDataPromise:z})})})]})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("UnifiedShareSheetSendMessageButton_viewer.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnifiedShareSheetSendMessageButton_viewer",selections:[{alias:null,args:null,kind:"ScalarField",name:"chat_tabs_turned_off",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("useUnifiedShareSheetPopChat",["SharingConstants","react","react-compiler-runtime","useMWChatOpenTabForGroup","useMWChatOpenTabForPage","useMWChatOpenTabForUser"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(){var a=d("react-compiler-runtime").c(4),b=c("useMWChatOpenTabForUser")(d("SharingConstants").MESSENGER_POPUP_ENTRYPOINT),e=b.openTabByThreadKey;b=c("useMWChatOpenTabForGroup")(d("SharingConstants").MESSENGER_POPUP_ENTRYPOINT);var f=b[2],g=c("useMWChatOpenTabForPage")(d("SharingConstants").MESSENGER_POPUP_ENTRYPOINT);a[0]!==e||a[1]!==f||a[2]!==g?(b=function(a){var b=a.isSecureShare;a=a.target;bb2:switch(a.targetType){case"USER":e(a.targetID,b);break bb2;case"GROUP":f(a.targetID,b);break bb2;case"PAGE":g(a.targetID);break bb2;default:}},a[0]=e,a[1]=f,a[2]=g,a[3]=b):b=a[3];return b}g["default"]=a}),98);
__d("UnifiedShareSheetSendMessageButton.react",["fbt","ix","CometLinkSharingContext","CometLinkSharingUtil","CometMessengerReshareUtil","CometRelay","CometUnifiedShareSheetGating","FBLogger","FDSButton.react","I64","LSMessagingThreadAttributionType","LSSLogger","MAWExternalId","MAWFetchXMAData","MAWSecureComposerText","MAWThreadId","MWMsgMediaTypeLogUtils","MWSharedMsgLogUtils","MWSharedS2SBaseAnnotations","RelayHooks","SharingConstants","SilenceableErrorMessageUtils","UnifiedShareSheetConstants","UnifiedShareSheetMultiSelectionContext","UnifiedShareSheetSendMessageButton_viewer.graphql","WAGetSafeQPLError","WAResultOrError","WAStanzaUtils","cometPushToast","fbicon","getErrorSafe","isStringNullOrEmpty","promiseDone","react","requireDeferred","sendToSentQPLLogger","useMWSendAttachment","useReStore","useUnifiedShareSheetLogger","useUnifiedShareSheetPopChat"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m,n=m||(m=d("react"));e=m;var o=e.useCallback,p=e.useContext,q=e.useMemo,r=c("requireDeferred")("ShareMetricsLoggingController").__setRef("UnifiedShareSheetSendMessageButton.react"),s=h._(/*BTDS*/"Send"),t=h._(/*BTDS*/"Send separately");function a(a){var e=a.editor,f=a.feedLocation,g=a.feedTracking,m=a.onClose,u=a.sendButtonStatus,v=a.shareableID,w=a.storyData,x=a.url,y=a.viewerRef,z=a.xmaDataPromise,A=d("CometMessengerReshareUtil").isXMAFeedPostShareEnabled()||!1;a=p(c("CometLinkSharingContext"));var B=a.getWrappedShareUrlID;a=p(c("UnifiedShareSheetMultiSelectionContext"));var C=a.selectedContacts,D=a.selectedTargets;a=d("CometRelay").useFragment(j!==void 0?j:j=b("UnifiedShareSheetSendMessageButton_viewer.graphql"),y);y=a==null?void 0:a.actor;var E=y==null?void 0:y.id,F=q(function(){return{entry_point:f,feed_tracking:g?g.toString():"",sharing_component_name:"hscroll_multiselect_suggested_recipient"}},[f,g]),G=q(function(){return{entry_point:f,feed_tracking:g?g.toString():"",sharing_component_name:d("CometUnifiedShareSheetGating").shouldEnablePSLoggingIntentFixes()?"hscroll_multiselect_message_composer":"hscroll_multiselect_suggested_recipient"}},[f,g]),H=q(function(){return{entry_point:f,feed_tracking:g!=null?g:[""],sharing_component_name:"hscroll_multiselect_suggested_recipient"}},[g,f]),I=c("useUnifiedShareSheetLogger")(),J=I.onSendMessageButtonInUSSAttempted,K=I.onSendMessageInMessengerSuccessful,L=I.onSendMessageInMessengerUSSFailed,M=I.onSendMessageInMessengerUSSSuccessful;if(E==null||y==null||v==null)throw c("FBLogger")("fb_social_experience_web_sharing").mustfixThrow("Need a viewer id, actor, story, and postID in order to share a story");var N=c("useUnifiedShareSheetPopChat")(),O=(a==null?void 0:a.chat_tabs_turned_off)===!0,P=d("useMWSendAttachment").useMWSendAttachment(),Q=d("useMWSendAttachment").useMWPreloadSendAttachmentComponents(),R=(k||(k=c("useReStore")))();I=d("LSSLogger").useLSSLogger();var S=I.traceLocalSendMessageAsync,T=d("RelayHooks").useRelayEnvironment(),U=o(async function(a,b,e,g,h,i){var j={isTargetE2E:a.isTargetE2E,targetID:a.targetID,targetType:a.targetType,typeName:a.typeName};a="user";var k="one_to_one";switch(j.targetType){case"USER":a="user";k="one_to_one";break;case"GROUP":a="group";k="group";break;case"PAGE":a="page";k="one_to_one";break;default:a="user"}var m=B(w==null?void 0:w.id),n={actorID:E,entryPoint:d("SharingConstants").MESSENGER_POPUP_ENTRYPOINT,message:b,messagingInformTreatmentInfo:w==null?void 0:w.messagingInformTreatmentInfo,shareID:m!=null?m:v,targetID:j.targetID,targetType:a,url:x},o=h!=null?h:await S(),p=d("MAWExternalId").generateExternalId(),q=d("WAStanzaUtils").toStanzaId(p),s=await d("MAWThreadId").getThread(R.tables,(l||(l=d("I64"))).of_string(j.targetID));m=async function(a){try{var h=s!=null?c("LSMessagingThreadAttributionType").FB_FEED_ORGANIC_POST_VIEW_AND_MESSAGE:c("LSMessagingThreadAttributionType").UNKNOWN;if(s!=null){var i=d("MWSharedS2SBaseAnnotations").getMessageTypeParams({messageText:b,sentFromShareSheet:!0,threadType:s.threadType});c("promiseDone")(d("MWSharedMsgLogUtils").getSendToSentAnnotations({attachmentTypeParams:i,messageOfflineThreadingId:q,source:h,thread:s}),function(b){b.string=babelHelpers.extends({},b.string,{attachment_type:"share",message_type:"share",root_component:"UnifiedShareSheetSendMessageButton",surface:f}),b.int={number_targets:e},d("sendToSentQPLLogger").addSendToSentAnnotations(a,b)});o.addAnnotation("surface",f||"unknown");o.addAnnotationInt("number_targets",e);d("MWSharedMsgLogUtils").addSendMessageMetadataForInteractionTrace(o,i,s,"UnifiedShareSheetSendMessageButton")}d("sendToSentQPLLogger").markSendToSentPoint(a,"start_post_sharing");i=await P({attachment:n,contactWithCapabilityPromises:C.has(j.targetID)?C.get(j.targetID):void 0,lssTraceApi:o,offlineMsgId:p,reshareTarget:j,s2sInstanceKey:a,sharingComponent:d("useMWSendAttachment").SharingComponentType.USS_H_SCROLL,source:h,thread:s,xmaDataPromise:z,xmaDataProps:g,xmaMsgExternalId:q});if(i.success===!1)return[d("WAResultOrError").makeError(i.error)];r.onReady(function(a){a.logShareFunnelEvent({fb_entry_point:"send_in_message",fb_feed_location:f,fb_share_type:"share_created",shareable_id:null})});J(babelHelpers.extends({},G,{is_link_sharing_url_used:d("CometLinkSharingUtil").isLinkSharingUrlUsed(x),is_text_attached:!c("isStringNullOrEmpty")(b),receiver_type:k}));d("sendToSentQPLLogger").markSendToSentSuccess(a);M(babelHelpers.extends({},F));K(babelHelpers.extends({},H,{receiver_count:D.size.toString()}));if(!O){N({isSecureShare:(h=i.value.target.isTargetE2E)!=null?h:A,target:i.value.target})}return[d("WAResultOrError").makeResult(i.value.report)]}catch(b){h=c("getErrorSafe")(b);d("sendToSentQPLLogger").addSendToSentAnnotations(a,{string:{share_error:d("WAGetSafeQPLError").getSafeQPLErrorMessage(h),share_error_entrypoint:"UnifiedShareSheet"}});d("sendToSentQPLLogger").markSendToSentFail(a,"unknown_xma_error",h);o.failTrace(h.toString(),!0);throw h}};a=i!=null?i:d("sendToSentQPLLogger").markSendToSentStart(void 0,d("MWMsgMediaTypeLogUtils").AttachmentType.Share);await m(a)},[B,w==null?void 0:w.id,w==null?void 0:w.messagingInformTreatmentInfo,E,v,x,S,R,P,C,z,J,G,M,F,K,H,D.size,O,f,N,A]),V=o(function(a){r.onReady(function(a){a.logShareFunnelEvent({fb_entry_point:"send_in_message",fb_feed_location:f,fb_share_type:"share_failure",shareable_id:null})});L(babelHelpers.extends({},F));a=d("SilenceableErrorMessageUtils").getMetadataFromError(a.error);if(d("SilenceableErrorMessageUtils").shouldHideErrorMessage(a))return;d("cometPushToast").cometPushErrorToast({message:h._(/*BTDS*/"There was a problem sharing this post. Please try again later.")})},[f,F,L]),W=o(async function(){try{var a=e.getEditorState(),b=d("MAWSecureComposerText").getTextFromEditorState(a);m();var f={linkType:"unknown",transportLayerForLogging:"sender_copy",xmaTargetTypeForLogging:null},g=new Map();a=Array.from(D.values()).map(async function(a){var b=d("sendToSentQPLLogger").markSendToSentStart(void 0,d("MWMsgMediaTypeLogUtils").AttachmentType.Share),c=await S();a!=null&&g.set(a,{lssTraceApi:c,s2sInstanceKey:b});return g});await Promise.all(a);x==null&&(g.forEach(function(a){a.lssTraceApi.failTrace("null_xma_url",!0),d("sendToSentQPLLogger").markSendToSentFail(a.s2sInstanceKey,"null_xma_url")}),c("FBLogger")("messenger_web_sharing").mustfix("[MAWShareAttachment] Attachment URL is null"));var h=[];g.forEach(function(a){a.lssTraceApi.addMarkerPoint("xma_data_query_start","AppTiming"),d("sendToSentQPLLogger").markSendToSentPoint(a.s2sInstanceKey,"xma_data_query_start"),h.push(a.s2sInstanceKey)});z!=null?f=await z:f=await d("MAWFetchXMAData").fetchXMAData(T,x,h);g.forEach(function(a){a.lssTraceApi.addMarkerPoint("xma_data_query_end","AppTiming"),d("sendToSentQPLLogger").markSendToSentPoint(a.s2sInstanceKey,"xma_data_query_end")});a=Array.from(D.values()).map(function(a){var c;return a!=null&&U(a,b,D.size,f,(c=g.get(a))==null?void 0:c.lssTraceApi,(c=g.get(a))==null?void 0:c.s2sInstanceKey)});await Promise.all(a)}catch(a){V(a);c("FBLogger")("fb_social_experience_web_sharing").catching(a).mustfix("error on sending message in unified share sheet");return}},[e,m,D,x,z,S,T,U,V]);y=u===d("UnifiedShareSheetConstants").SEND_BUTTON_STATUS.SEND_SEPARATELY?t:s;return n.jsx(c("FDSButton.react"),{disabled:u===d("UnifiedShareSheetConstants").SEND_BUTTON_STATUS.DISABLED,icon:d("fbicon")._(i("505616"),16),label:y,onHoverIn:function(){return Q()},onPress:function(){return c("promiseDone")(W())}})}a.displayName=a.name+" [from "+f.id+"]";g.default=a}),226);