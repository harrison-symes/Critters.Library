;/*FB_PKG_DELIM*/

__d("MWXMessageBubble.react",["MDSSolidMessageBubble.react"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("MDSSolidMessageBubble.react")}),98);
__d("WAOpusRecorderWorkerClient",["WAWebOpusRecorderWorkerResource","WorkerBundleResource"],(function(a,b,c,d,e,f,g){var h=function(){function a(a){this.$1=d("WorkerBundleResource").createDedicatedWebWorker(c("WAWebOpusRecorderWorkerResource")),this.$1.onmessage=a!=null?a:null}var b=a.prototype;b.getWorker=function(){return this.$1};b.postMessage=function(a,b){a={type:"message",message:a};this.$1.postMessage(a,b)};b.addEventListener=function(a,b){this.$1.addEventListener(a,b)};b.removeEventListener=function(a,b){this.$1.addEventListener(a,b)};return a}();function a(){return new h()}function b(a){return new h(a)}g.WAOpusRecorderWorkerClient=h;g.getOpusEncoderWorker=a;g.getOpusDecoderWorker=b}),98);
__d("WAOpusRecorderPlayer",["Promise","WABinary","WABlobToArrayBuffer","WALogger","WAOpusRecorderWorkerClient"],(function(a,b,c,d,e,f,g){var h,i,j,k,l="audio/wav",m,n=0;function o(){n++;m||(m=new window.AudioContext());return m}function p(){n--;if(n===0&&m){try{m.close()["catch"](function(a){d("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["releaseAudioContext close async error: ",""])),a).devConsole(a)})}catch(a){d("WALogger").WARN(i||(i=babelHelpers.taggedTemplateLiteralLoose(["releaseAudioContext close sync error: ",""])),a).devConsole(a)}m=void 0}}a=function(){function a(a){this.oggBlob=a}var c=a.prototype;c.generateBlob=function(){return this.oggBlobToWAVBlob(this.oggBlob,1)};c.oggBlobToWAVBlob=function(a,c){var e=this;c===void 0&&(c=2);var f=c;return new(k||(k=b("Promise")))(function(b){var c=function(a){if(a.data==null){var c=function(a){h.forEach(function(b){b=b[a]||b[0];for(var c=0;c<b.length;c++)i.push(b[c])})};for(var d=0;d<f;d++)c(d);c=e.encodeWAV(i,k,f);d=new Blob([c.readByteArrayView()],{type:l});p();b(d)}else h.push(a.data),f=h[0].length},g=d("WAOpusRecorderWorkerClient").getOpusDecoderWorker(c),h=[],i=[],k=o();c={outputBufferSampleRate:k.sampleRate,bufferLength:4096};g.postMessage({command:"decode-init",config:c});d("WABlobToArrayBuffer").blobToArrayBuffer(a).then(function(a){g.postMessage({command:"decode",pages:new Uint8Array(a)}),g.postMessage({command:"decode-done"})})["catch"](function(a){d("WALogger").WARN(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Player::oggBlobToWAVBlob error: ",""])),a).devConsole(a)})})};c.encodeWAV=function(a,b,c){var e=new(d("WABinary").Binary)(void 0,!0);e.ensureCapacity(44+a.length*2);e.writeString("RIFF");e.writeUint32(36+a.length*2);e.writeString("WAVE");e.writeString("fmt ");e.writeUint32(16);e.writeUint16(1);e.writeUint16(c);e.writeUint32(b.sampleRate);e.writeUint32(b.sampleRate*c*2);e.writeUint16(c*2);e.writeUint16(16);e.writeString("data");e.writeUint32(a.length*2);for(b=0;b<a.length;b++){c=Math.max(-1,Math.min(a[b],1));c*=c>0?32767:32768;e.writeInt16(Math.floor(c))}return e};return a}();g["default"]=a}),98);
__d("WAMaybeTranscodeOggOpusToWavForPlayback",["FBLogger","WABlobToArrayBuffer","WAIsOgg","WAOpusRecorderPlayer","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=function(){return c("FBLogger")("wmi").tags(["audio"])},m=c("justknobx")._("4988");b=new Audio().canPlayType("audio/ogg");var n=b==="probably"||b==="maybe";async function a(a){if(n){l().DEBUG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Ogg playback supported no need to transcode"])));return a}l().DEBUG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Ogg playback is not supported. Start transcoding"])));if(a.size>m){l().MUSTFIX(j||(j=babelHelpers.taggedTemplateLiteralLoose(["blob size too large"])));return a}var b=await d("WABlobToArrayBuffer").blobToArrayBuffer(a);if(!d("WAIsOgg").isOgg(new Uint8Array(b))){l().DEBUG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["blob is not Ogg, skip transcode"])));return a}b=new(c("WAOpusRecorderPlayer"))(a);return b.generateBlob()}g.isOggPlaybackSupported=n;g.maybeTranscodeOggOpusToWavForPlayback=a}),98);