;/*FB_PKG_DELIM*/

__d("MSGRVideoMetadataProvider",["MediaPlaybackCompoundEventUtils","MediaPlaybackMetadataProvider","getVideoBrowserTabId"],(function(a,b,c,d,e,f,g){"use strict";function a(){return{getErrorMetadata:d("MediaPlaybackMetadataProvider").getSNAPLErrorMetadataCommon,getRequiredMetadata:function(a){var b=a.logDataAdditions,e=a.loggingMetaData;a=a.state;var f=e.coreVideoPlayerMetaData.adClientToken==null?"organic":"paid",g=d("MediaPlaybackCompoundEventUtils").getMediaPlaybackAttributionIDV2Root(e);b=d("MediaPlaybackMetadataProvider").getSNAPLRequiredMetadataCommon(a,e,b);a=d("MediaPlaybackMetadataProvider").getSNAPLTagMetadataCommon(a,e);b=babelHelpers["extends"]({},b,{author_id:void 0,browser_tab_id:c("getVideoBrowserTabId")(),current_watching_module:"",encrypted_logging_policy:"encrypted_only",media_id:"-1",nav_chain:a.attribution_id_v2,persistent_id:e.coreVideoPlayerMetaData.videoFBID,sessionizer_nav_chain:g,tracking_token:void 0,tracking_type:f,trackings:void 0});return b},getTagMetadata:function(a){var b=a.logDataAdditions,c=a.loggingMetaData;a=a.state;a=d("MediaPlaybackMetadataProvider").getSNAPLTagMetadataCommon(a,c);c=babelHelpers["extends"]({},a,{video_chaining_depth_level:b.video_chaining_depth_level,video_chaining_parent_video_id:b.video_chaining_parent_video_id,video_chaining_session_id:b.video_chaining_session_id});return c}}}g.creatMSGRVideoMetadataProvider=a}),98);
__d("CometVideoPlayerLoggingConfigForMWChat",["CometVideoPlayerLoggingConfigForDisabledLogging","MSGRVideoMetadataProvider","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return(a==null?void 0:a.disableLogging)===!0?d("CometVideoPlayerLoggingConfigForDisabledLogging").createCometVideoPlayerLoggingConfigForDisabledLogging():{loggingToSNAPLCreateMetadataProvider:d("MSGRVideoMetadataProvider").creatMSGRVideoMetadataProvider,loggingToSNAPLEnabled:(a==null?void 0:a.withMWChatSNAPLGK)===!0?c("gkx")("12325"):void 0}}g.createCometVideoPlayerLoggingConfigForMWChat=a}),98);
__d("E2EELinkPreviewXMADataType",[],(function(a,b,c,d,e,f){a=Object.freeze({FALLBACK:1,FB_CLIENT_FETCH:2,OEMBED:4});f["default"]=a}),66);
__d("FBIconChevronLeftFilled12.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").G,{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsx(d("XPlatReactSVG").Path,{fillRule:"nonzero",d:"M457.905 1075.53a.75.75 0 0 0-1.06-1.06l-4.5 4.5a.75.75 0 0 0 0 1.06l4.5 4.5a.75.75 0 0 0 1.06-1.06l-3.97-3.97 3.97-3.97z"})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("FBIconChevronRightFilled12.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").G,{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsx(d("XPlatReactSVG").Path,{fillRule:"nonzero",d:"M454.095 1083.47a.75.75 0 1 0 1.06 1.06l4.5-4.5a.75.75 0 0 0 0-1.06l-4.5-4.5a.75.75 0 0 0-1.06 1.06l3.97 3.97-3.97 3.97z"})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("FBIconDownloadFilled12.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").G,{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsxs(d("XPlatReactSVG").G,{children:[i.jsx(d("XPlatReactSVG").Path,{d:"m101.18 938.694 3.259-3.258a.256.256 0 0 0-.182-.436h-1.382l-.714-5.278a.256.256 0 0 0-.254-.222h-1.803a.256.256 0 0 0-.253.221L99.125 935h-1.382a.256.256 0 0 0-.181.436l3.257 3.258c.1.1.262.1.362 0",transform:"translate(355 144.5)"}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"nonzero",d:"M102.656 929.655a.756.756 0 0 0-.749-.655h-1.803a.756.756 0 0 0-.749.655l-.666 4.845h-.946a.756.756 0 0 0-.534 1.29l3.257 3.258a.756.756 0 0 0 1.068 0l3.258-3.258a.756.756 0 0 0-.535-1.29h-.945l-.656-4.845zm-4.026 5.277.495-.432h-.436l-.06.432zm-.298.568h.793a.5.5 0 0 0 .495-.432l.697-5.068h1.377l.686 5.067a.5.5 0 0 0 .495.433h.793L101 938.168l-2.668-2.668z",transform:"translate(355 144.5)"}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"nonzero",d:"M96 939v.989c0 .558.453 1.011 1.011 1.011h7.978c.558 0 1.011-.453 1.011-1.011V939a.5.5 0 0 0-1 0v.989a.011.011 0 0 1-.011.011H97.01a.011.011 0 0 1-.011-.011V939a.5.5 0 0 0-1 0z",transform:"translate(355 144.5)"})]})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("FBIconEyeCrossFilled12.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").G,{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsxs(d("XPlatReactSVG").G,{children:[i.jsx(d("XPlatReactSVG").Path,{d:"M102 917.5a1.5 1.5 0 0 0-.294 2.97l1.291-2.583a1.489 1.489 0 0 0-.997-.387",transform:"translate(353.5 157) translate(.5 3.5)"}),i.jsx(d("XPlatReactSVG").Path,{d:"M101.024 921.834a3 3 0 1 1 2.658-5.318l.547-1.093a5.992 5.992 0 0 0-2.218-.423c-3.344 0-5.33 2.694-5.859 3.519a.97.97 0 0 0 0 1.042c.434.68 1.893 2.657 4.38 3.258l.492-.985zm6.827-3.311c-.333-.524-1.247-1.797-2.723-2.66l-.694 1.388A2.98 2.98 0 0 1 105 919a2.998 2.998 0 0 1-2.94 2.997l-.49.981c.145.011.29.022.44.022 3.402 0 5.33-2.635 5.841-3.443a.973.973 0 0 0 0-1.034",transform:"translate(353.5 157) translate(.5 3.5)"}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"nonzero",d:"m100.447 927.724 5-10a.5.5 0 0 0-.894-.448l-5 10a.5.5 0 0 0 .894.448z",transform:"translate(353.5 157)"})]})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("FBIconHdFilled12.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").G,{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsxs(d("XPlatReactSVG").G,{children:[i.jsx(d("XPlatReactSVG").Path,{d:"M104.632 933H104v3h.632c.41 0 .844-.576.844-1.403v-.194c0-.827-.434-1.403-.844-1.403",transform:"translate(354 145)"}),i.jsx(d("XPlatReactSVG").Path,{d:"M107.023 934.598c0 1.627-1.063 2.902-2.391 2.902h-1.382a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 1 .75-.75h1.382c1.328 0 2.391 1.275 2.391 2.902v.196zm-5.523 2.152a.75.75 0 0 1-1.5 0v-1.25h-1.5v1.25a.75.75 0 0 1-1.5 0v-4.5a.75.75 0 0 1 1.5 0V934h1.5v-1.75a.75.75 0 0 1 1.5 0v4.5zm6.44-3.895c-.068-.835-.145-1.332-.416-1.916a3.457 3.457 0 0 0-1.533-1.485.48.48 0 0 0-.047-.02l-.026-.008c-.475-.214-.917-.276-1.792-.345a28.09 28.09 0 0 0-4.254 0c-.768.06-1.277.115-1.883.381A3.46 3.46 0 0 0 96.45 931l-.013.033c-.236.498-.31.985-.377 1.825a25.389 25.389 0 0 0 0 3.287c.068.837.146 1.334.417 1.916.325.63.883 1.17 1.532 1.485a.377.377 0 0 0 .049.02l.024.009c.476.213.918.276 1.793.345a28.103 28.103 0 0 0 4.253 0c.768-.061 1.278-.116 1.884-.382a3.47 3.47 0 0 0 1.54-1.538l.013-.034c.235-.497.308-.983.376-1.824.072-.936.072-2.348 0-3.285v-.002z",transform:"translate(354 145)"})]})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("FBIconInfoCircleFilled12.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").G,{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsx(d("XPlatReactSVG").Path,{d:"M456 1077.5a1.001 1.001 0 0 1 0-2 1.001 1.001 0 0 1 0 2zm1 5.5a.75.75 0 0 1-1.5 0v-3h-.25a.75.75 0 0 1 0-1.5h1a.75.75 0 0 1 .75.75v3.75zm-1-9.5c-3.308 0-6 2.691-6 6s2.692 6 6 6 6-2.691 6-6-2.692-6-6-6z"})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("FBIconShareIosFilled12.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").G,{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsxs(d("XPlatReactSVG").G,{fillRule:"nonzero",children:[i.jsx(d("XPlatReactSVG").Path,{d:"M100.5 535h.475c.29 0 .525.235.525.524v4.952c0 .29-.235.524-.525.524h-4.95a.524.524 0 0 1-.525-.524v-4.952c0-.29.235-.524.525-.524h.475a.5.5 0 0 0 0-1h-.475c-.843 0-1.525.682-1.525 1.524v4.952c0 .842.682 1.524 1.525 1.524h4.95c.843 0 1.525-.682 1.525-1.524v-4.952c0-.842-.682-1.524-1.525-1.524h-.475a.5.5 0 0 0 0 1zm-.354-2.146a.5.5 0 1 0 .708-.708l-2-2a.5.5 0 0 0-.708 0l-2 2a.5.5 0 1 0 .708.708l1.646-1.647 1.646 1.647z",transform:"translate(357.5 543.5)"}),i.jsx(d("XPlatReactSVG").Path,{d:"M99 537.5v-6.875a.5.5 0 0 0-1 0v6.875a.5.5 0 0 0 1 0z",transform:"translate(357.5 543.5)"})]})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("InformTreatmentTitle",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({MISINFORMATION:"misinformation",FALSE_NEWS:"false_news",MISLEADING_NEWS:"misleading_news",MISSING_CONTEXT:"missing_context",ALTERED_MEDIA:"altered_media",AI_GENERATED_CONTENT:"ai_generated_content"});c=a;f["default"]=c}),66);
__d("LSInsertNewMediaSend",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(51).add({offlineAttachmentId:a[0],offlineThreadingId:a[1],inMessageIndex:a[2],attachmentType:a[3],shouldTranscode:a[4],useDoublePhase:a[5],sendByServer:a[6],isSecure:a[7],state:a[4]?b.i64.cast([0,1]):b.i64.cast([0,3])})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMediaSendInsertNewMediaSendStoredProcedure";a.__tables__=["media_send_jobs"];e.exports=a}),null);
__d("LSInsertNewMediaSendStoredProcedure",["LSInsertNewMediaSend","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSInsertNewMediaSend"),e.offlineAttachmentId,e.offlineThreadingId,e.inMessageIndex,e.attachmentType,e.shouldTranscode,e.useDoublePhase,e.sendByServer,e.isSecure);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSLocalApplyOptimisticMessageWithAttachments",["LSArrayGetObjectAt","LSLocalApplyOptimisticMessage","LSSetMessageDisplayedContentTypes"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return c.storedProcedure(b("LSLocalApplyOptimisticMessage"),a[0],a[1],a[2],a[3],a[4],a[5],a[6],void 0,a[7],a[8],a[9],a[10],void 0,a[12],!0).then(function(a){return a=a,d[0]=a[0],d[1]=a[1],a})},function(e){return d[2]=c.i64.of_int32(a[11].length),c.i64.gt(d[2],c.i64.cast([0,0]))?c.loopAsync(d[2],function(e){return d[3]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[11],d[3]).then(function(a){return a=a,d[4]=a[0],d[5]=a[1],a})},function(b){return d[6]=d[4].get("attachment_fbid"),d[7]=d[4].get("offline_attachment_id"),d[8]=d[4].get("attachment_type"),d[9]=d[4].get("filename"),d[10]=d[4].get("filesize"),d[11]=d[4].get("attachment_index"),d[12]=d[4].get("has_media"),d[13]=d[4].get("has_xma"),d[14]=d[4].get("playable_url"),d[15]=d[4].get("playable_url_mime_type"),d[16]=d[4].get("playable_duration_ms"),d[17]=d[4].get("preview_url"),d[18]=d[4].get("preview_url_mime_type"),d[19]=d[4].get("mini_preview"),d[20]=d[4].get("preview_width"),d[21]=d[4].get("preview_height"),d[22]=d[4].get("xma_layout_type"),d[23]=d[4].get("xmas_template_type"),d[24]=d[4].get("cta1_title"),d[25]=d[4].get("cta2_title"),d[26]=d[4].get("cta3_title"),d[27]=d[4].get("image_url"),d[28]=d[4].get("action_url"),d[29]=d[4].get("title_text"),d[30]=d[4].get("subtitle_text"),d[31]=d[4].get("description_text"),d[32]=d[4].get("source_text"),d[33]=d[4].get("original_file_hash"),d[34]=d[4].get("sound_bite_client_sound_key"),d[35]=d[4].get("sound_bite_visual"),d[36]=d[4].get("ephemeral_media_state"),d[37]=d[4].get("waveform_data"),d[38]=d[4].get("sampling_frequency_hz"),d[17]!==void 0?d[39]=d[17]:d[39]=d[14],c.filter(c.db.table(16).fetch([[[a[1],d[0],d[6]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&b.messageId===d[0]&&b.attachmentFbid===d[6]&&c.i64.gt(b.authorityLevel,c.i64.cast([0,20]))}).next().then(function(b){var e=b.done;b.value;return e?c.db.table(16).put({threadKey:a[1],messageId:d[0],attachmentFbid:d[6],timestampMs:d[1],offlineAttachmentId:d[7],attachmentType:d[8],filename:d[9],filesize:d[10],attachmentIndex:d[11],hasMedia:d[12],hasXma:d[13],isSharable:!1,playableUrl:d[14],playableUrlMimeType:d[15],playableDurationMs:d[16],previewUrl:d[39],previewUrlMimeType:d[18],miniPreview:d[19],previewWidth:d[20],previewHeight:d[21],xmaLayoutType:d[22],xmasTemplateType:d[23],cta1Title:d[24],cta2Title:d[25],cta3Title:d[26],imageUrl:d[27],actionUrl:d[28],titleText:d[29],subtitleText:d[30],descriptionText:d[31],sourceText:d[32],ephemeralMediaState:d[36],originalFileHash:d[33],authorityLevel:c.i64.cast([0,20]),samplingFrequencyHz:d[38],waveformData:d[37]}):0})}])}):c.resolve()},function(e){return d[2]=c.i64.of_int32(a[11].length),c.i64.gt(d[2],c.i64.cast([0,0]))?c.storedProcedure(b("LSSetMessageDisplayedContentTypes"),a[1],d[0],d[1],a[3],!1,c.i64.neq(a[6],void 0)):c.resolve()},function(a){return a=[d[0],d[1]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxLocalApplyOptimisticMessageWithAttachmentsStoredProcedure";a.__tables__=["attachments"];e.exports=a}),null);
__d("LSLocalApplyOptimisticMessageWithAttachmentsStoredProcedure",["LSLocalApplyOptimisticMessageWithAttachments","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSLocalApplyOptimisticMessageWithAttachments"),e.senderId,e.threadKey,e.threadType,e.text,e.snippet,e.snippetHasEmoji,e.stickerId,e.replySourceId,e.replySourceType,e.replySourceTypeV2,e.isForwarded,e.attachments,e.mentionData);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSMessageContentType",[],(function(a,b,c,d,e,f){a=Object.freeze({TEXT:1,MEDIA_PREVIEW:2,AUDIO_CLIP:4,XMA_FALLBACK:8,LWA_WAVE:16,ADMIN:32,FILE_ATTACHMENT:64,GLYPH:128,TOMBSTONE:256,STORY_REPLY:512,SINGLE_XMA:1024,HSCROLL_XMA:2048,STICKER:4096,FORWARD_INDICATOR:8192,ANIMATED_IMAGE:16384,NULL_STATE:32768,ENCRYPTION_PLACEHOLDER:65536,FUTUREPROOF_PLACEHOLDER:131072,UNAVAILABLE_PLACEHOLDER:262144,LOCATION_PLACEHOLDER:524288,POLL_CREATION_PLACEHOLDER:1048576,CONTACT_SHARE_PLACEHOLDER:2097152,STORY_MENTION_PLACEHOLDER:4194304,META_AI_MESSAGE_PLACEHOLDER:8388608,BUMP_MESSAGE_PLACEHOLDER:16777216,BUMP_MESSAGE_ORIGINAL_UNAVAILABLE_PLACEHOLDER:33554432,STICKER_RECEIVER_FETCH_UNSUPPORTED_PLACEHOLDER:67108864,RECEIVER_FETCH:134217728,STORY_MENTION:268435456,XMA_RECEIVER_FETCH:536870912,NOTE_MENTION_PLACEHOLDER:1073741824,POST_MENTION_PLACEHOLDER:2147483648,LIVE_LOCATION_PLACEHOLDER:4294967296,MESSENGER_MEMORY_PLACEHOLDER:8589934592,RTC_XMA_PLACEHOLDER:17179869184});f["default"]=a}),66);
__d("LSOptimisticSendXMAMessageForwardFromSecureThread",["LSArrayGetObjectAt","LSIssueNewTaskWithExtraOperationsAndGetTaskID","LSLocalApplyOptimisticMessage","LSSetMessageDisplayedContentTypes","LSUpdateOptimisticAttachmentPreview"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return c.storedProcedure(b("LSLocalApplyOptimisticMessage"),a[0],a[1],a[2],a[3],void 0,void 0,void 0,void 0,void 0,void 0,c.i64.cast([0,3]),a[4],void 0,void 0,!0).then(function(a){return a=a,d[0]=a[0],d[1]=a[1],a})},function(e){return d[3]=c.i64.of_int32(a[6].length),c.i64.gt(d[3],c.i64.cast([0,0]))?c.loopAsync(d[3],function(e){return d[4]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[6],d[4]).then(function(a){return a=a,d[5]=a[0],d[6]=a[1],a})},function(e){return d[7]=d[5].get("attachment_fbid"),d[8]=d[5].get("offline_attachment_id"),d[9]=d[5].get("attachment_type"),d[10]=d[5].get("filename"),d[11]=d[5].get("filesize"),d[12]=d[5].get("attachment_index"),d[13]=d[5].get("has_media"),d[14]=d[5].get("has_xma"),d[15]=d[5].get("playable_url"),d[16]=d[5].get("playable_url_mime_type"),d[17]=d[5].get("playable_duration_ms"),d[18]=d[5].get("preview_url"),d[19]=d[5].get("preview_url_mime_type"),d[20]=d[5].get("mini_preview"),d[21]=d[5].get("preview_width"),d[22]=d[5].get("preview_height"),d[23]=d[5].get("xma_layout_type"),d[24]=d[5].get("xmas_template_type"),d[25]=d[5].get("cta1_title"),d[26]=d[5].get("cta2_title"),d[27]=d[5].get("cta3_title"),d[28]=d[5].get("image_url"),d[29]=d[5].get("action_url"),d[30]=d[5].get("title_text"),d[31]=d[5].get("subtitle_text"),d[32]=d[5].get("description_text"),d[33]=d[5].get("source_text"),d[34]=d[5].get("original_file_hash"),d[35]=d[5].get("sound_bite_client_sound_key"),d[36]=d[5].get("sound_bite_visual"),d[37]=d[5].get("ephemeral_media_state"),c.sequence([function(b){return c.forEach(c.filter(c.db.table(16).fetch([[[a[1],d[0],d[7]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&b.messageId===d[0]&&b.attachmentFbid===d[7]&&c.i64.lt(b.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(16).add({threadKey:a[1],messageId:d[0],attachmentFbid:d[7],timestampMs:d[1],offlineAttachmentId:d[8],attachmentType:d[9],filename:d[10],filesize:d[11],attachmentIndex:d[12],hasMedia:d[13],hasXma:d[14],isSharable:!1,playableUrl:d[15],playableUrlMimeType:d[16],playableDurationMs:d[17],previewUrl:d[18],previewUrlMimeType:d[19],miniPreview:d[20],previewWidth:d[21],previewHeight:d[22],xmaLayoutType:d[23],xmasTemplateType:d[24],cta1Title:d[25],cta2Title:d[26],cta3Title:d[27],imageUrl:d[28],actionUrl:d[29],titleText:d[30],subtitleText:d[31],descriptionText:d[32],sourceText:d[33],ephemeralMediaState:d[37],originalFileHash:d[34],authorityLevel:c.i64.cast([0,20])})},function(e){return c.storedProcedure(b("LSSetMessageDisplayedContentTypes"),a[1],d[0],d[1],a[3],!1,!1)},function(e){return c.storedProcedure(b("LSUpdateOptimisticAttachmentPreview"),a[1],d[0],d[7],d[15],void 0,void 0,d[16],d[18],void 0,void 0,d[19],d[21],d[22],d[30])}])}])}):c.resolve()},function(e){return c.storedProcedure(b("LSIssueNewTaskWithExtraOperationsAndGetTaskID"),c.i64.to_string(a[1]),c.i64.cast([0,46]),"",void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),c.i64.cast([0,1]),void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[2]=a[0],a})},function(b){return c.db.table(31).add({taskId:d[2],threadKey:a[1],offlineThreadingId:d[0],threadAttributionSource:a[5],sendType:c.i64.cast([0,11]),markThreadRead:!1})},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticSendXMAMessageForwardFromSecureThreadStoredProcedure";a.__tables__=["attachments","messages_optimistic_context"];e.exports=a}),null);
__d("LSOptimisticSendXMAMessageForwardFromSecureThreadStoredProcedure",["LSOptimisticSendXMAMessageForwardFromSecureThread","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticSendXMAMessageForwardFromSecureThread"),e.senderId,e.threadKey,e.threadType,e.text,e.isForwarded,e.source,e.attachments);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWConvertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType",["WAArmadilloXMA.pb","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.MEDIA_LABEL:return"media_label";case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.POST_LABEL:return"post_label";case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.NONE:return null;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.WARNING:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.PRIVATE:default:d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Not a valid ExtendedContentOverlayIconGlyph: ",""])),a);return"warning_screens"}}g.convertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType=a}),98);
__d("MAWDownloadMediaInWorkerDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MAWDownloadMediaInWorker").__setRef("MAWDownloadMediaInWorkerDeferred");function a(a){h.onReady(function(b){return b.maybeDownloadMediaInWorker(a)})}function b(a){h.onReady(function(b){return b.downloadMediaInWorker(a)})}function d(a){h.onReady(function(b){return b.maybeDownloadMediaInWorkerWithPlaintextHash(a)})}function e(a){h.onReady(function(b){return b.maybeBulkDownloadMediaInWorker(a)})}g.maybeDownloadMediaInWorker=a;g.downloadMediaInWorker=b;g.maybeDownloadMediaInWorkerWithPlaintextHash=d;g.maybeBulkDownloadMediaInWorker=e}),98);
__d("MAWGetProtocolMsgIdByMsgIdInUI",["I64","LSDatabaseSingleton","MAWBridgeSendAndReceive","MAWMpsGating","MAWThreadMappingUtils","MAWUserJidWrapper","WAJids","WAStanzaUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("WAJids").createJidUtils({platform:"msgr"});async function k(a){var b=await (h||(h=d("LSDatabaseSingleton"))).getLSDatabaseSingletonPromiseOrValue();return b.runInTransaction(async function(b){var c=await b.messages.index("messageId").get(a);if(c==null)return null;b=await d("MAWThreadMappingUtils").getChatJidFromMappingTable(b,c.threadKey);if(b!=null)return{author:j.toUserJid((i||(i=d("I64"))).to_float(c.senderId).toString()),chat:b,externalId:d("WAStanzaUtils").toStanzaId(c.offlineThreadingId)}},"readonly",void 0,void 0,f.id+":33")}a=async function(a){if(d("MAWMpsGating").isFullMpsEnabled())return k(a);if(d("MAWMpsGating").isMpsMessageRendering()){var b=await k(a);return b!=null&&d("MAWUserJidWrapper").getMyUserJid()===b.author?{author:"@me",chat:b.chat,externalId:b.externalId}:b}return l(a)};var l=function(a){return d("MAWBridgeSendAndReceive").sendAndReceive("backend","getProtocolMsgIdByMsgId",{msgId:a})};g.getProtocolMsgIdByMsgIdUI=a}),98);
__d("MAWSecureAttachmentGroupingUtils",["I64","LSIntEnum","MAWSendFileMsgTypes","MessagingAttachmentType","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){a=a.reduce(function(a,b){(h||(h=d("I64"))).equal(b.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))?a.mediaStagingsImage.push(b):a.mediaStagingsOther.push(b);return a},{mediaStagingsImage:[],mediaStagingsOther:[]});var b=a.mediaStagingsImage;a=a.mediaStagingsOther;return[].concat(b,a)}function b(a){var b=new Map();a=a.filter(function(a){return(h||(h=d("I64"))).equal(a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))});var e=a.length;if(e>1){var f=c("uuidv4")();a.forEach(function(a,c){b.set(d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(a.offlineAttachmentId),{groupId:f,groupIndex:c,groupSize:e})})}return b}function e(a){var b=new Map(),d=a.length;if(d>1){var e=c("uuidv4")();a.forEach(function(a,c){b.set(a,{groupId:e,groupIndex:c,groupSize:d})})}return b}g.orderMediaStagingsForGrouping=a;g.generateMediaGroupMetadataForMediaStagings=b;g.generateMediaGroupMetadataForMessageIds=e}),98);
__d("MAWForwardMessage",["MAWBridgeSendAndReceive","MAWCreateOneToOneThread","MAWExternalId","MAWGetEphemeralSettings","MAWGetProtocolMsgIdByMsgIdInUI","MAWMessageSendReporter","MAWMiActOnActThreadReady","MAWSecureAttachmentGroupingUtils","MAWThreadId","WAResultOrError","qpl"],(function(a,b,c,d,e,f,g){"use strict";async function h(a,b,c,e){var f=await d("MAWThreadId").isSecureThreadKey(a.tables,b);if(!f){f=await d("MAWCreateOneToOneThread").call(a,b,void 0,"MAWForwardMessage",e);e=f.jid;return c(e,!0)}f=await d("MAWMiActOnActThreadReady").waitForACTThreadReady(a.tables,b,"MAWForwardMessage");e=f.chatJid;return c(e,!1)}function a(a,b,c,d,e,f){return i(a,b,c,d,e,void 0,f)}async function b(a,b,c,e,f){var g=d("MAWSecureAttachmentGroupingUtils").generateMediaGroupMetadataForMessageIds(c);await Promise.allSettled([c.map(function(c){return i(a,b,c,e,f,g.get(c))})])}function i(a,b,e,f,g,i,j){var k=d("MAWExternalId").generateExternalId();return h(a,b,function(h,l){return d("MAWGetProtocolMsgIdByMsgIdInUI").getProtocolMsgIdByMsgIdUI(e).then(function(e){if(e!=null)return d("MAWGetEphemeralSettings").getEphemeralSetting(h,b).then(function(b){b=d("MAWBridgeSendAndReceive").sendAndReceive("backend","forwardMsg",{args:{args:{mediaGroupMetadata:i,source:f},chatJid:h,ephemeralSetting:b!=null?b:void 0,externalId:k,isFirstMsg:l,protocolMsgId:e,textWithSubstitutions:j},qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:g});return d("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:h,externalId:k},b,{qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:g},a)});else return d("WAResultOrError").makeResult({description:"unexpected null protocolMsgId",messageType:"fixMe"})})},g)}g.maybeCreateNewThreadAndCallback=h;g.forwardMessage=a;g.forwardMessageBatch=b}),98);
__d("MAWForwardMessageFromSecureThread.react",["FBLogger","I64","LSFactory","LSHotEmojiSize","LSInsertNewMediaSendStoredProcedure","LSIntEnum","LSLocalApplyOptimisticMessageWithAttachmentsStoredProcedure","LSMailboxType","LSMarkSubJobCompletedV2StoredProcedure","LSOptimisticSendMessageV2StoredProcedure","LSOptimisticSendXMAMessageForwardFromSecureThreadStoredProcedure","LSShape","LSVec","MAWBridgeSendAndReceive","MAWDbMedia","MAWMpsGating","MWPComposerMediaUploadUtil","MWPOpenComposerUtils","MessagePowerUp","MessagingAttachmentType","OfflineThreadingId","ReQL","WAHashUtils","cr:2472","cr:332","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(){return c("gkx")("11351")||d("MAWMpsGating").isMpsMessageRendering()};function k(a,b,c){return{action_url:void 0,attachment_fbid:b,attachment_index:(h||(h=d("I64"))).zero,attachment_type:a.attachmentType,cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,description_text:void 0,filename:a.filename,filesize:void 0,has_media:!0,has_xma:!1,image_url:void 0,mini_preview:void 0,offline_attachment_id:b,original_file_hash:void 0,playable_duration_ms:a.playableDurationMs,playable_url:URL.createObjectURL(c),playable_url_mime_type:c.type,preview_height:void 0,preview_url:void 0,preview_url_mime_type:void 0,preview_width:void 0,source_text:void 0,subtitle_text:void 0,title_text:void 0,xma_layout_type:void 0,xmas_template_type:void 0}}function l(a,b,c,e){var f;return{action_url:(f=b==null?void 0:b.actionUrl)!=null?f:b==null?void 0:b.nativeUrl,attachment_fbid:c,attachment_index:(h||(h=d("I64"))).zero,attachment_type:a.attachmentType,cta1_title:a.cta1Title,cta2_title:a.cta2Title,cta3_title:a.cta3Title,description_text:a.descriptionText,filename:a.filename,filesize:a.filesize,has_media:!1,has_xma:!0,image_url:void 0,mini_preview:void 0,offline_attachment_id:c,original_file_hash:void 0,playable_duration_ms:void 0,playable_url:e!=null?URL.createObjectURL(e):void 0,playable_url_mime_type:e==null?void 0:e.type,preview_height:void 0,preview_url:e!=null?URL.createObjectURL(e):void 0,preview_url_mime_type:e==null?void 0:e.type,preview_width:void 0,source_text:a.sourceText,subtitle_text:a.subtitleText,title_text:a.titleText,xma_layout_type:a.xmaLayoutType,xmas_template_type:a.xmasTemplateType}}function m(a,b,e,f,g,h,i,j){j=c("LSFactory")(j);return c("LSOptimisticSendXMAMessageForwardFromSecureThreadStoredProcedure")(j,{attachments:c("LSVec").ofArray([d("LSShape").ofRecord(h)]),isForwarded:g,senderId:a,source:i,text:f!=null?f:void 0,threadKey:b,threadType:e}).then(function(){return Promise.resolve()})}function n(a,b){return a==null||b==null?void 0:{amplitudes:b.split(",").map(parseFloat),sampling_freq:a}}function o(a,b,e,g,j,k,l,m,o){var p=c("LSFactory")(m);return c("LSLocalApplyOptimisticMessageWithAttachmentsStoredProcedure")(p,{attachments:c("LSVec").ofArray([d("LSShape").ofRecord(b)]),isForwarded:k,senderId:l,threadKey:j,threadType:g}).then(function(a){var b=a[0];a[1];return m.messages_optimistic_context.add({externalAttachmentUrl:void 0,initiatingSource:void 0,markThreadRead:!1,messageId:void 0,offlineThreadingId:b,platformRef:void 0,platformToken:void 0,replySourceId:void 0,replySourceType:void 0,sendType:void 0,skipUrlPreviewGen:void 0,taskId:(h||(h=d("I64"))).of_string(b),threadAttributionSource:o,threadKey:j}).then(function(){return Promise.resolve(b)})}).then(function(a){var e=b.attachment_fbid;return c("LSInsertNewMediaSendStoredProcedure")(p,{attachmentType:b.attachment_type,inMessageIndex:(h||(h=d("I64"))).zero,isSecure:!1,offlineAttachmentId:e,offlineThreadingId:a,sendByServer:!1,shouldTranscode:!1,useDoublePhase:!1}).then(function(){return Promise.resolve([a,e])})}).then(function(g){var j=g[0],k=g[1];g=function(b,e){if(e==null||e.length===0)return;c("promiseDone")(a.runInTransaction(function(a){var b=c("LSFactory")(a);return c("LSMarkSubJobCompletedV2StoredProcedure")(b,{fbid:(h||(h=d("I64"))).of_string(e),offlineAttachmentId:k}).then(function(){return d("MWPOpenComposerUtils").resumeSendJob(b,j)})},"readwrite",void 0,void 0,f.id+":227"))};return d("MWPComposerMediaUploadUtil").startUpload(void 0,void 0,g,void 0,(h||(h=d("I64"))).equal(b.attachment_type,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO)),[e],[k],void 0,void 0,n(b.sampling_frequency_hz,b.waveform_data),void 0,void 0)})}async function a(a,e,g,p,q,r,s,t,u){if(r!=null){var v=r.attachmentType;if(!((h||(h=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO))||(h||(h=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))||(h||(h=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))||(h||(h=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE))||(h||(h=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE))||(h||(h=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA))))throw c("FBLogger")("messenger_web_sharing").mustfixThrow("We do not support forwarding this type");var w=null;if(!(h||(h=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA))){isFinite(r.attachmentFbid)?w=await d("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByMediaId",{description:"MAWForwardMessageFromSecureThread",mediaId:d("MAWDbMedia").convertNumberToMediaId(Number.parseInt(r.attachmentFbid,10))}):w=await d("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByHashedPlaintextHash",{description:"MAWForwardMessageFromSecureThread",plaintextHash:d("WAHashUtils").stringToPlaintextHash(r.attachmentFbid)}).then(function(a){b("cr:332")!=null&&void b("cr:332").runBlobReadAndCompareResult({fileName:r.attachmentFbid,idbBlob:a});return a});if(w==null)return}await a.runInTransaction(function(f){switch(!0){case(h||(h=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO)):if(w==null)throw c("FBLogger")("messenger_web_sharing").mustfixThrow("Blob can not be null for MessagingAttachmentType.AUDIO");var x=new File([w],"mediaForwardedFromSecureThread",{type:w.type}),y=d("OfflineThreadingId").createOfflineThreadingID();y=d("MWPComposerMediaUploadUtil").getAudioAttachment(y,x,(h||(h=d("I64"))).to_int32((y=r.playableDurationMs)!=null?y:(h||(h=d("I64"))).zero)/1e3,n(r.samplingFrequencyHz!=null?(h||(h=d("I64"))).to_int32(r.samplingFrequencyHz):void 0,r.waveformData));return o(a,y,x,g,e,q,s,f,t);case(h||(h=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA)):return d("ReQL").firstAsync(d("ReQL").fromTableDescending(f.attachment_ctas).getKeyRange((y=r.defaultCtaId)!=null?y:(h||(h=d("I64"))).zero)).then(function(a){var e,f=r.xmaPreviewFbid;if(f==null){c("FBLogger")("messenger_web_sharing").mustfix("XMA preview fbid is null when forwarding XMA");return Promise.resolve([a,void 0])}if(j())e=d("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByHashedPlaintextHash",{description:"MAWForwardMessageFromSecureThread",plaintextHash:d("WAHashUtils").stringToPlaintextHash(f)}).then(function(a){b("cr:332")!=null&&void b("cr:332").runBlobReadAndCompareResult({fileName:r.attachmentFbid,idbBlob:a});return a});else if(c("gkx")("7858"))isFinite(r.xmaPreviewFbid)?(c("FBLogger")("messenger_web_sharing").warn("XMA preview fbid is not a plaintextHash when forwarding XMA"),e=d("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByMediaId",{description:"MAWForwardMessageFromSecureThread",mediaId:d("MAWDbMedia").convertNumberToMediaId(Number.parseInt(f,10))})):e=d("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByHashedPlaintextHash",{description:"MAWForwardMessageFromSecureThread",plaintextHash:d("WAHashUtils").stringToPlaintextHash(f)}).then(function(a){b("cr:332")!=null&&void b("cr:332").runBlobReadAndCompareResult({fileName:r.attachmentFbid,idbBlob:a});return a});else try{e=d("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByMediaId",{description:"MAWForwardMessageFromSecureThread",mediaId:d("MAWDbMedia").convertNumberToMediaId(Number.parseInt(f,10))})}catch(b){c("FBLogger")("messenger_web_sharing").mustfix("XMA preview fbid is not a valid mediaId when forwarding XMA %s",b);return Promise.resolve([a,void 0])}return e.then(function(b){return Promise.resolve([a,b])}).catch(function(b){c("FBLogger")("messenger_web_sharing").catching(b).warn("Unable to getBlobDataUrlByXMAId, from MAWForwardMessageFromSecureThread");return Promise.resolve([a,void 0])})}).then(function(a){var c=a[0];a=a[1];var h=null;a!=null&&(h=new File([a],"xmaForwardedFromSecureThread",{type:a.type}));a=d("OfflineThreadingId").createOfflineThreadingID();c=l(r,c,a,h);a=p.text;h=b("cr:2472")==null||a==null?a:b("cr:2472").unvault(a);return m(s,e,g,u!=null?u:h,q,c,t,f)});case(h||(h=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE)):case(h||(h=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)):case(h||(h=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)):case(h||(h=d("I64"))).equal(v,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE)):if(w==null)throw c("FBLogger")("messenger_web_sharing").mustfixThrow("Blob can not be null for MessagingAttachmentType.AUDIO");y=new File([w],(x=r.filename)!=null?x:"mediaForwardedFromSecureThread",{type:w.type});x=d("OfflineThreadingId").createOfflineThreadingID();x=k(r,x,y);return o(a,x,y,g,e,q,s,f,t);default:throw c("FBLogger")("messenger_web_sharing").mustfixThrow("We do not support forwarding this type")}},"readwrite",void 0,void 0,f.id+":342")}else{var x=p.text;if(x==null)throw c("FBLogger")("messenger_web_sharing").mustfixThrow("We do not support forwarding this type");var y=b("cr:2472")==null?x:b("cr:2472").unvault(x),z=y==="\ud83d\udc4d"&&p.hotEmojiSize!=null&&(h||(h=d("I64"))).equal(p.hotEmojiSize,(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL)),A=z?(h||(h=d("I64"))).of_string("369239263222822"):void 0;await a.runInTransaction(function(a){return c("LSOptimisticSendMessageV2StoredProcedure")(c("LSFactory")(a),{extraSendMessageParams:d("LSShape").ofRecord({calculate_denormalizations:!1,is_forwarded:q,mark_read:!1,power_up_style:(i||(i=d("LSIntEnum"))).ofNumber(c("MessagePowerUp").NONE),source:t,sticker_id:A}),mailboxType:i.ofNumber(c("LSMailboxType").MESSENGER),senderId:s,text:z?void 0:u!=null?u:y,threadKey:e,threadType:g})},"readwrite",void 0,void 0,f.id+":587")}}g.getMediaAttachment=k;g.uploadAndSendMediaToOpenThread=o;g.forwardMessage=a}),98);
__d("MAWFowardMessageFromOpenThread",["FBLogger","I64","LSIntEnum","MAWBridgeSendAndReceive","MAWDocumentPreProcess","MAWFetchXMABlob","MAWFetchXMAData","MAWFetchXMADataUtils","MAWForwardMessage","MAWGetEphemeralSettings","MAWGetImageSpec","MAWImagePreProcess","MAWMessageSendReporter","MAWUnshimUrl","MAWVideoUtils","MessagingAttachmentType","ReQL","WAArmadilloXMA.pb","WABlobToArrayBuffer","qpl","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j="369239263222822",k="369239343222814",l="369239383222810";function m(a){return a===j||a===k||a===l}function n(a,b){return Promise.all([d("MAWGetImageSpec").getImageSpec_DEPRECATED(a),Promise.resolve(a),b.arrayBuffer(),d("MAWGetImageSpec").getImageSpec_DEPRECATED(b)]).then(async function(a){var b=a[0],c=a[1],e=a[2];a=a[3];return{file:c,imageSpec:b,plaintext:await d("WABlobToArrayBuffer").blobToArrayBuffer(c),thumbnailUrlAndSpec:{duration:void 0,height:a.height,jpegThumbnail:e,width:a.width},type:"image"}})}function o(a){return d("MAWVideoUtils").getVideoThumbnailUrlAndSpec(a).then(async function(b){return{file:a,plaintext:await d("WABlobToArrayBuffer").blobToArrayBuffer(a),thumbnailUrlAndSpec:b,type:"video"}})}async function p(a,b){a=await d("MAWFetchXMABlob").fetchBlob({descriptionForLogging:"MAWFowardMessageFromOpenThread",url:a});b=a==null?void 0:new File([a],b,{type:a.type});a=b!=null?await d("MAWGetImageSpec").getImageSpec_DEPRECATED(b):null;return b!=null&&a!=null?{file:b,height:a.height,width:a.width}:void 0}async function q(a,b,c){c=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(c.tables.attachment_ctas).getKeyRange(a));return c==null||b==null&&c.actionUrl==null?null:{actionUrl:(a=c==null?void 0:c.actionUrl)!=null?a:void 0,buttonType:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE,nativeUrl:(a=c==null?void 0:c.actionUrl)!=null?a:void 0,title:b!=null?b:void 0}}async function r(a,b,e,f){var g=await s(b,e);if((g==null?void 0:g.actionUrl)==null){d("sendToSentQPLLogger").markSendToSentFail(f,"null_xma_url");throw c("FBLogger")("messenger_web_sharing").mustfixThrow("Cannot forward XMA to secure threads without a defaultCTA and actionUrl")}a=await d("MAWFetchXMAData").fetchXMAData(a,g.actionUrl,[f]);if(a.linkType==="unknown"){d("sendToSentQPLLogger").markSendToSentFail(f,"unknown_xma_link_type");throw c("FBLogger")("messenger_web_sharing").mustfixThrow("Cannot forward XMA to secure threads with an unknown link type")}if(a.linkType==="external")return u(b,g,e,a);else return t(a,f)}async function s(a,b){var c=a.actionUrl,e=a.defaultCtaId;a=a.defaultCtaTitle;if(e==null)return null;e=await q(e,a,b);return e!=null?e:{actionUrl:c!=null?c:void 0,buttonType:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE,nativeUrl:c!=null?c:void 0,title:a!=null?a:void 0}}async function t(a,b){b=await d("MAWFetchXMADataUtils").makeXMAFileArgs(a,b);var c=a.contentRef,e=a.ctas,f=a.defaultCTA,g=a.overlayIconGlyph,h=a.subtitle_text,i=a.title_text;a=a.xma_message_type;c={contentRef:c,ctas:e,defaultCTA:f,overlayIconGlyph:g,subtitleText:h,titleText:i};return babelHelpers.extends({},b,{xmaArgs:c,xmaMessageType:a!=null?a:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE})}async function u(a,b,c,e){var f=a.attachmentCta1Id,g=a.attachmentCta2Id,i=a.attachmentCta3Id,j=a.cta1Title,k=a.cta2Title,l=a.cta3Title,m=a.faviconUrl,n=a.headerImageUrl,o=a.headerTitle,r=a.maxSubtitleNumOfLines,s=a.maxTitleNumOfLines,t=a.previewUrl,u=a.subtitleText;a=a.titleText;m=await Promise.all([[m,"favicon"],[n,"headerImage"],[t,"preview"]].map(function(a){return p(a[0],a[1])}));n=m[0];t=m[1];m=m[2];var v=[];if(f!=null){f=await q(f,j,c);f!=null&&v.push(f)}if(g!=null){j=await q(g,k,c);j!=null&&v.push(j)}if(i!=null){f=await q(i,l,c);f!=null&&v.push(f)}g={contentRef:e.contentRef,ctas:v.map(function(a){return babelHelpers.extends({},a,{actionUrl:d("MAWUnshimUrl").unshimUrl(a.actionUrl),nativeUrl:d("MAWUnshimUrl").unshimUrl(a.nativeUrl)})}),defaultCTA:babelHelpers.extends({},b,{actionUrl:d("MAWUnshimUrl").unshimUrl(b.actionUrl),nativeUrl:d("MAWUnshimUrl").unshimUrl(b.nativeUrl)}),headerTitle:o,maxSubtitleNumOfLines:(h||(h=d("I64"))).to_int32(r!=null?r:(h||(h=d("I64"))).zero),maxTitleNumOfLines:h.to_int32(s!=null?s:(h||(h=d("I64"))).zero),overlayIconGlyph:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.NONE,subtitleText:u,titleText:a};return{faviconFileArgs:n,headerFileArgs:t,previewFileArgs:m,xmaArgs:g,xmaMessageType:e.xma_message_type}}function v(a){var b=a.attachmentType,e=a.filename,f=a.playableDurationMs,g=a.playableUrl,j=a.playableUrlMimeType,k=a.previewUrl,l=a.previewUrlMimeType;if((h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE))){if(g==null)throw c("FBLogger")("messenger_web_sharing").mustfixThrow("If you see this error, there is no playableUrl for this attachment");var m=(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE));if(k!=null){a=m?k+"&":g;var p=m?k+"&":k;return Promise.all([window.fetch(a).then(function(a){return a.blob()}),window.fetch(p).then(function(a){return a.blob()})]).then(function(a){var e=a[0];a=a[1];e=new File([e],"mediaForwardedFromOpenThread",{type:m?l:j});a=new File([a],"previewForwardedFromOpenThread",{type:l});if((h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)))return n(e,a);if((h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))return o(e);if((h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE)))return n(e,a);throw c("FBLogger")("messenger_web_sharing").mustfixThrow("shouldn't have this error in forward message from open thread")})}a=m?g+"&":g;return window.fetch(a).then(function(a){return a.blob()}).then(function(a){if(m&&j==="video/mp4")throw c("FBLogger")("messenger_web_sharing").mustfixThrow("If you see this error, there is only mp4 url for gif");a=new File([a],e!=null?e:"mediaForwardedFromOpenThread",{type:j});if((h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)))return d("MAWImagePreProcess").imagePreprocess(a,!1);if((h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))return o(a);if((h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE)))return d("MAWDocumentPreProcess").documentPreprocess(a);if((h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE)))return Promise.all([d("MAWImagePreProcess").getJpegThumbnailInfo(a,400),d("MAWGetImageSpec").getImageSpec_DEPRECATED(a),Promise.resolve(a)]).then(async function(a){var b=a[0],c=a[1];a=a[2];return{file:a,imageSpec:c,plaintext:await d("WABlobToArrayBuffer").blobToArrayBuffer(a),thumbnailUrlAndSpec:b,type:"image"}});throw c("FBLogger")("messenger_web_sharing").mustfixThrow("shouldn't have this error in forward message from open thread")})}if((h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO))){if(g!=null)return window.fetch(g+"&").then(function(a){return a.blob()}).then(async function(a){a=new File([a],"mediaForwardedFromOpenThread",{type:j});return{durations:(h||(h=d("I64"))).to_int32(f!=null?f:(h||(h=d("I64"))).zero)/1e3,file:a,isPtt:!0,plaintext:await d("WABlobToArrayBuffer").blobToArrayBuffer(a),type:"audio"}});throw c("FBLogger")("messenger_web_sharing").mustfixThrow("If you see this error, there is no playableUrl for this audio attachment")}if((h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER))){if(g==null&&k==null)throw c("FBLogger")("messenger_web_sharing").mustfixThrow("If you see this error, there is no url for this sticker");return g!=null?k!=null?Promise.all([window.fetch(g).then(function(a){return a.blob()}),window.fetch(k).then(function(a){return a.blob()})]).then(function(a){var b=a[0];a=a[1];b=new File([b],"mediaForwardedFromOpenThread",{type:j});a=new File([a],"previewForwardedFromOpenThread",{type:l});return n(b,a)}):window.fetch(g).then(function(a){return a.blob()}).then(function(a){a=new File([a],"mediaForwardedFromOpenThread",{type:j});return n(a,a)}):window.fetch(k).then(function(a){return a.blob()}).then(function(a){return d("MAWImagePreProcess").imagePreprocess(new File([a],"previewForwardedFromOpenThread",{type:l}),!0)})}throw c("FBLogger")("messenger_web_sharing").mustfixThrow("We do not support forwarding other media types. Received attachment %d",(i||(i=d("LSIntEnum"))).toNumber(b))}function a(a,b,e,f,g,j,k,l,n){return d("MAWForwardMessage").maybeCreateNewThreadAndCallback(b,e,function(o,p){var q=d("MAWGetEphemeralSettings").getEphemeralSetting(o,e),s=p;return q.then(function(e){if(j!=null){if(m(j.attachmentFbid)){var p=d("MAWBridgeSendAndReceive").sendAndReceive("backend","sendMsg",{args:{content:"\ud83d\udc4d",ephemeralSetting:e!=null?e:void 0,isFirstMsg:s,isForwarded:g,source:k,specialTextSize:1},chatJid:o,externalId:n,qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:l});return d("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:o,externalId:n},p,{qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:l},b)}return(h||(h=d("I64"))).equal(j.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA))?r(a,j,b,l).then(function(a){var g=a.faviconFileArgs,h=a.headerFileArgs,i=a.previewFileArgs,j=a.xmaArgs;a=a.xmaMessageType;a=d("MAWBridgeSendAndReceive").sendAndReceive("backend","sendXMAShareMsg",{args:{content:f.text,ephemeralSetting:e!=null?e:void 0,isFirstMsg:s,isForwarded:!0,xmaMessageType:a!=null?a:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE},chatJid:o,faviconFile:g,headerFile:h,previewFile:i,qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:l,xmaArgs:j,xmaMsgExternalId:n});return d("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:o,externalId:n},a,{qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:l},b)}):v(j).then(async function(a){var f;switch(a.type){case"image":var h=a.imageSpec,i=a.thumbnailUrlAndSpec;f={args:{ephemeralSetting:e!=null?e:void 0,height:h.height,isFirstMsg:s,isForwarded:g,jpegThumbnail:i==null?void 0:i.jpegThumbnail,jpegThumbnailHeight:i==null?void 0:i.height,jpegThumbnailWidth:i==null?void 0:i.width,source:k,width:h.width},attachmentType:"image",chatJid:o,externalId:n};break;case"video":i=a.thumbnailUrlAndSpec;f={args:{duration:i.duration,ephemeralSetting:e!=null?e:void 0,height:i.height,isFirstMsg:s,isForwarded:g,jpegThumbnail:i.jpegThumbnail,jpegThumbnailHeight:i.height,jpegThumbnailWidth:i.width,source:k,width:i.width},attachmentType:"video",chatJid:o,externalId:n};break;case"audio":h=a.durations;i=a.isPtt;f={args:{duration:Math.round(h),ephemeralSetting:e!=null?e:void 0,isFirstMsg:s,isForwarded:g,isPtt:i,source:k},attachmentType:"audio",chatJid:o,externalId:n};break;case"document":f={args:{ephemeralSetting:e!=null?e:void 0,filename:a.filename,isFirstMsg:s,isForwarded:g,source:k},attachmentType:"application",chatJid:o,externalId:n};break}if(f==null)throw c("FBLogger")("messenger_web_sharing").mustfixThrow("We do not support forwarding this attachment type: %s",a.type);i=d("MAWBridgeSendAndReceive").sendAndReceive("backend","sendMediaMsgV2",babelHelpers.extends({},f,{mimeType:a.file.type,plaintext:(h=a.plaintext)!=null?h:await d("WABlobToArrayBuffer").blobToArrayBuffer(a.file),qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:l}));return d("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:o,externalId:n},i,{qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:l},b)})}p=f.text;if(p!=null){p=d("MAWBridgeSendAndReceive").sendAndReceive("backend","sendMsg",{args:{content:f.text,ephemeralSetting:e!=null?e:void 0,isFirstMsg:s,isForwarded:g,source:k},chatJid:o,externalId:n,qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:l});return d("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:o,externalId:n},p,{qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:l},b)}throw c("FBLogger")("messenger_web_sharing").mustfixThrow("We do not support forwarding this types")})},l)}g.downloadMediaByUrl=v;g.forwardMessage=a}),98);
__d("MAWMediaSetMediaValidatedResult",["LSIntEnum","MAWClientMediaStatusUtils","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e){c("promiseDone")(a,function(a){return a.runInTransaction(async function(a){var c=await a.client_media_status.get(b);return c==null?a.client_media_status.add(babelHelpers.extends({id:b,mainMediaStatus:(h||(h=d("LSIntEnum"))).ofNumber(1),mainMediaStatusDetails:"optimistic_with_validation_result",previewMediaStatus:h.ofNumber(1),previewMediaStatusDetails:"optimistic_with_validation_result"},d("MAWClientMediaStatusUtils").getValidationResults(e))):a.client_media_status.put(babelHelpers.extends({},c,{id:b},d("MAWClientMediaStatusUtils").getValidationResults(e)))},"readwrite",void 0,void 0,f.id+":26")})}g.call=a}),98);
__d("useMAWMediaDownloadUIStateDebounced",["react","react-compiler-runtime","useMAWMediaDebouncedState"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect;function a(a){var b=d("react-compiler-runtime").c(4),e=c("useMAWMediaDebouncedState")(a),f=e[0],g=e[1],h;b[0]!==g||b[1]!==a?(e=function(){g(a,!(a==="loading"||a==="downloaded"))},h=[a,g],b[0]=g,b[1]=a,b[2]=e,b[3]=h):(e=b[2],h=b[3]);i(e,h);return f}g["default"]=a}),98);
__d("useMAWMediaValidationResult",["I64","LSIntEnum","MAWBridgeSendAndReceive","MAWDbMedia","MAWMediaSetMediaValidatedResult","MessagingAttachmentType","WAHashUtils","promiseDone","react","react-compiler-runtime","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=h||d("react");var k=b.useEffect;b.useMemo;var l=new Set();function m(a,b){var e=d("react-compiler-runtime").c(5),f=c("useAsyncReStore")(),g,h;e[0]!==a||e[1]!==f||e[2]!==b?(g=function(){if(a==null)return;var e=(i||(i=d("I64"))).equal(a.attachmentType,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)),g=i.equal(a.attachmentType,j.ofNumber(c("MessagingAttachmentType").AUDIO)),h=a.attachmentFbid;if(!l.has(h)&&(e||g)){l.add(h);var k=isNaN(h);e=k?d("MAWBridgeSendAndReceive").sendAndReceive("backend","getMediaValidationResultByPlainTextHash",{plaintextHash:d("WAHashUtils").stringToPlaintextHash(h),qplInstanceKey:b==null?void 0:b.getInstanceKey()}):d("MAWBridgeSendAndReceive").sendAndReceive("backend","getMediaValidationResultByMediaId",{mediaId:d("MAWDbMedia").convertNumberToMediaId(parseInt(h,10)),qplInstanceKey:b==null?void 0:b.getInstanceKey()});c("promiseDone")(e.then(function(a){if(a!=null){var b=k?d("WAHashUtils").stringToPlaintextHash(h):d("MAWDbMedia").convertNumberToMediaId(parseInt(h,10));d("MAWMediaSetMediaValidatedResult").call(f,b.toString(),a)}}),n)}},h=[a,f,b],e[0]=a,e[1]=f,e[2]=b,e[3]=g,e[4]=h):(g=e[3],h=e[4]);k(g,h)}function n(){}function a(a,b,e){var f=d("react-compiler-runtime").c(5);m(a);var g,h;f[0]!==a||f[1]!==e||f[2]!==b?(g=function(){if(a==null)return;var f=(i||(i=d("I64"))).equal(a.attachmentType,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO));if(!f)return;f=e!=null;if(!f)return;f=e==null?void 0:e.validationResult;if(f==null)return;b==null||b.addAnnotations({"int":{audio_avg_bits_per_second:f.audioAvgBitsPerSecond,audio_number_of_channels:f.audioNumberOfChannels,audio_sampling_rate:f.audioSamplingRate,video_avg_bits_per_second:f.videoAvgBitsPerSecond,video_calculated_fps:f.videoCalculatedFps,video_duration:f.videoDuration,video_height:f.videoHeight,video_nominal_fps:f.videoNominalFps,video_width:f.videoWidth},string:{audio_stream_type:f.audioStreamType,validated_mime_type:f.validatedMimeType,video_stream_type:f.videoStreamType}})},h=[a,e,b],f[0]=a,f[1]=e,f[2]=b,f[3]=g,f[4]=h):(g=f[3],h=f[4]);k(g,h);bb0:{if(a==null){f=null;break bb0}g=(i||(i=d("I64"))).equal(a.attachmentType,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO));if(!g){f=null;break bb0}h=e!=null;if(!h){f=void 0;break bb0}g=e==null?void 0:e.validationResult;if(g==null){f=void 0;break bb0}f=g}return f}g["default"]=a}),98);
__d("useMAWMediaDownloadStatus",["MAWMediaDownloadStatusBackendFetcher","MAWMediaDownloadStatusUIState","ReQL","ReQLSuspense","react-compiler-runtime","useMAWMediaDownloadUIStateDebounced","useMAWMediaValidationResult","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e){var g=d("react-compiler-runtime").c(17),i=(h||(h=c("useReStore")))(),j=e!=null?e:a==null?void 0:a.attachmentFbid,k;g[0]!==i||g[1]!==j?(e=function(){return j!=null?d("ReQL").fromTableAscending(i.tables.client_media_status).getKeyRange(j):d("ReQL").empty()},k=[i,j],g[0]=i,g[1]=j,g[2]=e,g[3]=k):(e=g[2],k=g[3]);e=d("ReQLSuspense").useFirst(e,k,f.id+":43");g[4]!==a||g[5]!==e||g[6]!==j?(k=d("MAWMediaDownloadStatusUIState").getNonDebouncedUIStateAndStatus(e,j,a),g[4]=a,g[5]=e,g[6]=j,g[7]=k):k=g[7];e=k;k=e.mawMediaStatus;var l=e.nonDebouncedUIState;e=e.status;l=c("useMAWMediaDownloadUIStateDebounced")(l);k=c("useMAWMediaValidationResult")(a,b,k);var m;g[8]!==a||g[9]!==b||g[10]!==e||g[11]!==j?(m={attachment:a,mediaRenderQpl:b,mediaStatus:e,statusKey:j},g[8]=a,g[9]=b,g[10]=e,g[11]=j,g[12]=m):m=g[12];d("MAWMediaDownloadStatusBackendFetcher").useFetchInitialDownloadStatus(m);g[13]!==l||g[14]!==e||g[15]!==k?(a={status:e,uiState:l,validationResult:k},g[13]=l,g[14]=e,g[15]=k,g[16]=a):a=g[16];return a}g["default"]=a}),98);
__d("useShouldShowPlaybackErrorFallback",["MAWVideoAudioPlaybackErrorHandlerUtils","react-compiler-runtime","useMAWMediaDownloadStatus"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var e=d("react-compiler-runtime").c(3);b=c("useMAWMediaDownloadStatus")(a,b);b=b.validationResult;if(a==null)return!1;var f;e[0]!==a||e[1]!==b?(f=d("MAWVideoAudioPlaybackErrorHandlerUtils").isInvalidVideo(a,b),e[0]=a,e[1]=b,e[2]=f):f=e[2];return f}g["default"]=a}),98);
__d("useShouldShowUnsupportedCodecFallback",["MAWVideoAudioPlaybackErrorHandlerUtils","react-compiler-runtime","useMAWMediaDownloadStatus"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var e=d("react-compiler-runtime").c(3);b=c("useMAWMediaDownloadStatus")(a,b);b=b.validationResult;if(a==null)return!1;var f;e[0]!==a||e[1]!==b?(f=d("MAWVideoAudioPlaybackErrorHandlerUtils").isUnsupportedVideo(a,b),e[0]=a,e[1]=b,e[2]=f):f=e[2];return f}g["default"]=a}),98);
__d("useMWV2MediaViewerSecurePlayableUrl_CausesSuspense",["cr:5970","react"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(){return i}function i(a,c,d){return(a=b("cr:5970")==null?void 0:b("cr:5970").getAttachmentBlob_CausesSuspense(a,c,d))!=null?a:""}g["default"]=a}),98);
__d("MAWVideoAudioPlaybackErrorHandlerUtils",["fbt","BaseMiddot.react","I64","LSIntEnum","MWXLink.react","MessagingAttachmentType","MessengerWebUXLoggerImpl","ReQL","ReQLSuspense","UserAgent","justknobx","react","react-compiler-runtime","useMAWMediaDownloadStatus","useMWV2MediaViewerSecurePlayableUrl_CausesSuspense","useReStore","useShouldShowPlaybackErrorFallback","useShouldShowUnsupportedCodecFallback"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||c("react");function a(a,b,e){var f,g,j=d("react-compiler-runtime").c(22);f=(f=c("useShouldShowPlaybackErrorFallback")(a,null))!=null?f:!1;g=(g=c("useShouldShowUnsupportedCodecFallback")(a,null))!=null?g:!1;var l=d("MessengerWebUXLoggerImpl").useInteractionLogger(),n=c("useMWV2MediaViewerSecurePlayableUrl_CausesSuspense")();if(f){j[0]===Symbol["for"]("react.memo_cache_sentinel")?(f={downloadButton:null,mediaStatusText:h._(/*BTDS*/"_j[\"Invalid file format\",\"f90fb65f92ad8ac33f140b8be3c9eed1\",1]"),retryButton:null},j[0]=f):f=j[0];return f}if(g){f=(i||(i=d("I64"))).equal(a.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO));g=i.equal(a.attachmentType,k.ofNumber(c("MessagingAttachmentType").AUDIO));if(f){j[1]!==a||j[2]!==n?(f=n(a,"MAWVideoAudioPlaybackErrorHandlerUtils"),j[1]=a,j[2]=n,j[3]=f):f=j[3];a=f;if(!Boolean(a)&&c("justknobx")._("4203")){j[4]===Symbol["for"]("react.memo_cache_sentinel")?(n={downloadButton:null,mediaStatusText:h._(/*BTDS*/"Error loading file"),retryButton:null},j[4]=n):n=j[4];return n}j[5]===Symbol["for"]("react.memo_cache_sentinel")?(f=m.jsx(c("BaseMiddot.react"),{}),j[5]=f):f=j[5];j[6]!==l?(n=function(){l==null||l({eventName:"click_unsupported_video_download_from_mustache"})},j[6]=l,j[7]=n):n=j[7];var o;j[8]===Symbol["for"]("react.memo_cache_sentinel")?(o=h._(/*BTDS*/"Download to play"),j[8]=o):o=j[8];j[9]!==a||j[10]!==n?(f=m.jsxs(m.Fragment,{children:[f,m.jsx(c("MWXLink.react"),{download:!0,href:a,onClick:n,children:o})]}),j[9]=a,j[10]=n,j[11]=f):f=j[11];o=f;j[12]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._(/*BTDS*/"Browser doesn't support this video"),j[12]=a):a=j[12];j[13]!==o?(n={downloadButton:o,mediaStatusText:a,retryButton:null},j[13]=o,j[14]=n):n=j[14];return n}if(g){j[15]===Symbol["for"]("react.memo_cache_sentinel")?(f={downloadButton:null,mediaStatusText:h._(/*BTDS*/"Browser doesn't support this audio"),retryButton:null},j[15]=f):f=j[15];return f}}j[16]!==b||j[17]!==e?(a=b?m.jsxs(m.Fragment,{children:[m.jsx(c("BaseMiddot.react"),{}),m.jsx(c("MWXLink.react"),{onClick:e,children:h._(/*BTDS*/"Retry")})]}):null,j[16]=b,j[17]=e,j[18]=a):a=j[18];o=a;j[19]===Symbol["for"]("react.memo_cache_sentinel")?(n=h._(/*BTDS*/"Couldn't download"),j[19]=n):n=j[19];j[20]!==o?(g={downloadButton:null,mediaStatusText:n,retryButton:o},j[20]=o,j[21]=g):g=j[21];return g}function b(a){var b=d("react-compiler-runtime").c(7),e=(j||(j=c("useReStore")))(),g;b[0]!==e.tables.attachments||b[1]!==a.messageId||b[2]!==a.threadKey?(g=function(){return d("ReQL").fromTableAscending(e.tables.attachments).getKeyRange(a.threadKey,a.messageId)},b[0]=e.tables.attachments,b[1]=a.messageId,b[2]=a.threadKey,b[3]=g):g=b[3];var h;b[4]!==e||b[5]!==a?(h=[e,a],b[4]=e,b[5]=a,b[6]=h):h=b[6];b=d("ReQLSuspense").useFirst(g,h,f.id+":167");g=c("useMAWMediaDownloadStatus")(b);h=g.validationResult;if(b==null)return!1;g=(i||(i=d("I64"))).equal(b.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))||(i||(i=d("I64"))).equal(b.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO));if(!g)return!1;b=h!=null?h:{};g=b.validatedMimeType;return g==="invalid-mp4"?!0:!1}var n=Object.freeze({Chrome:["H263","Vvc","Av1"],Edge:["H263","Vvc","Av1"],Firefox:["H263","Vvc","Hevc","Av1"],Safari:["H263","Vvc","Vp9","Av1"]});function o(a){if(a==null)return!0;if(c("UserAgent").isBrowser("Chrome"))return n.Chrome.includes(a)===!1;else if(c("UserAgent").isBrowser("Firefox"))return n.Firefox.includes(a)===!1;else if(c("UserAgent").isBrowser("Edge"))return n.Edge.includes(a)===!1;else if(c("UserAgent").isBrowser("Safari"))return n.Safari.includes(a)===!1;return!0}function e(a,b){a=a.attachmentType;a=(i||(i=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))||(i||(i=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO));if(!a)return!1;a=b!=null?b:{};b=a.validatedMimeType;a=a.videoStreamType;return o(a)===!1||b==="unsupported-video"}function p(a,b){a=a.attachmentType;a=(i||(i=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))||(i||(i=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO));if(!a)return!1;a=b!=null?b:{};b=a.validatedMimeType;return b==="invalid-mp4"}g.useGetMetadataForMediaNotRendered=a;g.useIsInvalidVideoMessage=b;g.isUnsupportedVideo=e;g.isInvalidVideo=p}),226);
__d("MWAnimatedImageControlsUtilCometSettingsQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9834610223284602"}),null);
__d("MWAnimatedImageControlsUtilCometSettingsQuery.graphql",["MWAnimatedImageControlsUtilCometSettingsQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoSettings",kind:"LinkedField",name:"video_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"autoplay_setting_www",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWAnimatedImageControlsUtilCometSettingsQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWAnimatedImageControlsUtilCometSettingsQuery",selections:a},params:{id:b("MWAnimatedImageControlsUtilCometSettingsQuery_facebookRelayOperation"),metadata:{},name:"MWAnimatedImageControlsUtilCometSettingsQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("MWAnimatedImageControlsUtilMWSettingsQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9439828062807168"}),null);
__d("MWAnimatedImageControlsUtilMWSettingsQuery.graphql",["MWAnimatedImageControlsUtilMWSettingsQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"msgr_gif_autoplay",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWAnimatedImageControlsUtilMWSettingsQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWAnimatedImageControlsUtilMWSettingsQuery",selections:a},params:{id:b("MWAnimatedImageControlsUtilMWSettingsQuery_facebookRelayOperation"),metadata:{},name:"MWAnimatedImageControlsUtilMWSettingsQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("MWAnimatedImageControlsUtil",["$InternalEnum","CometRelay","MWAnimatedImageControlsUtilCometSettingsQuery.graphql","MWAnimatedImageControlsUtilMWSettingsQuery.graphql","MetaConfig","gkx","promiseDone","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;e=j||d("react");var k=e.useEffect,l=e.useState,m=b("$InternalEnum").Mirrored(["NOT_FETCHED_YET","OFF","ON"]);function a(){var a=d("react-compiler-runtime").c(3),b=d("CometRelay").useRelayEnvironment(),e=l(null),f=e[0],g=e[1],h=c("gkx")("20836"),i;a[0]!==b?(e=function(){h||c("promiseDone")(n(b).then(g))},i=[b,h],a[0]=b,a[1]=e,a[2]=i):(e=a[1],i=a[2]);k(e,i);if(h)return m.ON;switch(f){case null:return m.NOT_FETCHED_YET;case!0:return m.ON;case!1:return m.OFF;default:return m.NOT_FETCHED_YET}}async function n(a){var e=c("MetaConfig")._("37");if(e){var f;e=await d("CometRelay").fetchQuery(a,h!==void 0?h:h=b("MWAnimatedImageControlsUtilMWSettingsQuery.graphql"),{}).toPromise();return(e==null||(f=e.viewer)==null?void 0:f.msgr_gif_autoplay)==="ON"}else{var g;e=await d("CometRelay").fetchQuery(a,i!==void 0?i:i=b("MWAnimatedImageControlsUtilCometSettingsQuery.graphql"),{}).toPromise();a=e==null||(g=e.viewer)==null||(g=g.video_settings)==null?void 0:g.autoplay_setting_www;if(a==="on")return!0;else return!1}}g.MWAutoplayAnimationsSetting=m;g.useGetMessengerAutoplaySetting=a}),98);
__d("useGetMediaGroupStyles",["MWLSThreadDisplayContext","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useMemo;var i=180,j=120;function a(a,b){var c=d("react-compiler-runtime").c(40),e=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext()==="ChatTab",f=null;if(b===2&&e){var g;c[0]===Symbol["for"]("react.memo_cache_sentinel")?(g="x78zum5 xdt5ytf x6ikm8r x10wlt62 x1isuwpm xq1dxzn",c[0]=g):g=c[0];f=g}else if(b===2&&!e){c[1]===Symbol["for"]("react.memo_cache_sentinel")?(g="x78zum5 xdt5ytf x6ikm8r x10wlt62 x1en3kgc xafpxmx",c[1]=g):g=c[1];f=g}else if(b===3&&e){c[2]===Symbol["for"]("react.memo_cache_sentinel")?(g="x78zum5 xdt5ytf x6ikm8r x10wlt62 xu3xrit xq1dxzn",c[2]=g):g=c[2];f=g}else if(b===3&&!e){c[3]===Symbol["for"]("react.memo_cache_sentinel")?(g="x78zum5 xdt5ytf x6ikm8r x10wlt62 x1egiwwb xafpxmx",c[3]=g):g=c[3];f=g}else if(b===4&&e){c[4]===Symbol["for"]("react.memo_cache_sentinel")?(g="x78zum5 xdt5ytf x6ikm8r x10wlt62 x89wwaf xh6lk7j xdj266r",c[4]=g):g=c[4];f=g}else if(b===4&&!e){c[5]===Symbol["for"]("react.memo_cache_sentinel")?(g="x78zum5 xdt5ytf x6ikm8r x10wlt62 x1gyaxfs xt4sqew xdj266r",c[5]=g):g=c[5];f=g}if(e){c[6]===Symbol["for"]("react.memo_cache_sentinel")?(g="x6s0dn4 x1exxf4d xpv9jar x1nb4dca x1nmn18 xpilrb4 x1lun4ml x1xn7y0n x1uxb8k9 x1vmbcc8 x16xm01d x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x78zum5 xl56j7k x6ikm8r x10wlt62 x10l6tqk x1wkxgih x1mu601j x2aouup xi3av73 x1i9suas xygnafs",c[6]=g):g=c[6];g=g}else{var h;c[7]===Symbol["for"]("react.memo_cache_sentinel")?(h="x6s0dn4 x1exxf4d xpv9jar x1nb4dca x1nmn18 xpilrb4 x1lun4ml x1xn7y0n x1uxb8k9 x1vmbcc8 x16xm01d x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x78zum5 x1b51vyi xl56j7k x19aweqf x1e4dklr x1shn012 xfb3i0g x6ikm8r x10wlt62 x10l6tqk xzjbwwf",c[7]=h):h=c[7];g=h}c[8]===Symbol["for"]("react.memo_cache_sentinel")?(h=[{bottom:0,left:17},{bottom:6,left:8,transform:"rotate(-4deg)"},{bottom:12,right:8,transform:"rotate(4deg)"},{bottom:18,left:8,transform:"rotate(-4deg)"}],c[8]=h):h=c[8];var k=a?null:0,l=a?0:null,m;c[9]!==k||c[10]!==l?(m={left:k,right:l,top:0},c[9]=k,c[10]=l,c[11]=m):m=c[11];k=a?0:null;l=a?null:0;var n=e?100:160,o;c[12]!==k||c[13]!==l||c[14]!==n?(o={left:k,right:l,top:n},c[12]=k,c[13]=l,c[14]=n,c[15]=o):o=c[15];k=a?null:0;l=a?0:null;c[16]!==l||c[17]!==k?(n={bottom:0,left:k,right:l},c[16]=l,c[17]=k,c[18]=n):n=c[18];c[19]!==n||c[20]!==m||c[21]!==o?(l=[m,o,n],c[19]=n,c[20]=m,c[21]=o,c[22]=l):l=c[22];k=a?0:null;n=a?null:0;c[23]!==k||c[24]!==n?(m={left:k,right:n,top:0},c[23]=k,c[24]=n,c[25]=m):m=c[25];o=a?null:0;k=a?0:null;c[26]!==o||c[27]!==k?(n={bottom:0,left:o,right:k},c[26]=o,c[27]=k,c[28]=n):n=c[28];c[29]!==m||c[30]!==n?(a=[m,n],c[29]=m,c[30]=n,c[31]=a):a=c[31];c[32]!==l||c[33]!==a?(o={fourImageTile:h,threeImageTile:l,twoImageTile:a},c[32]=l,c[33]=a,c[34]=o):o=c[34];k=o;m=k;n=b===2?m.twoImageTile:b===3?m.threeImageTile:m.fourImageTile;h=e?j:i;c[35]!==f||c[36]!==n||c[37]!==h||c[38]!==g?(l={containerStyles:f,coordinations:n,imageSize:h,wrapperStyles:g},c[35]=f,c[36]=n,c[37]=h,c[38]=g,c[39]=l):l=c[39];return l}function b(a,b,c){var e=d("react-compiler-runtime").c(4),f=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext()==="ChatTab",g=1,h=1;if(a!==!0||b===0||c===0){var k;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(k={resizeRatio:1,scaleRatio:1},e[0]=k):k=e[0];return k}a===!0&&b!=null&&c!=null&&(b>=c?g=Math.ceil((f?j:i)/c):g=Math.ceil((f?j:i)/b));a===!0&&g===1&&b!=null&&c!=null&&(h=b>c?b/c:c/b);e[1]!==g||e[2]!==h?(k={resizeRatio:g,scaleRatio:h},e[1]=g,e[2]=h,e[3]=k):k=e[3];return k}g.IMAGE_SIZE=i;g.IMAGE_SIZE_CHAT_TAB=j;g.useGetMediaGroupStyles=a;g.useGetMediaGroupTileImageRatios=b}),98);
__d("MWMessageListImageSizingUtils",["justknobx","useGetMediaGroupStyles"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e){if(e===!0)return{maxHeight:b==="Inbox"?d("useGetMediaGroupStyles").IMAGE_SIZE:d("useGetMediaGroupStyles").IMAGE_SIZE_CHAT_TAB,maxWidth:b==="Inbox"?d("useGetMediaGroupStyles").IMAGE_SIZE:d("useGetMediaGroupStyles").IMAGE_SIZE_CHAT_TAB};return b!=="Inbox"&&b!=="ChatTab"||a&&!c("justknobx")._("5036")?{maxHeight:200,maxWidth:480}:{maxHeight:b==="Inbox"?c("justknobx")._("2546"):c("justknobx")._("2547"),maxWidth:b==="Inbox"?c("justknobx")._("2548"):c("justknobx")._("2549")}}g.getMaxPreviewHeightAndWidth=a}),98);
__d("MWXIconEyeCross",["MWXSvgIcon","SVGIcon","cr:22310","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22310")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconInfoCircle",["MWXSvgIcon","SVGIcon","cr:22371","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22371")),c("gkx")("23219"));g["default"]=a}),98);
__d("MessengerWellbeingInformTreatmentFalcoEventLogger",["$InternalEnum","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(null==a)throw new TypeError("Cannot destructure "+a)}var i=c("requireDeferred")("MwbCmInformTreatmentEventFalcoEvent").__setRef("MessengerWellbeingInformTreatmentFalcoEventLogger"),j=c("requireDeferred")("MwbInformTreatmentShownImpressionFalcoEvent").__setRef("MessengerWellbeingInformTreatmentFalcoEventLogger");e=b("$InternalEnum")({AI_GENERATED_CONTENT:"ai_generated_content",MISINFORMATION:"misinformation"});function a(a){var b=babelHelpers["extends"]({},(h(a),a));i.onReady(function(a){return a.log(function(){return babelHelpers["extends"]({},b)})})}function d(a){var b=babelHelpers["extends"]({},(h(a),a));j.onReady(function(a){return a.log(function(){return babelHelpers["extends"]({},b)})})}g.MWInformTreatmentEventName=e;g.logForCM=a;g.logForPrivateChats=d}),98);
__d("useMWInformTreatmentFalcoEventLogger",["I64","Int64Hooks","LSIntEnum","LSMessagingThreadTypeUtil","MWLSThread","MessengerWellbeingInformTreatmentFalcoEventLogger","ReQL","ReQLSuspense","react-compiler-runtime","useCommunityFolder","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a){var b=d("react-compiler-runtime").c(30),e=a.message,g=(j||(j=c("useReStore")))(),k=d("MWLSThread").useThreadExn(e.threadKey);a=c("useCommunityFolder")(k);var l=(a=a==null?void 0:a.fbGroupId)!=null?a:(h||(h=d("I64"))).zero;b[0]!==k.threadType?(a=d("LSMessagingThreadTypeUtil").isPublicCMThread(k.threadType),b[0]=k.threadType,b[1]=a):a=b[1];var m=a;b[2]!==k?(a=d("LSMessagingThreadTypeUtil").isOpenFnFThread(k),b[2]=k,b[3]=a):a=b[3];var n=a,o=!(h||(h=d("I64"))).equal(e.displayedContentTypes,(i||(i=d("LSIntEnum"))).ofNumber(1)),p;b[4]!==g.tables.attachments||b[5]!==o||b[6]!==e.messageId||b[7]!==e.threadKey?(a=function(){return o?d("ReQL").fromTableAscending(g.tables.attachments).getKeyRange(e.threadKey,e.messageId):d("ReQL").empty()},p=[o,g.tables.attachments,e.threadKey,e.messageId],b[4]=g.tables.attachments,b[5]=o,b[6]=e.messageId,b[7]=e.threadKey,b[8]=a,b[9]=p):(a=b[8],p=b[9]);var q=d("ReQLSuspense").useFirst(a,p,f.id+":63");b[10]!==(q==null?void 0:q.attachmentFbid)||b[11]!==l||b[12]!==n||b[13]!==m||b[14]!==e.isForwarded||b[15]!==e.messageId||b[16]!==e.threadKey||b[17]!==k.threadSubtype||b[18]!==k.threadType?(a=function(a,b){if(m)d("MessengerWellbeingInformTreatmentFalcoEventLogger").logForCM({attachment_id:q==null?void 0:q.attachmentFbid,event_name:a,group_id:(h||(h=d("I64"))).to_string(l),inform_treatment:b!=null?{name:b.name,type:b.type}:void 0,is_forward:e.isForwarded,message_id:e.messageId,thread_id:h.to_string(e.threadKey),thread_subtype:k.threadSubtype!=null?(i||(i=d("LSIntEnum"))).unwrapIntEnum(k.threadSubtype):void 0});else if(n&&a==="impression"){d("MessengerWellbeingInformTreatmentFalcoEventLogger").logForPrivateChats({inform_treatment_name:b!=null?b==null?void 0:b.name:void 0,inform_treatment_type:(a=b==null?void 0:b.type)!=null?a:void 0,thread_type:(i||(i=d("LSIntEnum"))).unwrapIntEnum(k.threadType)})}},b[10]=q==null?void 0:q.attachmentFbid,b[11]=l,b[12]=n,b[13]=m,b[14]=e.isForwarded,b[15]=e.messageId,b[16]=e.threadKey,b[17]=k.threadSubtype,b[18]=k.threadType,b[19]=a):a=b[19];p=q==null?void 0:q.attachmentFbid;var r;b[20]!==l||b[21]!==n||b[22]!==m||b[23]!==e.isForwarded||b[24]!==e.messageId||b[25]!==e.threadKey||b[26]!==p||b[27]!==k.threadSubtype||b[28]!==k.threadType?(r=[p,l,n,m,e.isForwarded,e.messageId,e.threadKey,k.threadSubtype,k.threadType],b[20]=l,b[21]=n,b[22]=m,b[23]=e.isForwarded,b[24]=e.messageId,b[25]=e.threadKey,b[26]=p,b[27]=k.threadSubtype,b[28]=k.threadType,b[29]=r):r=b[29];return d("Int64Hooks").useCallbackInt64(a,r)}g["default"]=a}),98);
__d("MWInformedTreatment.react",["fbt","FDSBlurredBackgroundImage.react","LSMessagingThreadTypeUtil","MWXColumn.react","MWXColumnItem.react","MWXIconEyeCross","MWXIconInfoCircle","MWXIconStrict.react","MWXImage.react","MWXText.react","MessengerWebUXLogger","ReQL","ReQLSuspense","gkx","qex","react","react-compiler-runtime","useMWInformTreatmentFalcoEventLogger","useMergeRefs","useReStore","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react"),l={overlay:{paddingTop:"xexx8yu",paddingInlineEnd:"x2vl965",paddingBottom:"x18d9i69",paddingInlineStart:"xe2zdcy",width:"xh8yej3",$$css:!0},post:{flexGrow:"x1iyjqo2",height:"x5yr21d",objectFit:"xl1xv1r",width:"xh8yej3",$$css:!0}},m={AI_GENERATED_CONTENT:{icon:c("MWXIconInfoCircle"),text:h._(/*BTDS*/"AI info")},ALTERED_MEDIA:{icon:c("MWXIconEyeCross"),text:h._(/*BTDS*/"Altered media")},ALTERED_PHOTO:{icon:c("MWXIconEyeCross"),text:h._(/*BTDS*/"Altered photo")},CRUEL:{icon:c("MWXIconEyeCross"),text:h._(/*BTDS*/"Cruel content")},FALSE_NEWS:{icon:c("MWXIconInfoCircle"),text:h._(/*BTDS*/"False information")},MISLEADING_NEWS:{icon:c("MWXIconInfoCircle"),text:h._(/*BTDS*/"Partly false")},MISSING_CONTEXT:{icon:c("MWXIconInfoCircle"),text:h._(/*BTDS*/"Missing context")},SENSITIVE:{icon:c("MWXIconEyeCross"),text:h._(/*BTDS*/"Sensitive content")},VIOLENCE:{icon:c("MWXIconEyeCross"),text:h._(/*BTDS*/"Sensitive content")}},n=h._(/*BTDS*/"View post for more info");function a(a,b,e,f){if(f==null||a==null||b==null||e==null)return!1;b=a==="ai_generated_content";e=f!=null&&d("LSMessagingThreadTypeUtil").isArmadilloSecure(f);a=f!=null&&d("LSMessagingThreadTypeUtil").isPublicCMThread(f);if(b)return c("qex")._("1581")===!0;else return e||a}function o(a){switch(a){case"ai_generated_content":return"ai_generated_content";case"misinformation":return"misleading_news";case"misleading_news":return"missing_context";case"missing_context":return"altered_media";case"altered_media":return"altered_media";case"false_news":return"false_news";default:return null}}function b(a){var b=d("react-compiler-runtime").c(34),e=a.dimension,g=a.gatingTitle,h=a.gatingType,j=a.isXMA,r=a.mediaRenderQpl,s=a.messageId,t=a.previewUrl,u=a.xstyle,v=j===void 0?!1:j,w=t===void 0?"":t,x=(i||(i=c("useReStore")))();b[0]!==x.tables.messages||b[1]!==s?(a=function(){return d("ReQL").fromTableAscending(x.tables.messages.index("messageId")).getKeyRange(s)},b[0]=x.tables.messages,b[1]=s,b[2]=a):a=b[2];b[3]!==x||b[4]!==s?(j=[x,s],b[3]=x,b[4]=s,b[5]=j):j=b[5];t=d("ReQLSuspense").useFirstExn(a,j,f.id+":252");var y=c("gkx")("23219"),z=q;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(a){var b;a=z(a);return a==null||((b=m[a])==null?void 0:b.icon)==null?c("MWXIconEyeCross"):m[a].icon},b[6]=a):a=b[6];var A=a;b[7]===Symbol["for"]("react.memo_cache_sentinel")?(j=function(a){var b;a=z(a);return a==null||((b=m[a])==null?void 0:b.text)==null?null:m[a].text},b[7]=j):j=b[7];var B=j;b[8]!==g||b[9]!==v?(a=function(a){switch(a){case"warning_screens":return k.jsx("div",{className:"xbudbmw x10l6tqk xwa60dl x11lhmoz xh8yej3",children:k.jsxs(c("MWXColumn.react"),{spacing:12,verticalAlign:"center",children:[k.jsx(c("MWXColumnItem.react"),{align:"center",children:k.jsx(c("MWXIconStrict.react"),{color:"white",icon:A(g),size:32})}),k.jsx(c("MWXColumnItem.react"),{children:k.jsx(c("MWXText.react"),{align:"center",color:"white",numberOfLines:1,type:y?"bodyLink3":"bodyLink4",children:B(g)})}),v?k.jsx(c("MWXColumnItem.react"),{children:k.jsx(c("MWXText.react"),{align:"center",color:"white",type:y?"meta3":"meta4",children:n})}):null]})});case"media_label":case"post_label":return k.jsxs("div",{className:"x6s0dn4 x1gevrdp x1fk37vd x1bmkqan xqb0rpr xsdp72b x12ol6y4 x180vkcf x1khw62d x709u02 x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x178xt8z x1lun4ml xso031l xpilrb4 xe80o0v x1ihrfj4 x78zum5 x10w6t97 x9q68il xyqdw3p x2vl965 xg8j3zb x25sj25 x10l6tqk xpse7mg x1tk7jg1 xuxw1ft x1vvkbs",children:[k.jsx(c("MWXIconStrict.react"),{color:"white",icon:A(g),size:24}),k.jsx(c("MWXText.react"),{align:"center",color:"white",type:y?"bodyLink3":"bodyLink4",children:B(g)})]});default:return null}},b[8]=g,b[9]=v,b[10]=a):a=b[10];j=a;var C=p;b[11]!==e||b[12]!==r||b[13]!==w||b[14]!==u?(a=function(a){switch(a){case"media_label":case"post_label":return k.jsx("div",{style:e,children:k.jsx(c("MWXImage.react"),{alt:"",onError:function(){return r==null?void 0:r.endFail("load-image-error")},onLoad:function(){return r==null?void 0:r.endSuccess()},src:w,xstyle:l.post})});case"warning_screens":default:return k.jsxs("div",{style:e,children:[k.jsx(c("FDSBlurredBackgroundImage.react"),{alt:"",onError:function(){return r==null?void 0:r.endFail("load-image-error")},onLoad:function(){return r==null?void 0:r.endSuccess()},src:w,xstyle:[l.post,u,l.overlay]}),k.jsx("div",{className:"x18l40ae x1ey2m1c xtea3wc xtijo5x x1o0tod x47corl x10l6tqk x13vifvy"})]})}},b[11]=e,b[12]=r,b[13]=w,b[14]=u,b[15]=a):a=b[15];a=a;var D;b[16]===Symbol["for"]("react.memo_cache_sentinel")?(D={eventName:"inform_treatment_chat_impression"},b[16]=D):D=b[16];D=c("MessengerWebUXLogger").useImpressionLoggerRef(D);var E;b[17]!==t?(E={message:t},b[17]=t,b[18]=E):E=b[18];var F=c("useMWInformTreatmentFalcoEventLogger")(E);b[19]!==g||b[20]!==h||b[21]!==F?(t={onImpressionStart:function(){var a=o(g),b=C(h.toLocaleLowerCase());a!=null&&b!=null&&F("impression",{name:a,type:b})}},b[19]=g,b[20]=h,b[21]=F,b[22]=t):t=b[22];E=c("useSinglePartialViewImpression")(t);t=c("useMergeRefs")(D,E);b[23]===Symbol["for"]("react.memo_cache_sentinel")?(D={className:"x78zum5 x5yr21d x1n2onr6 xh8yej3"},b[23]=D):D=b[23];b[24]!==h||b[25]!==a?(E=a(h.toLocaleLowerCase()),b[24]=h,b[25]=a,b[26]=E):E=b[26];b[27]!==h||b[28]!==j?(a=j(h.toLocaleLowerCase()),b[27]=h,b[28]=j,b[29]=a):a=b[29];b[30]!==t||b[31]!==E||b[32]!==a?(j=k.jsxs("div",babelHelpers["extends"]({},D,{ref:t,children:[E,a]})),b[30]=t,b[31]=E,b[32]=a,b[33]=j):j=b[33];return j}function p(a){switch(a){case"warning_screens":case"media_label":case"post_label":return a;default:return null}}function q(a){var b=Object.keys(m).find(function(b){return b===a.toUpperCase()});return b}g.checkIsInformedTreatmentVisible=a;g.getEventTitle=o;g.MWInformedTreatment=b}),226);
__d("MWXIconHd",["MWXSvgIcon","SVGIcon","cr:22362","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22362")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXMessageBubbleCornerStyles.react",[],(function(a,b,c,d,e,f,g){"use strict";var h={flatBottom:{borderEndEndRadius:"x16uus16",borderEndStartRadius:"xbiv7yw",$$css:!0},flatTop:{borderStartEndRadius:"x1ga7v0g",borderStartStartRadius:"x15mokao",$$css:!0},rounded:{borderStartStartRadius:"xaymx6s",borderStartEndRadius:"x1lu5o8o",borderEndEndRadius:"x1ou5ly4",borderEndStartRadius:"xofb2d2",$$css:!0}},i={connectBottom:{borderEndStartRadius:"x1pczhz8",$$css:!0},connectTop:{borderStartStartRadius:"xjwep3j",$$css:!0}},j={connectBottom:{borderEndEndRadius:"x1wcsgtt",$$css:!0},connectTop:{borderStartEndRadius:"x1t39747",$$css:!0}};function a(a){var b,c,d,e;b=(b=a==null?void 0:a.align)!=null?b:"left";c=(c=a==null?void 0:a.connectBottom)!=null?c:!1;d=(d=a==null?void 0:a.connectTop)!=null?d:!1;e=(e=a==null?void 0:a.flatten)!=null?e:"none";a=(a=a==null?void 0:a.corners)!=null?a:"round";b=b==="right"?j:i;return[a==="round"&&h.rounded,d&&b.connectTop,c&&b.connectBottom,(e==="all"||e==="bottom")&&h.flatBottom,(e==="all"||e==="top")&&h.flatTop]}g.getMWXBubbleCornerStyles=a}),98);
__d("MWXAspectRatioContainer.react",["react","react-compiler-runtime","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={position:"x1n2onr6",width:"xh8yej3",$$css:!0},k={child:{height:"x5yr21d",insetInlineStart:"x1o0tod",left:null,right:null,position:"x10l6tqk",top:"x13vifvy",width:"xh8yej3",$$css:!0},childInner:{maxHeight:"xmz0i5r",maxWidth:"x193iq5w",$$css:!0},flex:{display:"x78zum5",maxWidth:"x193iq5w",$$css:!0},inner:function(a){return[j,{paddingBottom:a!=null?"xjqpyvm":a,$$css:!0},{"--x-paddingBottom":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(a)}]},outer:function(a,b,c){return[{maxHeight:c!=null?"x1jols5v":c,maxWidth:b!=null?"xf68679":b,width:a!=null?"x5lhr3w":a,$$css:!0},{"--x-maxHeight":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(c),"--x-maxWidth":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(b),"--x-width":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(a)}]}};function a(a){var b=d("react-compiler-runtime").c(22),c=a.children,e=a.height,f=a.maxHeight,g=a.maxWidth;a=a.width;e=a/e;g=g!=null&&f!=null?"min("+g+"px, "+f*e+"px)":f!=null?f*e+"px":g;var h;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(h=[k.flex],b[0]=h):h=b[0];var j;b[1]!==f||b[2]!==g||b[3]!==a?(j=k.outer(a,g!=null?g:"initial",f!=null?f:"initial"),b[1]=f,b[2]=g,b[3]=a,b[4]=j):j=b[4];b[5]!==j?(f=[j],b[5]=j,b[6]=f):f=b[6];b[7]!==e?(g=k.inner(100/e+"%"),b[7]=e,b[8]=g):g=b[8];b[9]!==g?(a=[g],b[9]=g,b[10]=a):a=b[10];b[11]===Symbol["for"]("react.memo_cache_sentinel")?(j=[k.child],b[11]=j):j=b[11];b[12]!==c?(e=c==null?void 0:c(k.childInner),b[12]=c,b[13]=e):e=b[13];b[14]!==e?(g=i.jsx(d("react-strict-dom").html.div,{style:j,children:e}),b[14]=e,b[15]=g):g=b[15];b[16]!==a||b[17]!==g?(c=i.jsx(d("react-strict-dom").html.div,{style:a,children:g}),b[16]=a,b[17]=g,b[18]=c):c=b[18];b[19]!==f||b[20]!==c?(j=i.jsx(d("react-strict-dom").html.div,{style:h,children:i.jsx(d("react-strict-dom").html.div,{style:f,children:c})}),b[19]=f,b[20]=c,b[21]=j):j=b[21];return j}g["default"]=a}),98);
__d("MWXMessageImage.react",["BaseImage.react","FDSBlurredBackgroundImage.react","MWXAspectRatioContainer.react","react","react-compiler-runtime","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=["children","height","maxHeight","maxWidth","renderImagePlaceholder","shouldBlur","width","xstyle"],i,j,k=j||d("react"),l={container:function(a){return[{maxWidth:a!=null?"xf68679":a,$$css:!0},{"--x-maxWidth":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(a)}]},image:{display:"x1lliihq",maxWidth:"x193iq5w",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(24),e,f,g,j,m,n,o,p,q;b[0]!==a?(e=a.children,f=a.height,j=a.maxHeight,m=a.maxWidth,n=a.renderImagePlaceholder,o=a.shouldBlur,p=a.width,q=a.xstyle,g=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=j,b[5]=m,b[6]=n,b[7]=o,b[8]=p,b[9]=q):(e=b[1],f=b[2],g=b[3],j=b[4],m=b[5],n=b[6],o=b[7],p=b[8],q=b[9]);if(b[10]!==f||b[11]!==g||b[12]!==j||b[13]!==m||b[14]!==n||b[15]!==o||b[16]!==p){a=p==null||f==null?k.jsx("div",babelHelpers["extends"]({},(i||(i=c("stylex"))).props(l.container(m)),{children:(a=n==null?void 0:n())!=null?a:k.jsx(c("BaseImage.react"),babelHelpers["extends"]({},g,{objectFit:"contain",style:{maxHeight:j+"px"},xstyle:l.image}))})):k.jsx(c("MWXAspectRatioContainer.react"),{height:f,maxHeight:j,maxWidth:m,width:p,children:function(a){var b;return(b=n==null?void 0:n())!=null?b:o!==!0?k.jsx(c("BaseImage.react"),babelHelpers["extends"]({height:f,width:p,xstyle:a},g)):k.jsx(c("FDSBlurredBackgroundImage.react"),babelHelpers["extends"]({xstyle:a},g))}});b[10]=f;b[11]=g;b[12]=j;b[13]=m;b[14]=n;b[15]=o;b[16]=p;b[17]=a}else a=b[17];j=a;b[18]!==q?(m=(i||(i=c("stylex"))).props(q),b[18]=q,b[19]=m):m=b[19];b[20]!==e||b[21]!==j||b[22]!==m?(a=k.jsxs("div",babelHelpers["extends"]({},m,{children:[j,e]})),b[20]=e,b[21]=j,b[22]=m,b[23]=a):a=b[23];return a}g["default"]=a}),98);
__d("MWPMessageListImage.react",["LSMessagingThreadTypeUtil","MAWConvertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType","MWInformedTreatment.react","MWLSThread","MWXIconHd","MWXIconStrict.react","MWXImage.react","MWXMessageBubbleCornerStyles.react","MWXMessageImage.react","MWXPressable.react","MWXThreadThemeColor","ReQL","ReQLSuspense","gkx","react","react-compiler-runtime","stylex","useMWInformTreatmentFalcoEventLogger","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=["attachment","connectBottom","connectTop","outgoing","overlayAlign","overlayHeight","overlayWidth","xstyle"],i,j,k,l=k||(k=d("react"));b=k;b.useCallback;var m=b.useState,n={left:"",right:"",position:"x10l6tqk",top:"xuivejd",$$css:!0},o={height:"x16ye13r",insetInlineStart:"xbudbmw",left:"",right:"",position:"x10l6tqk",top:"xwa60dl",transform:"x11lhmoz",width:"x5lhr3w",$$css:!0},p={appAttr:{alignItems:"x6s0dn4",borderBottomWidth:"xso031l",borderTopColor:"x1pdss0j",borderInlineEndColor:"x1593r2a",borderBottomColor:"x81c4ja",borderInlineStartColor:"xewde0t",borderInlineEndWidth:"x1lun4ml",borderInlineStartWidth:"xpilrb4",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x972fbf",boxSizing:"x9f619",display:"x78zum5",lineHeight:"x1rfph6h",paddingTop:"x1iorvi4",paddingInlineEnd:"x1icxu4v",paddingBottom:"xjkvuk6",paddingInlineStart:"x25sj25",$$css:!0},appIcon:{borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",height:"xlup9mm",marginInlineEnd:"xbelrpt",objectFit:"x19kjcj4",width:"x1kky2od",$$css:!0},hdOverlay:function(a){return[n,{insetInlineEnd:(a==="end"?"10px":void 0)!=null?"xqxgn94":a==="end"?"10px":void 0,insetInlineStart:(a==="start"?"10px":void 0)!=null?"x1lxsm33":a==="start"?"10px":void 0,$$css:!0},{"--x-insetInlineEnd":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(a==="end"?"10px":void 0),"--x-insetInlineStart":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(a==="start"?"10px":void 0)}]},hdOverlayContainer:function(a,b){return[o,{"--x-height":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(a!=null?a+"px":"100%"),"--x-width":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(b!=null?b+"px":"100%")}]},pressable:{alignItems:"x6s0dn4",display:"x78zum5",flexShrink:"xs83m0k",justifyContent:"xl56j7k",maxHeight:"xmz0i5r",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",$$css:!0}};function q(a){var b=d("react-compiler-runtime").c(18),e=a.attachment,f=a.connectBottom,g=a.connectTop,h=a.outgoing;a=a.xstyle;h=h===!0?"right":"left";var j,k,m,n;if(b[0]!==e||b[1]!==f||b[2]!==g||b[3]!==h||b[4]!==a){m=Symbol["for"]("react.early_return_sentinel");bb0:{var o=d("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({align:h,connectBottom:f,connectTop:g,flatten:"top"}),q=e;j=q.attributionAppName;if(j==null){m=null;break bb0}n=q.attributionAppIcon;k=(i||(i=c("stylex"))).props(p.appAttr,a,o)}b[0]=e;b[1]=f;b[2]=g;b[3]=h;b[4]=a;b[5]=j;b[6]=k;b[7]=m;b[8]=n}else j=b[5],k=b[6],m=b[7],n=b[8];if(m!==Symbol["for"]("react.early_return_sentinel"))return m;b[9]!==n?(q=n!=null?l.jsx(c("MWXImage.react"),{alt:"",src:n,xstyle:p.appIcon}):null,b[9]=n,b[10]=q):q=b[10];b[11]===Symbol["for"]("react.memo_cache_sentinel")?(o={className:"xzsf02u x1nxh6w3 x13faqbe"},b[11]=o):o=b[11];b[12]!==j?(e=l.jsx("span",babelHelpers["extends"]({},o,{children:j})),b[12]=j,b[13]=e):e=b[13];b[14]!==k||b[15]!==q||b[16]!==e?(f=l.jsxs("div",babelHelpers["extends"]({},k,{children:[q,e]})),b[14]=k,b[15]=q,b[16]=e,b[17]=f):f=b[17];return f}function r(a){var b=d("react-compiler-runtime").c(11),e=a.attachment,f=a.overlayAlign,g=a.overlayHeight;a=a.overlayWidth;f=f===void 0?"end":f;e=e;e=e.isHd===!0;if(!e)return null;b[0]!==g||b[1]!==a?(e=(i||(i=c("stylex"))).props(p.hdOverlayContainer(g,a)),b[0]=g,b[1]=a,b[2]=e):e=b[2];b[3]!==f?(g=(i||(i=c("stylex"))).props(p.hdOverlay(f)),b[3]=f,b[4]=g):g=b[4];b[5]===Symbol["for"]("react.memo_cache_sentinel")?(a=l.jsx(c("MWXIconStrict.react"),{color:d("MWXThreadThemeColor").mwxThreadThemeColor("rgba(255,255,255,0.7)"),icon:c("MWXIconHd"),size:18}),b[5]=a):a=b[5];b[6]!==g?(f=l.jsx("div",babelHelpers["extends"]({},g,{"data-testid":void 0,children:a})),b[6]=g,b[7]=f):f=b[7];b[8]!==e||b[9]!==f?(a=l.jsx("div",babelHelpers["extends"]({},e,{children:f})),b[8]=e,b[9]=f,b[10]=a):a=b[10];return a}function s(a){var b=d("react-compiler-runtime").c(26),e=a.attachment,g=a.height,h=a.setIsBlurredImageVisible;a=a.width;var i=(j||(j=c("useReStore")))(),k;b[0]!==e.messageId||b[1]!==i.tables.messages?(k=function(){return d("ReQL").fromTableAscending(i.tables.messages.index("messageId")).getKeyRange(e.messageId)},b[0]=e.messageId,b[1]=i.tables.messages,b[2]=k):k=b[2];var m;b[3]!==e.messageId||b[4]!==i?(m=[e.messageId,i],b[3]=e.messageId,b[4]=i,b[5]=m):m=b[5];k=d("ReQLSuspense").useFirstExn(k,m,f.id+":170");b[6]!==k?(m={message:k},b[6]=k,b[7]=m):m=b[7];var n=c("useMWInformTreatmentFalcoEventLogger")(m);m=(k=d("MWLSThread").useThread(e.threadKey,t))!=null?k:{isSecureThread:!1,threadType:null};k=m.isSecureThread;m=m.threadType;var o=e.gatingTitle,q=e.gatingType,r=e.previewUrl,s;b[8]!==q||b[9]!==k?(s=k?d("MAWConvertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType").convertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType(parseInt(q,10)):q,b[8]=q,b[9]=k,b[10]=s):s=b[10];q=s;k=d("MWInformedTreatment.react").checkIsInformedTreatmentVisible(o,q,r,m);if(q==null||o==null||!k)return null;s=q==="warning_screens";m=g+"px";k=a!=null?a+"px":"100%";b[11]!==m||b[12]!==k?(g={height:m,width:k},b[11]=m,b[12]=k,b[13]=g):g=b[13];b[14]!==e.messageId||b[15]!==o||b[16]!==q||b[17]!==r||b[18]!==g?(a=l.jsx(d("MWInformedTreatment.react").MWInformedTreatment,{dimension:g,gatingTitle:o,gatingType:q,mediaRenderQpl:null,messageId:e.messageId,previewUrl:r}),b[14]=e.messageId,b[15]=o,b[16]=q,b[17]=r,b[18]=g,b[19]=a):a=b[19];m=a;b[20]!==o||b[21]!==s||b[22]!==m||b[23]!==n||b[24]!==h?(k=s?l.jsx(c("MWXPressable.react"),{onPress:function(){var a=d("MWInformedTreatment.react").getEventTitle(o);h(!0);a!=null&&n("tap_to_reveal",{name:a,type:"warning_screens"})},overlayRadius:"normal",xstyle:p.pressable,children:m}):m,b[20]=o,b[21]=s,b[22]=m,b[23]=n,b[24]=h,b[25]=k):k=b[25];return k}function t(a){return{isSecureThread:d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType),threadType:a.threadType}}function a(a){var b=d("react-compiler-runtime").c(38),e,f,g,i,j,k,n,o,t;b[0]!==a?(e=a.attachment,f=a.connectBottom,g=a.connectTop,j=a.outgoing,k=a.overlayAlign,n=a.overlayHeight,o=a.overlayWidth,t=a.xstyle,i=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=i,b[5]=j,b[6]=k,b[7]=n,b[8]=o,b[9]=t):(e=b[1],f=b[2],g=b[3],i=b[4],j=b[5],k=b[6],n=b[7],o=b[8],t=b[9]);a=e.attributionAppName!=null;var v=j===!0?"right":"left";a=a===!0?"bottom":"none";var w;b[10]!==f||b[11]!==g||b[12]!==v||b[13]!==a?(w=d("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({align:v,connectBottom:f,connectTop:g,flatten:a}),b[10]=f,b[11]=g,b[12]=v,b[13]=a,b[14]=w):w=b[14];v=w;a=m(!1);w=a[0];var x=a[1];a=(a=d("MWLSThread").useThread(e.threadKey,u))!=null?a:!1;var y=c("gkx")("179"),z=e.gatingTitle==="misinformation"||e.gatingTitle==="misleading_news"||e.gatingTitle==="missing_context"||e.gatingTitle==="missing_context"||e.gatingTitle==="altered_media"||e.gatingTitle==="false_news";z=z&&y;y=!w&&e.gatingTitle!=null&&e.gatingType!=null&&a&&!z;b[15]!==e||b[16]!==i?(w=function(){var a=i,b=a.height,c=a.maxHeight,d=a.maxWidth;a=a.width;return l.jsx(s,{attachment:e,height:b!=null?Math.min(b,c):c,setIsBlurredImageVisible:x,width:a!=null&&d!=null?Math.min(a,d):a!=null?a:d})},b[15]=e,b[16]=i,b[17]=w):w=b[17];a=w;z=y?a:void 0;b[18]!==v||b[19]!==t?(w=[p.root,t,v],b[18]=v,b[19]=t,b[20]=w):w=b[20];b[21]!==e||b[22]!==f||b[23]!==g||b[24]!==j||b[25]!==t?(y=l.jsx(q,{attachment:e,connectBottom:f,connectTop:g,outgoing:j,xstyle:t}),b[21]=e,b[22]=f,b[23]=g,b[24]=j,b[25]=t,b[26]=y):y=b[26];b[27]!==e||b[28]!==k||b[29]!==n||b[30]!==o?(a=l.jsx(r,{attachment:e,overlayAlign:k,overlayHeight:n,overlayWidth:o}),b[27]=e,b[28]=k,b[29]=n,b[30]=o,b[31]=a):a=b[31];b[32]!==i||b[33]!==z||b[34]!==w||b[35]!==y||b[36]!==a?(v=l.jsxs(c("MWXMessageImage.react"),babelHelpers["extends"]({renderImagePlaceholder:z,xstyle:w},i,{children:[y,a]})),b[32]=i,b[33]=z,b[34]=w,b[35]=y,b[36]=a,b[37]=v):v=b[37];return v}function u(a){return d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType)||d("LSMessagingThreadTypeUtil").isPublicCMThread(a.threadType)}g.MWPMessageListImageAppAttribution=q;g.MWPMessageListImageHdWatermark=r;g.InformedTreatment=s;g.MWPMessageListImage=a}),98);
__d("MWV2AttachmentLoadingPlaceholder.react",["InteractionTracingMetrics","MWXAspectRatioContainer.react","MWXGlimmer.react","MWXMessageBubbleCornerStyles.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useEffect,k={glimmer:{display:"x1lliihq",height:"x5yr21d",width:"xh8yej3",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(21),e=a.connectBottom,f=a.connectTop,g=a.descriptionForLogging,h=a.hasAppAttribution,l=a.hasCornerStyles,m=a.height,n=a.maxHeight,o=a.maxWidth,p=a.mediaRenderQpl,q=a.outgoing,r=a.width,s=a.xstyle,t=l===void 0?!0:l;a=n===void 0?200:n;l=o===void 0?480:o;b[0]!==g||b[1]!==m||b[2]!==p||b[3]!==r?(n=function(){var a={string:{call_site:g}};r!=null&&m!=null?p==null||p.addPoint("render-loading-placeholder",a):p==null||p.addPoint("render-loading-placeholder-null-dimensions",a);c("InteractionTracingMetrics").currentInteractionLogger().forEach(function(a){c("InteractionTracingMetrics").addMarkerPoint(a.traceId,"render-attachment-loading-placeholder","AppTiming",void 0,{call_site:g})});return function(){p==null||p.addPoint("unmount-loading-placeholder",a),c("InteractionTracingMetrics").currentInteractionLogger().forEach(function(a){c("InteractionTracingMetrics").addMarkerPoint(a.traceId,"unmount-attachment-loading-placeholder","AppTiming",void 0,{call_site:g})})}},o=[m,p,r,g],b[0]=g,b[1]=m,b[2]=p,b[3]=r,b[4]=n,b[5]=o):(n=b[4],o=b[5]);j(n,o);if(r==null)return null;if(m==null)return null;n=q===!0?"right":"left";o=h===!0?"bottom":"none";b[6]!==e||b[7]!==f||b[8]!==n||b[9]!==o?(q=d("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({align:n,connectBottom:e,connectTop:f,flatten:o}),b[6]=e,b[7]=f,b[8]=n,b[9]=o,b[10]=q):q=b[10];var u=q;b[11]!==u||b[12]!==t||b[13]!==s?(h=function(a){return i.jsx(c("MWXGlimmer.react"),{index:1,xstyle:[a,k.glimmer,t===!0&&u,s]})},b[11]=u,b[12]=t,b[13]=s,b[14]=h):h=b[14];b[15]!==m||b[16]!==a||b[17]!==l||b[18]!==h||b[19]!==r?(e=i.jsx("div",{"data-testid":void 0,children:i.jsx(c("MWXAspectRatioContainer.react"),{height:m,maxHeight:a,maxWidth:l,width:r,children:h})}),b[15]=m,b[16]=a,b[17]=l,b[18]=h,b[19]=r,b[20]=e):e=b[20];return e}g["default"]=a}),98);
__d("appendParamToUrl",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){a=new URL(a);a.searchParams.set(b,c);return a.toString()}f["default"]=a}),66);
__d("useMWMediaViewerOpenQPLLogger",["qpl","react","react-compiler-runtime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;var i=c("requireDeferred")("QPLUserFlow").__setRef("useMWMediaViewerOpenQPLLogger"),j=c("qpl")._(25298743,"1403"),k=6e3*10;function a(){var a=d("react-compiler-runtime").c(1),b=n,c=m,e=l;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(e={endCancel:e,endSuccess:c,startFlow:b},a[0]=e):e=a[0];return e}function l(a){i.onReadyImmediately(function(b){b.endCancel(j,{cancelReason:a})})}function m(a){i.onReadyImmediately(function(b){b.endSuccess(j,{annotations:a})})}function n(a){var b=a.attachmentType,c=a.entryPoint;a=a.isSecure;var d={attachmentType:b,entryPoint:c,isSecure:(a!=null?a:!1).toString()};i.onReadyImmediately(function(a){a.start(j,{annotations:{string:babelHelpers["extends"]({},d)},cancelOnUnload:!0,timeoutInMs:k})})}g.useMWMediaViewerOpenQPLLogger=a}),98);
__d("useMWV2FocusRowAfterClosingPushView",["MWV2MessageRowIsRowFocusedContext.react","react","react-compiler-runtime","useCometRouterState","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useContext,j=b.useLayoutEffect;function a(){var a=d("react-compiler-runtime").c(12),b=i(d("MWV2MessageRowIsRowFocusedContext.react").context),e=b.isDialogOpened,f=b.setIsDialogOpened,g=b.setFocused;b=c("useCometRouterState")();var h;if(a[0]!==b){if(b==null)h=0;else{var m=b.pushViewStack;h=m==null?0:m.length}a[0]=b;a[1]=h}else h=a[1];var n=c("usePrevious")(h);a[2]!==e||a[3]!==h||a[4]!==n||a[5]!==g||a[6]!==f?(m=function(){if(n!=null){e===!0&&n>0&&h===0&&(f(l),g(k));return}},a[2]=e,a[3]=h,a[4]=n,a[5]=g,a[6]=f,a[7]=m):m=a[7];a[8]!==e||a[9]!==h||a[10]!==n?(b=[e,n,h],a[8]=e,a[9]=h,a[10]=n,a[11]=b):b=a[11];j(m,b);return f}function k(){return!0}function l(){return!1}g["default"]=a}),98);
__d("MWV2MediaViewerContainer.react",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(12),c=a.actions,e=a.children,f=a.fallbackHeader;a=a.hideActions;a=a===void 0?!1:a;var g;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g={className:"x1qjc9v5 xal61yo x9f619 x78zum5 xdt5ytf x1iyjqo2 x5yr21d x6ikm8r x10wlt62 x1n2onr6 x87ps6o xh8yej3 x1uvtmcs"},b[0]=g):g=b[0];var h;b[1]!==a?(h={0:{className:"xdg88n9 x10l6tqk x1tk7jg1"},1:{className:"xdg88n9 x10l6tqk x1tk7jg1 x1s85apg"}}[!!a<<0],b[1]=a,b[2]=h):h=b[2];b[3]!==c||b[4]!==h?(a=i.jsx("div",babelHelpers["extends"]({},h,{children:c})),b[3]=c,b[4]=h,b[5]=a):a=b[5];b[6]!==f?(c=f!=null&&i.jsx("div",{className:"xzwoauc x10l6tqk xfr5jun",children:f}),b[6]=f,b[7]=c):c=b[7];b[8]!==e||b[9]!==a||b[10]!==c?(h=i.jsxs("div",babelHelpers["extends"]({},g,{"data-testid":void 0,children:[e,a,c]})),b[8]=e,b[9]=a,b[10]=c,b[11]=h):h=b[11];return h}g["default"]=a}),98);
__d("MWV2MediaViewerActionButton.react",["MWXCircleButton.react","MWXTooltip.react","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["ref"],i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(9),e,f;b[0]!==a?(f=a.ref,e=babelHelpers.objectWithoutPropertiesLoose(a,h),b[0]=a,b[1]=e,b[2]=f):(e=b[1],f=b[2]);a=c("gkx")("17009");b[3]!==e||b[4]!==f?(a=j.jsx(c("MWXCircleButton.react"),babelHelpers["extends"]({size:a?40:36,type:a?"overlay":"dark-overlay"},e,{ref:f})),b[3]=e,b[4]=f,b[5]=a):a=b[5];b[6]!==e.label||b[7]!==a?(f=j.jsx(c("MWXTooltip.react"),{tooltip:e.label,children:a}),b[6]=e.label,b[7]=a,b[8]=f):f=b[8];return f}g["default"]=a}),98);
__d("MWV2MediaViewerCloseControl.react",["fbt","MWV2MediaViewerActionButton.react","MWXIconCross","MWXRowItem.react","emptyFunction","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=h._(/*BTDS*/"Close");function a(a){var b=d("react-compiler-runtime").c(7);a=a.onClose;var e;b[0]!==a?(e={0:{},1:{className:"xlshs6z"}}[!!(a==null)<<0],b[0]=a,b[1]=e):e=b[1];a=a!=null?a:c("emptyFunction");var f;b[2]!==a?(f=j.jsx(c("MWV2MediaViewerActionButton.react"),{icon:c("MWXIconCross"),label:k,onPress:a}),b[2]=a,b[3]=f):f=b[3];b[4]!==e||b[5]!==f?(a=j.jsx(c("MWXRowItem.react"),{children:j.jsx("div",babelHelpers["extends"]({},e,{children:f}))}),b[4]=e,b[5]=f,b[6]=a):a=b[6];return a}g["default"]=a}),226);
__d("MWV2MediaViewerControlsFallback.react",["MWV2MediaViewerCloseControl.react","MWXRow.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(2);a=a.onClose;var e;b[0]!==a?(e=i.jsx(c("MWXRow.react"),{paddingTop:0,spacing:8,children:i.jsx(c("MWV2MediaViewerCloseControl.react"),{onClose:a})}),b[0]=a,b[1]=e):e=b[1];return e}g["default"]=a}),98);
__d("MWV2MediaViewerFallback.react",["MWV2MediaViewerContainer.react","MWV2MediaViewerControlsFallback.react","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(7);a=a.onClose;var e=c("gkx")("17009"),f;b[0]!==a?(f=!e&&i.jsx(c("MWV2MediaViewerControlsFallback.react"),{onClose:a}),b[0]=a,b[1]=f):f=b[1];b[2]!==a?(e=e&&i.jsx(c("MWV2MediaViewerControlsFallback.react"),{onClose:a}),b[2]=a,b[3]=e):e=b[3];b[4]!==f||b[5]!==e?(a=i.jsx(c("MWV2MediaViewerContainer.react"),{actions:f,fallbackHeader:e,children:null}),b[4]=f,b[5]=e,b[6]=a):a=b[6];return a}g["default"]=a}),98);
__d("useMWV2MediaViewerShowDialog",["JSResourceForInteraction","MWV2MediaViewerFallback.react","react","react-compiler-runtime","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useEffect;function k(a){return i.jsx(c("MWV2MediaViewerFallback.react"),{onClose:a})}k.displayName=k.name+" [from "+f.id+"]";function a(a){var b=d("react-compiler-runtime").c(8),e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=c("JSResourceForInteraction")("MWV2MediaViewer.react").__setRef("useMWV2MediaViewerShowDialog"),b[0]=e):e=b[0];e=c("useMWXLazyDialog")(e,k);var f=e[0],g=e[1],h;b[1]!==a||b[2]!==g?(e=function(){a||g()},h=[g,a],b[1]=a,b[2]=g,b[3]=e,b[4]=h):(e=b[3],h=b[4]);j(e,h);b[5]!==g||b[6]!==f?(e=[f,g],b[5]=g,b[6]=f,b[7]=e):e=b[7];return e}g["default"]=a}),98);
__d("XCometMessengerMediaControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/messenger_media/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("XCometMessengerPhotoControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/messenger_photo/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("useMWV2MediaViewerURL",["I64","Int64Hooks","LSIntEnum","MessagingAttachmentType","XCometMessengerMediaControllerRouteBuilder","XCometMessengerPhotoControllerRouteBuilder","justknobx","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=d("react-compiler-runtime").c(3),e,f;b[0]!==a?(e=function(){if(a==null)return null;var b=(h||(h=d("I64"))).equal(a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE));return b&&c("justknobx")._("1284")===!1?c("XCometMessengerPhotoControllerRouteBuilder").buildURL({fbid:a.attachmentFbid,message_id:a.messageId,photo_ids:void 0}):c("XCometMessengerMediaControllerRouteBuilder").buildURL({attachment_id:a.attachmentFbid,message_id:a.messageId,thread_id:h.to_string(a.threadKey)})},f=[a],b[0]=a,b[1]=e,b[2]=f):(e=b[1],f=b[2]);return d("Int64Hooks").useMemoInt64(e,f)}g["default"]=a}),98);
__d("MWAnimatedImageThumbnailWithPlayButton.react",["fbt","$InternalEnum","CometHeroHoldTrigger.react","CometPlaceholder.react","I64","LSAuthorityLevel","LSIntEnum","MAWAttachmentBlob.react","MAWImageUtils","MAWThreadCutover","MWAnimatedImageControlsUtil","MWLSThreadDisplayContext","MWMessageListImageSizingUtils","MWPMessageListImage.react","MWV2AttachmentLoadingPlaceholder.react","MWV2LogMessageClick","MWVideoPlayerPlayButton.react","MWXAspectRatioContainer.react","MWXImage.react","MWXMessageBubbleCornerStyles.react","MWXPressable.react","appendParamToUrl","gkx","justknobx","promiseDone","react","react-compiler-runtime","useAsyncReStore","useMWMediaViewerOpenQPLLogger","useMWV2FocusRowAfterClosingPushView","useMWV2MediaViewerShowDialog","useMWV2MediaViewerURL"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||(i=d("react"));e=i;var m=e.useCallback,n=e.useEffect,o=e.useState,p={imageWithAppAttribution:{borderEndEndRadius:"x16uus16",borderEndStartRadius:"xbiv7yw",bottom:"x1ey2m1c",position:"x1n2onr6",$$css:!0},wrapper:{display:"x1lliihq",$$css:!0},wrapperForAppAttribution:{marginBottom:"x1ibc7va",$$css:!0},wrapperReplyImage:{cursor:"x1ypdohk",$$css:!0}},q=b("$InternalEnum").Mirrored(["Composer","GIFPicker","MediaViewer","Thread"]);function a(a){var b=d("react-compiler-runtime").c(2),e;b[0]!==a?(e=l.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWAnimatedImageThumbnailWithPlayButton",children:l.jsx(r,babelHelpers.extends({},a))}),b[0]=a,b[1]=e):e=b[1];return e}function r(a){var b,e,f=a.altText,g=a.connectBottom,i=a.connectTop,r=a.dbAttachment,s=a.entryPoint,t=a.gifPreviewUrl,u=a.isReplyImage,v=u===void 0?!1:u,w=a.isSecure,x=a.mediaRenderQpl,y=a.message,z=a.onPlay;u=a.onPress;var A=a.outgoing,B=a.previewHeight,C=a.previewWidth,D=a.sourceURL;a=a.testid;var E=c("useAsyncReStore")(),F=d("MWAnimatedImageControlsUtil").useGetMessengerAutoplaySetting();a=o(null);var G=a[0],H=a[1];a=c("useMWV2MediaViewerURL")(r);var I=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();I=d("MWMessageListImageSizingUtils").getMaxPreviewHeightAndWidth(w!=null?w:!0,I!=null?I:void 0,!1);var J=I.maxHeight,K=I.maxWidth,L=m(function(){x==null||x.endSuccess({bool:{thumbnail_generated_for_gif:!0}})},[x]),M=m(function(){x==null||x.endFail("gif-thumbnail-render-failed")},[x]),N=r!=null&&r.previewUrl==null&&w!==!1?d("MAWAttachmentBlob.react").getAttachmentBlob_CausesSuspense(r,"gifToBlob",x):void 0,O=c("useMWV2FocusRowAfterClosingPushView")();I=c("useMWV2MediaViewerShowDialog")(!1);var P=I[0];I=d("useMWMediaViewerOpenQPLLogger").useMWMediaViewerOpenQPLLogger();var Q=I.startFlow,R=s===q.Thread,S=s===q.Composer;I=s===q.MediaViewer;s=s===q.GIFPicker;n(function(){var a=null;async function b(){x==null||x.addPoint("gif-thumbnail-generation-started");var b=t;if(b==null)if(r==null&&D!=null)b=D;else try{(r==null?void 0:r.previewUrl)!=null?b=r==null?void 0:r.previewUrl:N!=null&&(b=N)}catch(a){return null}if(b==null)return null;var e=/^(?:data|blob):/.test(b);e||(b=c("appendParamToUrl")(b,"not-from-cache-please",""));e=c("gkx")("12666");b=await d("MAWImageUtils").generateGIFThumbnail(b,B,C,e);x==null||x.addPoint("gif-thumbnail-generation-completed");if(b!=null){x==null||x.addPoint("gif-thumbnail-generation-completed-successfully");e=new Blob([b.jpegThumbnail]);a=URL.createObjectURL(e);H(a)}}b().catch(function(){x==null||x.endFail("gif-thumbnail-generation-failed"),H(null)});return function(){a!=null&&URL.revokeObjectURL(a)}},[r,t,x,B,C,D,N]);var T=c("justknobx")._("3133"),U=d("MAWThreadCutover").useIsCutoverOpenThread(y==null?void 0:y.threadKey)&&T;T=w===!1&&!U&&R&&y!=null&&(j||(j=d("I64"))).gt(y.authorityLevel,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").CLIENT_PARTIAL))?{passthroughProps:{origSrc:r==null?void 0:r.previewUrl},url:a}:void 0;a=function(){y!=null&&c("promiseDone")(E,function(a){d("MWV2LogMessageClick").log(a,y,28)});Q({attachmentType:"IMAGE",entryPoint:"thread_view",isSecure:w});O(function(){return!0});if(r!=null&&(w===!0||U))return P({attachment:r},function(){})};var V=(r==null?void 0:r.attributionAppName)!=null,W=d("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({align:A===!0?"right":"left",connectBottom:g,connectTop:i});if(B==null||C==null)return null;b=(b=r==null?void 0:r.accessibilitySummaryText)!=null?b:f;var X=h._(/*BTDS*/"Tap to play GIF {gif_alt_text}",[h._param("gif_alt_text",(e=r==null?void 0:r.accessibilitySummaryText)!=null?e:f)]);if(R){b=h._(/*BTDS*/"Open GIF {gif_alt_text}",[h._param("gif_alt_text",(e=r==null?void 0:r.accessibilitySummaryText)!=null?e:f)])}else if(s){b=h._(/*BTDS*/"Send GIF {gif_alt_text}",[h._param("gif_alt_text",(e=r==null?void 0:r.accessibilitySummaryText)!=null?e:f)])}else if(I){b=(e=(s=r==null?void 0:r.accessibilitySummaryText)!=null?s:f)!=null?e:h._(/*BTDS*/"GIF")}s=v||I;return l.jsx(c("MWXPressable.react"),{"aria-label":b,cursorDisabled:s,disabled:s,display:"block",linkProps:T,onPress:s?void 0:R?a:u,testid:void 0,xstyle:[p.wrapper,V&&p.wrapperForAppAttribution,v&&p.wrapperReplyImage],children:l.jsx(c("MWXAspectRatioContainer.react"),{height:B,maxHeight:R?J:B,maxWidth:R?K:C,width:C,children:function(a){var b;return l.jsxs(l.Fragment,{children:[G==null?l.jsxs(l.Fragment,{children:[l.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{connectBottom:g,connectTop:i,descriptionForLogging:"MAWSecureGIFAttachment.NoGIFThumbnail",hasAppAttribution:V,hasCornerStyles:R,height:B,maxHeight:R?J:B,maxWidth:R?K:C,mediaRenderQpl:x,outgoing:A,width:C,xstyle:[a,R&&W,V&&p.imageWithAppAttribution]}),l.jsx(c("CometHeroHoldTrigger.react"),{description:"MAWSecureGIFAttachment.NoGIFThumbnail",hold:!0})]}):l.jsx(c("MWXImage.react"),{alt:(b=r==null?void 0:r.accessibilitySummaryText)!=null?b:f,height:B,onError:M,onLoad:L,src:G,width:C,xstyle:[a,R&&W,V&&p.imageWithAppAttribution]}),r!=null&&V&&R&&l.jsx("div",{className:"x1f1lzrh x10l6tqk xh8yej3",children:l.jsx(d("MWPMessageListImage.react").MWPMessageListImageAppAttribution,{attachment:r,connectBottom:g,connectTop:i,outgoing:A})}),F===d("MWAnimatedImageControlsUtil").MWAutoplayAnimationsSetting.OFF&&l.jsx(c("MWVideoPlayerPlayButton.react"),{alt:X,isVisible:!0,onClick:v?void 0:z,size:v||S?"SMALL":"LARGE"})]})}})})}r.displayName=r.name+" [from "+f.id+"]";g.AnimatedImageEntryPoint=q;g.MWAnimatedImageThumbnailWithPlayButton=a}),226);
__d("MWCMIsSubthreadContext.react",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;e=c.createContext;var j=c.useContext;c.useMemo;var k=e({isSubthread:!1});function a(){return j(k)}function b(a){var b=d("react-compiler-runtime").c(5),c=a.children;a=a.isSubthread;var e;b[0]!==a?(e={isSubthread:a},b[0]=a,b[1]=e):e=b[1];a=e;e=a;b[2]!==c||b[3]!==e?(a=i.jsx(k.Provider,{value:e,children:c}),b[2]=c,b[3]=e,b[4]=a):a=b[4];return a}g.useIsSubthreadContext=a;g.MWCMIsSubthreadContextProvider=b}),98);
__d("MWXIconChevronLeft",["MWXSvgIcon","SVGIcon","cr:22266","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22266")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWChatMediaViewerNavigationTapTarget.react",["CometTrackingNodeProvider.react","Locale","MWXIconChevronLeft","MWXIconChevronRight","MWXIconStrict.react","MWXPressable.react","react","react-compiler-runtime","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k=d("Locale").isRTL(),l={alignItems:"x6s0dn4",aspectRatio:"x1plog1",backgroundColor:"x1l31dnx",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",boxShadow:"x1qeybcx",display:"x78zum5",justifyContent:"xl56j7k",$$css:!0},m={buttonContainer:function(a){return[l,{height:a!=null?"x16ye13r":a,$$css:!0},{"--x-height":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(a)}]},buttonContainerBackground:{backgroundColor:"xiwuv7k",$$css:!0},buttonContainerHoverLeft:{transform:"xs51lif",$$css:!0},buttonContainerHoverRight:{transform:"xzycz3q",$$css:!0},buttonOpacity:function(a,b){return[{opacity:a!=null?"xb4nw82":a,":hover_opacity":b!=null?"x13tpr2m":b,$$css:!0},{"--x-opacity":a!=null?a:void 0,"--x-1u3p0zx":b!=null?b:void 0}]},navButton:{alignItems:"x6s0dn4",display:"x78zum5",paddingTop:"xyamay9",paddingInlineEnd:"xv54qhq",paddingBottom:"x1l90r2v",paddingInlineStart:"xf7dkkf",position:"x1n2onr6",transitionDuration:"x1k90msu",transitionProperty:"x6o7n8i",transitionTimingFunction:"x9lcvmn",willChange:"x6my1t9",$$css:!0},tapTargetOverlay:{height:"x5yr21d",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(20),e=a.buttonHoverOpacity,f=a.buttonOpacity,g=a.buttonSize,i=a.direction,l=a.label,n=a.onClick,o=a.shouldHide,p=a.shouldHideContainerBackground,q=a.shouldHideWithoutTransition,r=a.testid;a=a.trackingNode;var s=e===void 0?1:e,t=f===void 0?.6:f,u=g===void 0?40:g;e=o===void 0?!1:o;var v=p===void 0?!1:p;f=q===void 0?!1:q;var w=k?c("MWXIconChevronRight"):c("MWXIconChevronLeft"),x=k?c("MWXIconChevronLeft"):c("MWXIconChevronRight");b[0]!==s||b[1]!==t||b[2]!==u||b[3]!==i||b[4]!==v?(g=function(a){a=a.hovered;return j.jsx("div",babelHelpers["extends"]({},(h||(h=c("stylex"))).props(m.navButton,m.buttonOpacity(t,s),!v&&m.buttonContainerBackground,a&&(i==="previous"?m.buttonContainerHoverLeft:m.buttonContainerHoverRight)),{children:j.jsx("div",babelHelpers["extends"]({},h.props(m.buttonContainer(u)),{children:j.jsx(c("MWXIconStrict.react"),{icon:i==="previous"?w:x,size:u/2})}))}))},b[0]=s,b[1]=t,b[2]=u,b[3]=i,b[4]=v,b[5]=g):g=b[5];b[6]!==l||b[7]!==n||b[8]!==g||b[9]!==r?(o=j.jsx(c("MWXPressable.react"),{"aria-label":l,focusable:!1,onPress:n,testid:void 0,xstyle:m.tapTargetOverlay,children:g}),b[6]=l,b[7]=n,b[8]=g,b[9]=r,b[10]=o):o=b[10];p=o;b[11]!==e||b[12]!==f?(q={0:{className:"x6s0dn4 x78zum5 xl56j7k x1hc1fzr x1n2onr6 x1ebt8du x1jl3cmp x1dhq9h xfwg19i x1vjfegm x5yr21d"},2:{className:"x6s0dn4 x78zum5 xl56j7k x1n2onr6 x1jl3cmp xfwg19i x1vjfegm xg01cxk xhb22t3 xls3em1 xlshs6z x5yr21d"},1:{className:"x6s0dn4 xl56j7k x1hc1fzr x1n2onr6 x1ebt8du x1jl3cmp x1dhq9h xfwg19i x1vjfegm x5yr21d x1s85apg"},3:{className:"x6s0dn4 xl56j7k x1n2onr6 x1jl3cmp xfwg19i x1vjfegm xg01cxk xhb22t3 xls3em1 xlshs6z x5yr21d x1s85apg"}}[!!e<<1|!!f<<0],b[11]=e,b[12]=f,b[13]=q):q=b[13];b[14]!==p||b[15]!==a?(l=a!=null?j.jsx(c("CometTrackingNodeProvider.react"),{trackingNode:a,children:p}):p,b[14]=p,b[15]=a,b[16]=l):l=b[16];b[17]!==l||b[18]!==q?(n=j.jsx("div",babelHelpers["extends"]({},q,{children:l})),b[17]=l,b[18]=q,b[19]=n):n=b[19];return n}g["default"]=a}),98);
__d("MWThumbnailDurationPill",["getFormattedTimestamp","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(7),e=a.spacing;a=a.videoDuration;var f;b[0]!==e?(f={0:{className:"x6s0dn4 x18l40ae xqbdsaf xpf24wh x14a4ghu x1a4jp9x x14ctfv x1ncwhqj x1nn3v0j x1icxu4v x1120s5i x25sj25 x10l6tqk xxymvpz xqo3gd x11dcrhx"},1:{className:"x6s0dn4 x18l40ae xqbdsaf xpf24wh x14a4ghu x1a4jp9x x14ctfv x1ncwhqj x1nn3v0j x1icxu4v x1120s5i x25sj25 x10l6tqk xxymvpz xbfrwjf xxx7yvo"}}[!!(e==="TIGHT")<<0],b[0]=e,b[1]=f):f=b[1];b[2]!==a?(e=c("getFormattedTimestamp")(a),b[2]=a,b[3]=e):e=b[3];b[4]!==f||b[5]!==e?(a=i.jsx("div",babelHelpers["extends"]({},f,{children:e})),b[4]=f,b[5]=e,b[6]=a):a=b[6];return a}g["default"]=a}),98);
__d("useVideoPlayerHasStartedSeekingSinceLastPlay",["VideoPlayerHooks","createVideoStateHook","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useEffect;b=d("createVideoStateHook").createVideoStateHook(null);var k=b.stateHook;function a(){var a=d("react-compiler-runtime").c(5),b=k(!1),c=b[0],e=b[1],f=(i||(i=d("VideoPlayerHooks"))).useSeeking(),g=i.usePlaying(),h;a[0]!==g||a[1]!==f||a[2]!==e?(b=function(){f&&!g&&e(!0),g&&e(!1)},h=[g,f,e],a[0]=g,a[1]=f,a[2]=e,a[3]=b,a[4]=h):(b=a[3],h=a[4]);j(b,h);return c}g["default"]=a}),98);
__d("useMWVideoPlayerBigPlayButtonOverlay.react",["MWVideoPlayerPlayButton.react","VideoPlayerHooks","react","react-compiler-runtime","useVideoPlayerHasStartedPlayingAtLeastOnce","useVideoPlayerHasStartedSeekingSinceLastPlay"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));h.useCallback;function a(a){var b=d("react-compiler-runtime").c(14),e;b[0]!==a?(e=a===void 0?{}:a,b[0]=a,b[1]=e):e=b[1];a=e;e=a.buttonSize;var f=a.forceVisible,g=a.overrideInteraction,h=a.shouldUnmute;a=e===void 0?"large":e;e=(i||(i=d("VideoPlayerHooks"))).usePaused();var k=i.useEnded(),l=c("useVideoPlayerHasStartedPlayingAtLeastOnce")(),m=c("useVideoPlayerHasStartedSeekingSinceLastPlay")(),n=i.useLastMuteReason(),o=i.useController(),p;b[2]!==o||b[3]!==n||b[4]!==h?(p=function(){o.play("user_initiated"),h===!0&&n!=="user_initiated"&&o.setMuted(!1,"product_initiated")},b[2]=o,b[3]=n,b[4]=h,b[5]=p):p=b[5];p=p;g=g!=null?g.handler:p;p=f===!0||f===!1?f:!l&&e;f=a==="small"?"SMALL":"LARGE";l=k&&!m?"REPLAY":"PLAY";b[6]!==p||b[7]!==g||b[8]!==f||b[9]!==l?(e=j.jsx(c("MWVideoPlayerPlayButton.react"),{isVisible:p,onClick:g,size:f,type:l}),b[6]=p,b[7]=g,b[8]=f,b[9]=l,b[10]=e):e=b[10];a=e;b[11]!==a||b[12]!==p?(k={bigPlayButtonElement:a,bigPlayButtonIsVisible:p},b[11]=a,b[12]=p,b[13]=k):k=b[13];return k}g["default"]=a}),98);
__d("MWChatVideoPlayerControls.react",["MWThumbnailDurationPill","VideoPlayerControlsContainerOverlay.react","VideoPlayerControlsGroups.react","VideoPlayerFullscreenControl.react","VideoPlayerHooks","VideoPlayerPlaybackControl.react","VideoPlayerPlaybackTimer.react","VideoPlayerScrubber.react","VideoPlayerVolumeControl.react","react","react-compiler-runtime","useMWVideoPlayerBigPlayButtonOverlay.react","useVideoPlayerDefaultControlsVisibility","useVideoPlayerHasStartedPlayingAtLeastOnce"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function k(a){var b=d("react-compiler-runtime").c(3);a=a.children;var c;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(c={className:"x12y6twl x1g0ag68"},b[0]=c):c=b[0];b[1]!==a?(c=j.jsx("span",babelHelpers["extends"]({},c,{children:a})),b[1]=a,b[2]=c):c=b[2];return c}function a(a){var b=d("react-compiler-runtime").c(15),e=a.hideExpandButton;a=a.isMediaViewer;var f=c("useVideoPlayerDefaultControlsVisibility")(),g=f.isControlsVisible;f=f.onUserInteraction;var h=(i||(i=d("VideoPlayerHooks"))).usePaused(),l;b[0]!==h?(l={forceVisible:h},b[0]=h,b[1]=l):l=b[1];h=c("useMWVideoPlayerBigPlayButtonOverlay.react")(l);l=h.bigPlayButtonElement;h=i.useIsFullscreen();var m=i.useDuration(),n=c("useVideoPlayerHasStartedPlayingAtLeastOnce")(),o=i.usePlaying(),p=i.useEnded();n=!n&&!o||p;b[2]!==m||b[3]!==e||b[4]!==h||b[5]!==a||b[6]!==f||b[7]!==n?(o=h?j.jsxs(j.Fragment,{children:[j.jsxs(d("VideoPlayerControlsGroups.react").Contracted,{children:[j.jsx(c("VideoPlayerPlaybackControl.react"),{}),j.jsx(c("VideoPlayerPlaybackTimer.react"),{})]}),j.jsx(d("VideoPlayerControlsGroups.react").Expanded,{children:j.jsx(c("VideoPlayerScrubber.react"),{onUserInteraction:f})}),j.jsxs(d("VideoPlayerControlsGroups.react").Contracted,{children:[j.jsx(c("VideoPlayerFullscreenControl.react"),{onUserInteraction:f}),j.jsx(c("VideoPlayerVolumeControl.react"),{onUserInteraction:f})]})]}):n?j.jsx(c("MWThumbnailDurationPill"),{spacing:"WIDE",videoDuration:m}):j.jsxs(j.Fragment,{children:[j.jsxs(d("VideoPlayerControlsGroups.react").Contracted,{children:[a===!0?j.jsx(c("VideoPlayerPlaybackTimer.react"),{}):null,j.jsx(k,{children:j.jsx(c("VideoPlayerPlaybackControl.react"),{})})]}),j.jsx(d("VideoPlayerControlsGroups.react").Expanded,{children:j.jsx(c("VideoPlayerScrubber.react"),{onUserInteraction:f})}),j.jsxs(d("VideoPlayerControlsGroups.react").Contracted,{children:[e?null:j.jsx(k,{children:j.jsx(c("VideoPlayerFullscreenControl.react"),{onUserInteraction:f})}),j.jsx(k,{children:j.jsx(c("VideoPlayerVolumeControl.react"),{onUserInteraction:f})})]})]}),b[2]=m,b[3]=e,b[4]=h,b[5]=a,b[6]=f,b[7]=n,b[8]=o):o=b[8];b[9]!==g||b[10]!==o?(p=j.jsx(c("VideoPlayerControlsContainerOverlay.react"),{isVisible:g,children:o}),b[9]=g,b[10]=o,b[11]=p):p=b[11];m=p;b[12]!==l||b[13]!==m?(e=j.jsxs(j.Fragment,{children:[l,m]}),b[12]=l,b[13]=m,b[14]=e):e=b[14];return e}g["default"]=a}),98);
__d("MWSetupMediaRenderQpl.react",["FBLogger","VideoPlayerHooks","performanceAbsoluteNow","react","react-compiler-runtime","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=i||d("react");var k=b.useEffect,l=b.useRef;function a(a){var b=d("react-compiler-runtime").c(5),e=a.context,f=a.mediaRenderQpl,g=(j||(j=d("VideoPlayerHooks"))).useController(),i=l(),m;b[0]!==e||b[1]!==f||b[2]!==g?(a=function(){f==null||f.addPoint("setup-video-media-render-qpl",{string:{context:e}});var a=function(){var a=g.getCurrentState();if(a.error!=null){var b=a.error.errorName,d=a.error.errorType,j=a.error.errorMessageFormat+" - "+a.error.errorMessageParams.join(",");f==null||f.endFail("load-video-error",{string:{video_error_message:j,video_error_name:b,video_error_type:d}});c("FBLogger")("messenger_web_media","load-video-error").warn("%s Video Player Error: %s",e,j);(b=i.current)==null||b.remove()}d=a.domEventsLatestPerfMs.loadeddata!=null&&a.domEventsLatestPerfMs.loadeddata>0;d&&(f==null||f.addPoint("video-state-loaded-data"));j=a.domEventsLatestPerfMs.loadedmetadata!=null&&a.domEventsLatestPerfMs.loadedmetadata>0;j&&(f==null||f.addPoint("video-state-loaded-metadata"));d=(b=g.internal_getStateMachineState())==null?void 0:b.uncontrolledState;j=d==null?void 0:d.videoElementReadyState;j!=null&&j>0&&(f==null||f.addPoint("video-state-ready-state",{"int":{ready_state:j}}));b=a.domEventsLatestPerfMs.canplay!=null&&a.domEventsLatestPerfMs.canplay>0;if(b){var k=(h||(h=c("performanceAbsoluteNow")))();f==null||f.addPoint("video-state-can-play");c("setTimeout")(function(){var a;f==null||f.endSuccess(void 0,k);(a=i.current)==null||a.remove()},500)}};i.current=g.subscribe(function(){a()});a();return function(){var a;(a=i.current)==null||a.remove()}},m=[e,f,g],b[0]=e,b[1]=f,b[2]=g,b[3]=a,b[4]=m):(a=b[3],m=b[4]);k(a,m);return null}g["default"]=a}),98);
__d("MWVideoPlayerControllerContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({ref:{current:null}});g["default"]=b}),98);
__d("MWChatVideoPlayer.react",["CometProductAttribution","CometVideoPlayerLoggingConfigForMWChat","GraphQLVideoAutoplayGatingResult","MWChatVideoAutoplaySettingContext","MWChatVideoPlayerControls.react","MWSetupMediaRenderQpl.react","MWVideoPlayerControllerContext.react","VideoPlayerDefaultControls.react","VideoPlayerHooks","VideoPlayerInteractionOverlay.react","VideoPlayerProgressiveImplementationData","VideoPlayerProgressiveImplementationV2.react","VideoPlayerSurface.react","VideoPlayerX.react","computeAspectRatio","getVideoPlayerAutoplayProps","react","react-compiler-runtime","useVideoPlayerClickToPauseInteraction","useVideoPlayerClickToPlayInteraction"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));b=h;var k=b.useContext,l=b.useEffect,m={link_context:null,navChainContent:null,rootName:"MWChatMediaRoot.react",tap_point:"unexpected",tracePolicy:"comet.sharedmediaviewer.media",trackingNodes:null},n=-1;function o(a){var b=d("react-compiler-runtime").c(10),e=a.controls,f=a.hideExpandButton,g=a.isMediaViewer;a=a.shouldForcePauseOnClick;var h;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(h={shouldUnmute:!0},b[0]=h):h=b[0];h=c("useVideoPlayerClickToPlayInteraction")(h);var k=c("useVideoPlayerClickToPauseInteraction")(),l=(i||(i=d("VideoPlayerHooks"))).usePaused();l=l&&!a?h:k;b[1]!==l?(a=j.jsx(d("VideoPlayerInteractionOverlay.react").VideoPlayerInteractionOverlay,{pressInteraction:l}),b[1]=l,b[2]=a):a=b[2];b[3]!==e||b[4]!==f||b[5]!==g?(h=p(e,f,g),b[3]=e,b[4]=f,b[5]=g,b[6]=h):h=b[6];b[7]!==a||b[8]!==h?(k=j.jsxs(j.Fragment,{children:[a,h]}),b[7]=a,b[8]=h,b[9]=k):k=b[9];return k}var p=function(a,b,d){switch(a){case"mwchat":return j.jsx(c("MWChatVideoPlayerControls.react"),{hideExpandButton:b===!0,isMediaViewer:d===!0});case"default":return j.jsx(c("VideoPlayerDefaultControls.react"),{});case"none":return null;default:return null}},q=function(a){return a!=null?function(b){return{objectFit:a}}:null};function r(a){a=a.children;var b=(i||(i=d("VideoPlayerHooks"))).useController(),e=k(c("MWVideoPlayerControllerContext.react"));l(function(){e.ref.current=b;return function(){e.ref.current=null}},[e,b]);return a}r.displayName=r.name+" [from "+f.id+"]";function a(a){var b=d("react-compiler-runtime").c(43),e=a.autoPlaySetting,f=a.controls,g=a.errorBoundaryFallback,h=a.fbid,i=a.hdSrc,k=a.hideExpandButton,p=a.initialForceHD,s=a.isMediaViewer,t=a.loopCount,u=a.mediaRenderQpl,v=a.originalHeight,w=a.originalWidth,x=a.pixelsFit,y=a.sdSrc,z=a.shouldForcePauseOnClick,A=a.startTimestamp;a=a.volumeSetting;var B=d("MWChatVideoAutoplaySettingContext").useMWChatVideoAutoplaySetting();p=p!=null?p:!1;var C;b[0]!==i||b[1]!==y||b[2]!==p?(C=d("VideoPlayerProgressiveImplementationData").makeProgressiveImplementationData({hdSrc:i,hdSrcPreferred:p,sdSrc:y}),b[0]=i,b[1]=y,b[2]=p,b[3]=C):C=b[3];var D=C;b[4]!==D||b[5]!==u?(i=function(){u==null||u.addPoint("render-chat-video-player"),D instanceof Error&&(u==null||u.endFail("load-video-player-error",{string:{player_implementation_error_message:D.message,player_implementation_error_name:D.name}}))},y=[D,u],b[4]=D,b[5]=u,b[6]=i,b[7]=y):(i=b[6],y=b[7]);l(i,y);if(D instanceof Error){b[8]!==g?(p=g==null?void 0:g(),b[8]=g,b[9]=p):p=b[9];return p}b[10]!==D?(C=[{Component:c("VideoPlayerProgressiveImplementationV2.react"),data:D,typename:"VideoPlayerProgressiveImplementation"}],b[10]=D,b[11]=C):C=b[11];i=C;y=e!=null?e:B;b[12]!==y?(p=c("getVideoPlayerAutoplayProps")(d("GraphQLVideoAutoplayGatingResult").makeGraphQLVideoAutoplayGatingResult("unknown",y,!0),"respect_user_settings",null),b[12]=y,b[13]=p):p=b[13];C=p;b[14]!==v||b[15]!==w?(e=c("computeAspectRatio")(w,v),b[14]=v,b[15]=w,b[16]=e):e=b[16];B=e;b[17]===Symbol["for"]("react.memo_cache_sentinel")?(y=d("CometVideoPlayerLoggingConfigForMWChat").createCometVideoPlayerLoggingConfigForMWChat({withMWChatSNAPLGK:!0}),b[17]=y):y=b[17];p=t!=null?t:n;b[18]===Symbol["for"]("react.memo_cache_sentinel")?(v={v2:[d("CometProductAttribution").getProductAttributionEntryV2(m)]},b[18]=v):v=b[18];b[19]!==x?(w=q(x),b[19]=x,b[20]=w):w=b[20];b[21]!==u?(e=j.jsx(c("MWSetupMediaRenderQpl.react"),{context:"MWChat",mediaRenderQpl:u}),b[21]=u,b[22]=e):e=b[22];t=k===!0;x=s===!0;b[23]!==f||b[24]!==z||b[25]!==t||b[26]!==x?(k=j.jsx(r,{children:j.jsx(o,{controls:f,hideExpandButton:t,isMediaViewer:x,shouldForcePauseOnClick:z})}),b[23]=f,b[24]=z,b[25]=t,b[26]=x,b[27]=k):k=b[27];b[28]!==e||b[29]!==k?(s=j.jsxs(c("VideoPlayerSurface.react"),{children:[e,k]}),b[28]=e,b[29]=k,b[30]=s):s=b[30];b[31]!==g||b[32]!==h||b[33]!==i||b[34]!==A||b[35]!==p||b[36]!==w||b[37]!==s||b[38]!==y||b[39]!==B||b[40]!==C||b[41]!==a?(f=j.createElement(c("VideoPlayerX.react"),babelHelpers["extends"]({},C,{errorBoundaryFallback:g,implementations:i,key:h,loggingConfig:y,loopCount:p,playerOriginOverride:"messaging",portalingEnabled:!1,productAttribution:v,renderVideoPixelsFit:w,startTimestamp:A,subOrigin:"messenger_thread",videoFBID:h,videoPixelsAspectRatio:B,volumeSetting:a}),s),b[31]=g,b[32]=h,b[33]=i,b[34]=A,b[35]=p,b[36]=w,b[37]=s,b[38]=y,b[39]=B,b[40]=C,b[41]=a,b[42]=f):f=b[42];return f}g["default"]=a}),98);
__d("MWFDSChevronLeft.svg.react",["cr:21602"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:21602")}),98);
__d("MWFDSChevronRight.svg.react",["cr:21604"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:21604")}),98);
__d("MWFDSDownload.svg.react",["cr:21633"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:21633")}),98);
__d("MWFDSEyeCross.svg.react",["cr:21641"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:21641")}),98);
__d("MWFDSHd.svg.react",["cr:21679"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:21679")}),98);
__d("MWFDSInfoCircle.svg.react",["cr:21686"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:21686")}),98);
__d("MWFDSShare.svg.react",["cr:21777"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:21777")}),98);
__d("MWMediaRenderQplUtils",["CurrentUser","E2EELinkPreviewXMADataType","I64","LSAuthorityLevel","LSBitFlag","LSIntEnum","LSMessageContentType","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSMessagingInitiatingSource","LSReplyMessageAttachmentType","LSXmaContentType","MAWLoggerUtils","MNLSXMALayoutType","MessagingAttachmentType","MessagingThreadType","QPLUserFlow","ServerTime","VisibilityAPI","VisibilityState","justknobx","mergeDeep","objectEntries","performanceAbsoluteNow","qpl","react","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||d("react"),m=l.useEffect,n=l.useLayoutEffect,o=l.useMemo,p=l.useRef,q=60*60*24,r=3*q,s=7*q,t=2*s,u=4*s,v=c("qpl")._(25302828,"2195"),w=c("justknobx")._("2945"),x=1e3,y=c("objectEntries")(c("LSMessageContentType")).reduce(function(a,b){var c=b[0];b=b[1];a.set(b,c);return a},new Map()),z=c("objectEntries")(c("LSReplyMessageAttachmentType")).reduce(function(a,b){var c=b[0];b=b[1];a.set(b,c);return a},new Map());function a(a){return A(a.displayedContentTypes)}function A(a){if(d("LSBitFlag").has((j||(j=d("LSIntEnum"))).ofNumber(1024),a)){var b;return(b=y.get(1024))!=null?b:"UNKNOWN"}return(b=y.get((k||(k=d("I64"))).to_float(a)))!=null?b:"UNKNOWN"}function b(a){return a==null?"UNKNOWN":(a=z.get((k||(k=d("I64"))).to_int32(a)))!=null?a:"UNKNOWN"}function B(a){var b;if((k||(k=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE)))b=(j||(j=d("LSIntEnum"))).ofNumber(16384);else if((k||(k=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)))b=(j||(j=d("LSIntEnum"))).ofNumber(2);else if((k||(k=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))b=(j||(j=d("LSIntEnum"))).ofNumber(2);else if((k||(k=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO)))b=(j||(j=d("LSIntEnum"))).ofNumber(4);else if((k||(k=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE)))b=(j||(j=d("LSIntEnum"))).ofNumber(64);else if((k||(k=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE)))b=(j||(j=d("LSIntEnum"))).ofNumber(64);else if((k||(k=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA)))b=(j||(j=d("LSIntEnum"))).ofNumber(1024);else return"UNKNOWN";return A(b)}var C=c("objectEntries")(c("MessagingAttachmentType")).reduce(function(a,b){var c=b[0];b=b[1];a.set(b,c);return a},new Map());function e(a){return D(a.attachmentType)}function D(a){return(a=C.get((k||(k=d("I64"))).to_float(a)))!=null?a:"UNKNOWN"}var E=c("objectEntries")(c("MessagingThreadType")).reduce(function(a,b){var c=b[0];b=b[1];a.set(b,c);return a},new Map());function f(a){a=a.threadType;return F(a)}function F(a){return(a=E.get((k||(k=d("I64"))).to_float(a)))!=null?a:"UNKNOWN"}var G=c("objectEntries")(c("LSXmaContentType")).reduce(function(a,b){var c=b[0];b=b[1];a.set(b,c);return a},new Map());function H(a){return(a=G.get((k||(k=d("I64"))).to_float(a)))!=null?a:"UNKNOWN"}var I=c("objectEntries")(c("LSMessagingInitiatingSource")).reduce(function(a,b){var c=b[0];b=b[1];a.set(b,c);return a},new Map());function J(a){return a!=null?(a=I.get((k||(k=d("I64"))).to_float(a)))!=null?a:"UNKNOWN":"UNKNOWN"}var K=c("objectEntries")(c("E2EELinkPreviewXMADataType")).reduce(function(a,b){var c=b[0];b=b[1];a.set(b,c);return a},new Map());function L(a){return(a=K.get((k||(k=d("I64"))).to_float(a)))!=null?a:"UNKNOWN"}var M=c("objectEntries")(c("LSMessageReplySourceType")).reduce(function(a,b){var c=b[0];b=b[1];a.set(b,c);return a},new Map());function N(a){return(a=M.get((k||(k=d("I64"))).to_float(a)))!=null?a:"UNKNOWN"}var O=c("objectEntries")(c("MNLSXMALayoutType")).reduce(function(a,b){var c=b[0];b=b[1];a.set(b,c);return a},new Map());function P(a){return a==null?"UNKNOWN":(a=O.get((k||(k=d("I64"))).to_float(a)))!=null?a:"UNKNOWN"}var Q=c("objectEntries")(c("LSMessageReplySourceTypeV2")).reduce(function(a,b){var c=b[0];b=b[1];a.set(b,c);return a},new Map());function R(a){return(a=Q.get((k||(k=d("I64"))).to_float(a)))!=null?a:"UNKNOWN"}function S(a,b,e,f){var g=(h||(h=c("performanceAbsoluteNow")))(),i=function(d,e){c("QPLUserFlow").addPoint(a,"window_visibility_change_"+(e?"hidden":"visible"),{instanceKey:b}),e&&c("QPLUserFlow").addAnnotations(a,{bool:{window_was_hidden:!0}},{instanceKey:b})},j=function(a){var b=d("VisibilityAPI").canUseVisibilityAPI?d("VisibilityAPI").isVisibilityHidden():void 0;b={bool:{window_is_hidden_on_end:b}};return a!=null?c("mergeDeep")(a,b):b};return{addAnnotations:function(d){c("QPLUserFlow").addAnnotations(a,d,{instanceKey:b})},addPoint:function(d,e){c("QPLUserFlow").addPoint(a,d,{data:e,instanceKey:b})},endCancel:function(f){e!=null&&(e.current=!0);var g=(h||(h=c("performanceAbsoluteNow")))(),k=j();d("VisibilityState").unsubscribe(i);c("setTimeout")(function(){c("QPLUserFlow").endCancel(a,{annotations:k,cancelReason:f,instanceKey:b,timestamp:g})},x)},endFail:function(f,g){e!=null&&(e.current=!0);var k=(h||(h=c("performanceAbsoluteNow")))(),l=c("mergeDeep")(j(g),{string:{fail_reason:f}});d("VisibilityState").unsubscribe(i);c("setTimeout")(function(){c("QPLUserFlow").endFailure(a,"render-failure",{annotations:l,instanceKey:b,timestamp:k})},x)},endSuccess:function(f,g){e!=null&&(e.current=!0);var k=g!=null?g:(h||(h=c("performanceAbsoluteNow")))(),l=j(f);d("VisibilityState").unsubscribe(i);c("setTimeout")(function(){c("QPLUserFlow").endSuccess(a,{annotations:l,instanceKey:b,timestamp:k})},x)},getInstanceKey:function(){return b},start:function(e){var j=g,k=f!=null?f:{};if(e!=null&&e.isManualRetry===!0){var l;j=(h||(h=c("performanceAbsoluteNow")))();k=c("mergeDeep")(k,{bool:{is_manual_retry:!0},"int":{manual_retry_count:((l=e.manualRetryCount)!=null?l:0)+1},string:{previousManualRetryErrorDetails:e.previousManualRetryErrorDetails}})}c("QPLUserFlow").start(a,{annotations:k,cancelOnUnload:!0,instanceKey:b,timeoutInMs:w,timestamp:j});d("VisibilityState").subscribe(i)}}}function T(a,b,e){var f=a.attachmentType,g=p(!1),h=o(function(){var h=d("MAWLoggerUtils").getInstanceKey(),i=c("CurrentUser").getAppID();i={string:{app_id:i!=null?i:void 0,attachment_type:D(f),content_type:B(f),entry_point:e,thread_type:F(b),transport_key:a.transportKey,xma_content_type:a.xmaContentType!=null?H(a.xmaContentType):void 0}};return babelHelpers["extends"]({},S(v,h,g,i))},[a.messageId]);n(function(){h==null||h.start()},[h]);m(function(){return function(){g.current===!1&&(h==null?void 0:h.getInstanceKey())!=null&&(h==null||h.endCancel(706))}},[h]);return h}function U(a,b,c){a=a+(b?"0":"1")+(c?"1":"0");return d("MAWLoggerUtils").getInstanceKeyFromId(a)}function V(a,b,e,f,g){g===void 0&&(g={});b=(k||(k=d("I64"))).le(b,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC));a=U(a,b,e);c("QPLUserFlow").endFailure(v,f,{annotations:g,instanceKey:a})}function W(a,b,e,f,g){g===void 0&&(g={});b=(k||(k=d("I64"))).le(b,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC));a=U(a,b,e);c("QPLUserFlow").addPoint(v,f,{data:g,instanceKey:a})}function X(a){var b=(k||(k=d("I64"))).of_float(d("ServerTime").getMillis());b=k.to_float(k.sub(b,a))/1e3;b<q?a="less_than_one_day":b<r?a="between_one_and_three_days":b<s?a="between_three_days_and_one_week":b<t?a="between_one_and_two_weeks":b<u?a="between_two_weeks_and_one_month":a="more_than_one_month";return a}function Y(a){if(a==null||a<=0)return"invalid_duration";else if(a<=30)return"duration less than 30 seconds";else if(a<=1*60)return"duration between 30 seconds and 1 minute";else if(a<=2*60)return"duration between 1 minute and 2 minutes";else if(a<=3*60)return"duration between 2 minutes and 3 minutes";else if(a<=5*60)return"duration between 3 minutes and 5 minutes";else if(a<=10*60)return"duration between 5 minutes and 10 minutes";else if(a<=30*60)return"duration between 10 minutes and 30 minutes";else if(a<=1*60*60)return"duration between 30 minutes and 1 hour";else if(a<=2*60*60)return"duration between 1 hour and 2 hours";else return"duration above 2 hours"}g.MSGR_WEB_MEDIA_RENDER_EVENT=v;g.QPL_TIMEOUT=w;g.QPL_END_DELAY_MS=x;g.getMessageContentTypeString=a;g.getMessageContentTypeStringFromEnum=A;g.getReplyMessageAttachmentTypeStringFromEnum=b;g.deriveMessageContentTypeStringFromAttachmentTypeLessAccurate=B;g.getAttachmentTypeString=e;g.getAttachmentTypeStringFromEnum=D;g.getThreadTypeString=f;g.getThreadTypeStringFromEnum=F;g.getXmaContentTypeStringFromEnum=H;g.getMessagingInitiationSourceStringFromEnum=J;g.getE2EELinkPreviewXMADataTypeStringFromEnum=L;g.getMessageReplySourceTypeStringFromEnum=N;g.getMessageXmaLayoutTypeStringFromEnum=P;g.getMessageReplySourceTypeV2StringFromEnum=R;g.createQplFlowCommon=S;g.useCommonMediaRenderQplForAttachment=T;g.getThreadViewMediaRenderQplInstanceKey=U;g.endThreadViewMediaRenderQpl=V;g.addThreadViewMediaRenderQplPoint=W;g.calculateDiffBucketFromTimestamp=X;g.convertDurationToStringBucket=Y}),98);
__d("MWV2OneToOneThreadBlockedContext.react",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;e=c.createContext;var j=c.useContext,k=e(!1);function a(){return j(k)}function b(a){var b=d("react-compiler-runtime").c(3),c=a.blocked;a=a.children;var e=k.Provider;b[0]!==c||b[1]!==a?(e=i.jsx(e,{value:c,children:a}),b[0]=c,b[1]=a,b[2]=e):e=b[2];return e}g.useIsBlocked=a;g.MWV2OneToOneThreadBlockedContext=b}),98);
__d("MWXIconDownload",["MWXSvgIcon","SVGIcon","cr:22301","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22301")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconShare",["MWXSvgIcon","SVGIcon","cr:22483","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22483")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXMAUtils",["I64","LSXmaContentType"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Set(["xma_rtc_video","xma_rtc_missed_video","xma_rtc_missed_group_video","xma_rtc_ended_video","xma_rtc_new_video_default","xma_rtc_new_video_from_fb_share","xma_rtc_new_video_from_fb_video_share","xma_rtc_new_video_from_cowatch_share","xma_rtc_cowatch_start_video","xma_rtc_audio","xma_rtc_missed_audio","xma_rtc_missed_group_audio","xma_rtc_ended_audio","xma_rtc_new_audio_default","xma_rtc_new_audio_from_fb_share","xma_rtc_new_audio_from_fb_video_share","xma_rtc_new_audio_from_cowatch_share"]);function a(a){return i.has(a)}function b(a){return(h||(h=d("I64"))).to_int32(a!=null?a:(h||(h=d("I64"))).zero)===c("LSXmaContentType").MSG_LOCATION_SHARING||(h||(h=d("I64"))).to_int32(a!=null?a:(h||(h=d("I64"))).zero)===c("LSXmaContentType").MSG_LOCATION_SHARING_V2}function e(a){return(h||(h=d("I64"))).to_int32(a!=null?a:(h||(h=d("I64"))).zero)===c("LSXmaContentType").MSG_CONTACT||(h||(h=d("I64"))).to_int32(a!=null?a:(h||(h=d("I64"))).zero)===c("LSXmaContentType").MSG_AI_CONTACT}function f(a){return(h||(h=d("I64"))).to_int32(a!=null?a:(h||(h=d("I64"))).zero)===c("LSXmaContentType").FB_POST_MENTION}function j(a){return(h||(h=d("I64"))).to_int32(a!=null?a:(h||(h=d("I64"))).zero)===c("LSXmaContentType").MSG_MEMORIES_SHARE}function k(a){a=(h||(h=d("I64"))).to_int32(a!=null?a:(h||(h=d("I64"))).zero);return a===c("LSXmaContentType").RTC_AUDIO_CALL||a===c("LSXmaContentType").RTC_VIDEO_CALL||a===c("LSXmaContentType").RTC_MISSED_AUDIO_CALL||a===c("LSXmaContentType").RTC_MISSED_VIDEO_CALL||a===c("LSXmaContentType").RTC_GROUP_AUDIO_CALL||a===c("LSXmaContentType").RTC_GROUP_VIDEO_CALL||a===c("LSXmaContentType").RTC_MISSED_GROUP_AUDIO_CALL||a===c("LSXmaContentType").RTC_MISSED_GROUP_VIDEO_CALL||a===c("LSXmaContentType").RTC_ONGOING_AUDIO_CALL||a===c("LSXmaContentType").RTC_ONGOING_VIDEO_CALL}function l(a){return(h||(h=d("I64"))).to_int32(a!=null?a:(h||(h=d("I64"))).zero)===c("LSXmaContentType").FB_STORY_MENTION}g.isRTCXMA=a;g.isLocationShareXMA=b;g.isContactShareXMA=e;g.isXMAContentTypeFbPostMention=f;g.isXMAContentTypeMemoriesShare=j;g.isXMAContentTypeRTC=k;g.isStoryMentionXMA=l}),98);
__d("XComposerPhotoUploaderImmediate",["Promise","XComposerPhotoUploader","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h;a={load:function(){return(h||(h=b("Promise"))).resolve(c("XComposerPhotoUploader"))},preload:c("emptyFunction")};g["default"]=a}),98);
__d("acceptMAWMessageRequest",["I64","LSAddMessengerContactStoredProcedure","LSFactory","LSOptimisticAcceptMessageRequestStoredProcedure","MAWUpdateLSThreadCapabilities","Promise","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e,g,j){if(!j||g==null)return;var k=g[1],l=babelHelpers["extends"]({},k,{contactViewerRelationship:(i||(i=d("I64"))).of_string("2")});c("promiseDone")(a.runInTransaction(function(a){return(h||(h=b("Promise"))).all([a.contacts.upsert([k.id],l),c("LSAddMessengerContactStoredProcedure")(c("LSFactory")(a),{contactId:k.id}),d("MAWUpdateLSThreadCapabilities").updateNonMessageRequestThreadTxn(a,e.threadKey),c("LSOptimisticAcceptMessageRequestStoredProcedure")(c("LSFactory")(a),{threadKey:e.threadKey})])},"readwrite",void 0,void 0,f.id+":37"))}g["default"]=a}),98);
__d("shouldHideMessagingActions",["I64","LSIntEnum","isDeliveryStatusErrorState"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){return(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(256))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(65536))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(131072))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(262144))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(524288))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4294967296))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(1048576))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(2097152))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4194304))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(8388608))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(16777216))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(67108864))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(1073741824))}function a(a,b){return c("isDeliveryStatusErrorState")(b)||j(a)?!0:!1}g["default"]=a}),98);
__d("useClientMediaStatus",["ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=d("react-compiler-runtime").c(6),e=(h||(h=c("useReStore")))(),g;b[0]!==a?(g=a.filter(j).map(i).join(","),b[0]=a,b[1]=g):g=b[1];var k=g;b[2]!==e.tables.client_media_status||b[3]!==k?(a=function(){if(k==="")return d("ReQL").empty();var a=k.split(",").map(function(a){return d("ReQL").fromTableAscending(e.tables.client_media_status).getKeyRange(a)});if(a.length===0)return d("ReQL").empty();else if(a.length===1)return a[0];return d("ReQL").union.apply(void 0,a)},g=[k,e.tables.client_media_status],b[2]=e.tables.client_media_status,b[3]=k,b[4]=a,b[5]=g):(a=b[4],g=b[5]);b=d("ReQLSuspense").useArray(a,g,f.id+":29");return b}function i(a){a=a.statusKey;return a}function j(a){a=a.mediaStatus;return a==null}g["default"]=a}),98);
__d("useMWHasForwardAction",["I64","LSAuthorityLevel","LSBitFlag","LSContactBitOffset","LSIntEnum","LSMessagingThreadTypeUtil","MAWMsg","MWCMIsSubthreadContext.react","MWGenAIUtils","MWMessageDeliveryStatus","MWPThreadCapabilitiesContext","MWV2OneToOneThreadBlockedContext.react","MWXMAUtils","MessagingAttachmentType","gkx","isFeatureLimitEnabled","isMWBumpMessage","mwCMIsAnyCMThread","react-compiler-runtime","shouldHideMessagingActions","useIsReadOnlyFeatureLimitedWithThreadType","useMAWMediaDownloadStatus","useMWFamilyCenterContext","useMWGetOtherUserContact","useMWIsContactRestricted"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,e,f,g,j){var k=d("react-compiler-runtime").c(76);f=f===void 0?!1:f;j=j===void 0?!1:j;var l=d("MWCMIsSubthreadContext.react").useIsSubthreadContext();l=l.isSubthread;var m;k[0]!==l||k[1]!==a?(m=l&&!d("LSMessagingThreadTypeUtil").isCMSubthread(a),k[0]=l,k[1]=a,k[2]=m):m=k[2];l=m;k[3]!==a?(m=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a),k[3]=a,k[4]=m):m=k[4];m=m;var n;k[5]!==b.threadKey?(n=d("MWGenAIUtils").isMetaAIThread(b.threadKey),k[5]=b.threadKey,k[6]=n):n=k[6];n=n;var o;k[7]!==a?(o=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a),k[7]=a,k[8]=o):o=k[8];o=o;var p=b.ephemeralDurationInSec,q;k[9]!==p?(q=p!=null?(h||(h=d("I64"))).gt(p,(h||(h=d("I64"))).zero):!1,k[9]=p,k[10]=q):q=k[10];p=q;q=c("useIsReadOnlyFeatureLimitedWithThreadType")(a)&&(!o||c("isFeatureLimitEnabled")());var r;k[11]!==b.displayedContentTypes?(r=(h||(h=d("I64"))).equal(b.displayedContentTypes,(i||(i=d("LSIntEnum"))).ofNumber(4096)),k[11]=b.displayedContentTypes,k[12]=r):r=k[12];r=r;var s;k[13]!==b.displayedContentTypes?(s=(h||(h=d("I64"))).equal(b.displayedContentTypes,(i||(i=d("LSIntEnum"))).ofNumber(134217728)),k[13]=b.displayedContentTypes,k[14]=s):s=k[14];s=s;var t=d("MWV2OneToOneThreadBlockedContext.react").useIsBlocked(),u;k[15]!==b.displayedContentTypes||k[16]!==b.sendStatusV2?(u=c("shouldHideMessagingActions")(b.displayedContentTypes,d("MWMessageDeliveryStatus").getFromSendStatus(b.sendStatusV2)),k[15]=b.displayedContentTypes,k[16]=b.sendStatusV2,k[17]=u):u=k[17];u=u;var v=c("useMWGetOtherUserContact")(b.threadKey,a,d("LSContactBitOffset").contactCapabilityFields);v=c("useMWIsContactRestricted")(v);var w;k[18]!==b.sendStatusV2||k[19]!==a?(w=c("mwCMIsAnyCMThread")(a)&&(h||(h=d("I64"))).equal(b.sendStatusV2,(i||(i=d("LSIntEnum"))).ofNumber(4)),k[18]=b.sendStatusV2,k[19]=a,k[20]=w):w=k[20];a=w;k[21]!==m||k[22]!==b.displayedContentTypes?(w=d("LSBitFlag").has((i||(i=d("LSIntEnum"))).ofNumber(2),b.displayedContentTypes)||m&&d("LSBitFlag").has((i||(i=d("LSIntEnum"))).ofNumber(1024),b.displayedContentTypes)&&c("gkx")("15802"),k[21]=m,k[22]=b.displayedContentTypes,k[23]=w):w=k[23];w=w;var x;k[24]!==b.replyType?(x=c("isMWBumpMessage")(b.replyType),k[24]=b.replyType,k[25]=x):x=k[25];x=x;var y=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext();y=y.messageForwardEnabled;var z=d("useMWFamilyCenterContext").useMWFamilyCenterEnforcementsContext();z=z.familyCenterData;var A;k[26]!==e?(A=(e==null?void 0:e.attachmentType)!=null&&((h||(h=d("I64"))).equal(e.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_IMAGE))||(h||(h=d("I64"))).equal(e.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_VIDEO))),k[26]=e,k[27]=A):A=k[27];A=A;var B;k[28]!==e||k[29]!==o?(B=o&&(e==null?void 0:e.xmaContentType)!=null&&d("MWXMAUtils").isLocationShareXMA(e.xmaContentType),k[28]=e,k[29]=o,k[30]=B):B=k[30];B=B;var C;k[31]!==e||k[32]!==o?(C=o&&(e==null?void 0:e.xmaContentType)!=null&&d("MWXMAUtils").isContactShareXMA(e.xmaContentType),k[31]=e,k[32]=o,k[33]=C):C=k[33];C=C;var D;k[34]!==e||k[35]!==o?(D=o&&(e==null?void 0:e.xmaContentType)!=null&&d("MWXMAUtils").isXMAContentTypeFbPostMention(e.xmaContentType),k[34]=e,k[35]=o,k[36]=D):D=k[36];D=D;var E;k[37]!==e||k[38]!==o?(E=o&&(e==null?void 0:e.xmaContentType)!=null&&d("MWXMAUtils").isXMAContentTypeMemoriesShare(e.xmaContentType),k[37]=e,k[38]=o,k[39]=E):E=k[39];E=E;var F;k[40]!==e?(F=(e==null?void 0:e.xmaContentType)!=null&&d("MWXMAUtils").isStoryMentionXMA(e.xmaContentType),k[40]=e,k[41]=F):F=k[41];F=F;var G=c("useMAWMediaDownloadStatus")(e);G=G.uiState;var H;k[42]!==e||k[43]!==o||k[44]!==G?(H=e!=null&&o&&!(h||(h=d("I64"))).equal(e.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA))&&G!=="downloaded",k[42]=e,k[43]=o,k[44]=G,k[45]=H):H=k[45];G=H;k[46]!==e||k[47]!==z||k[48]!==a||k[49]!==t||k[50]!==m||k[51]!==x||k[52]!==p||k[53]!==n||k[54]!==G||k[55]!==q||k[56]!==s||k[57]!==v||k[58]!==C||k[59]!==D||k[60]!==B||k[61]!==E||k[62]!==o||k[63]!==r||k[64]!==l||k[65]!==A||k[66]!==F||k[67]!==g||k[68]!==b||k[69]!==y||k[70]!==u||k[71]!==f?(H=(o?!p&&!r&&!s:!0)&&!l&&!t&&!v&&!q&&!b.isUnsent&&!a&&!d("MAWMsg").isPlaceholder(b)&&!x&&y&&(!m||m&&c("gkx")("15802"))&&!f&&(h||(h=d("I64"))).gt(b.authorityLevel,(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC))&&(e!=null&&(h||(h=d("I64"))).equal(e.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA))&&(e.attachmentCta1Id!=null||e.attachmentCta2Id!=null||e.attachmentCta3Id!=null||e.defaultCtaId!=null)?e.isSharable:!0)&&(g==null||!g.hasMissingMessages&&!g.hasMissingMedia)&&!z.hasActiveMsgrFamilyCenterEnforcement&&!A&&!u&&!G&&!B&&!C&&!D&&!E&&!F&&!n,k[46]=e,k[47]=z,k[48]=a,k[49]=t,k[50]=m,k[51]=x,k[52]=p,k[53]=n,k[54]=G,k[55]=q,k[56]=s,k[57]=v,k[58]=C,k[59]=D,k[60]=B,k[61]=E,k[62]=o,k[63]=r,k[64]=l,k[65]=A,k[66]=F,k[67]=g,k[68]=b,k[69]=y,k[70]=u,k[71]=f,k[72]=H):H=k[72];e=H;z=w&&e&&!j;k[73]!==e||k[74]!==z?(a={hasForwardAction:e,shouldShowForwardAction:z},k[73]=e,k[74]=z,k[75]=a):a=k[75];return a}g["default"]=a}),98);